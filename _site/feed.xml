<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Scorpio åšå®¢</title>
    <description>One or more sentences introducing this blog.
</description>
    <link>http://www.pisces.ml/</link>
    <atom:link href="http://www.pisces.ml/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Tue, 15 Nov 2016 23:12:30 +0800</pubDate>
    <lastBuildDate>Tue, 15 Nov 2016 23:12:30 +0800</lastBuildDate>
    <generator>Jekyll v3.1.6</generator>
    
      <item>
        <title>mysqlæ•°æ®åº“å¤‡ä»½ä¸æ¢å¤</title>
        <description>&lt;p&gt;å·¥ä½œå½“ä¸­æœ‰æ—¶éœ€è¦å¯¹æ•°æ®åº“è¿›è¡Œå¤‡ä»½ä¸æ¢å¤ï¼Œå…¶å®æ•°æ®åº“å¯¹å¤‡ä»½ä¸æ¢å¤å¾ˆç®€å•ï¼Œå‡ æ¡å‘½ä»¤å°±æå®šã€‚
ä½†æ˜¯å› ä¸ºå¯¹è¯¥å‘½ä»¤ç”¨çš„æ¯”è¾ƒå°‘ï¼Œå®¹æ˜“å¿˜è®°ã€‚æ‰€ä»¥åšä¸ªè®°å½•å¹¶ä¸”å­¦ä¹ å­¦ä¹ æ•°æ®åº“å‘½ä»¤æ“ä½œã€‚&lt;/p&gt;

&lt;h2 id=&quot;section&quot;&gt;ç®€ä»‹&lt;/h2&gt;

&lt;p&gt;mysqldumpä¸ºMySQLé€»è¾‘å¤‡ä»½å·¥å…·ï¼Œäº§ç”Ÿä¸€ç³»åˆ—SQLè¯­å¥ï¼Œä¹‹åé‡æ–°æ‰§è¡Œä»¥äº§ç”Ÿå¤‡ä»½çš„åº“ã€è¡¨åŠæ•°æ®ã€‚
ä¹Ÿå¯äº§ç”ŸCSVã€XMLç­‰æ ¼å¼çš„æ•°æ®ã€‚é€‚ç”¨äºå„ç±»å¼•æ“çš„è¡¨ã€‚&lt;/p&gt;

&lt;h2 id=&quot;mysqldump&quot;&gt;mysqldumpå¤‡ä»½é€»è¾‘æ€æƒ³&lt;/h2&gt;

&lt;p&gt;æˆ‘ä»¬æŸ¥çœ‹é€šè¿‡mysqldumpå‘½ä»¤é»˜è®¤å¤‡ä»½å¯¼å‡ºçš„æ–‡ä»¶å¤§æ¦‚å†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;åˆ›å»ºæ•°æ®åº“åˆ¤æ–­è¯­å¥-åˆ é™¤è¡¨-åˆ›å»ºè¡¨-é”è¡¨-ç¦ç”¨ç´¢å¼•-æ’å…¥æ•°æ®-å¯ç”¨ç´¢å¼•-è§£é”è¡¨&lt;/p&gt;

&lt;p&gt;å¤‡ä»½æ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;â€“ MySQL dump 10.13  Distrib 5.7.13, for osx10.11 (x86_64)&lt;/p&gt;

  &lt;p&gt;â€“&lt;/p&gt;

  &lt;p&gt;â€“ Host: localhost    Database: keystone&lt;/p&gt;

  &lt;hr /&gt;

  &lt;p&gt;â€“ Server version	5.7.13&lt;/p&gt;

  &lt;p&gt;/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;&lt;/p&gt;

  &lt;p&gt;/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;&lt;/p&gt;

  &lt;p&gt;/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;&lt;/p&gt;

  &lt;p&gt;/*!40101 SET NAMES utf8 */;&lt;/p&gt;

  &lt;p&gt;/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;&lt;/p&gt;

  &lt;p&gt;/*!40103 SET TIME_ZONE=â€™+00:00â€™ */;&lt;/p&gt;

  &lt;p&gt;/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;&lt;/p&gt;

  &lt;p&gt;/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;&lt;/p&gt;

  &lt;p&gt;/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE=â€™NO_AUTO_VALUE_ON_ZEROâ€™ */;&lt;/p&gt;

  &lt;p&gt;/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;&lt;/p&gt;

  &lt;p&gt;â€“&lt;/p&gt;

  &lt;p&gt;â€“ Table structure for table &lt;code class=&quot;highlighter-rouge&quot;&gt;domain&lt;/code&gt;&lt;/p&gt;

  &lt;p&gt;â€“&lt;/p&gt;

  &lt;p&gt;DROP TABLE IF EXISTS &lt;code class=&quot;highlighter-rouge&quot;&gt;domain&lt;/code&gt;;&lt;/p&gt;

  &lt;p&gt;/*!40101 SET @saved_cs_client     = @@character_set_client */;&lt;/p&gt;

  &lt;p&gt;/*!40101 SET character_set_client = utf8 */;&lt;/p&gt;

  &lt;p&gt;CREATE TABLE &lt;code class=&quot;highlighter-rouge&quot;&gt;domain&lt;/code&gt; (&lt;/p&gt;

  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;id&lt;/code&gt; varchar(64) NOT NULL,&lt;/p&gt;

  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;name&lt;/code&gt; varchar(64) NOT NULL,&lt;/p&gt;

  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;enabled&lt;/code&gt; tinyint(1) NOT NULL,&lt;/p&gt;

  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;extra&lt;/code&gt; text,&lt;/p&gt;

  &lt;p&gt;PRIMARY KEY (&lt;code class=&quot;highlighter-rouge&quot;&gt;id&lt;/code&gt;),&lt;/p&gt;

  &lt;p&gt;UNIQUE KEY &lt;code class=&quot;highlighter-rouge&quot;&gt;ixu_domain_name&lt;/code&gt; (&lt;code class=&quot;highlighter-rouge&quot;&gt;name&lt;/code&gt;)&lt;/p&gt;

  &lt;p&gt;) ENGINE=InnoDB DEFAULT CHARSET=utf8;&lt;/p&gt;

  &lt;p&gt;/*!40101 SET character_set_client = @saved_cs_client */;&lt;/p&gt;

  &lt;p&gt;/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;&lt;/p&gt;

  &lt;p&gt;/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;&lt;/p&gt;

  &lt;p&gt;/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;&lt;/p&gt;

  &lt;p&gt;/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;&lt;/p&gt;

  &lt;p&gt;/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;&lt;/p&gt;

  &lt;p&gt;/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;&lt;/p&gt;

  &lt;p&gt;/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;&lt;/p&gt;

  &lt;p&gt;/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;&lt;/p&gt;

  &lt;p&gt;â€“ Dump completed on 2016-11-15 22:36:38&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¤‡ä»½çš„é€»è¾‘å°±æ˜¯å°†è¡¨ç»“æ„ä»¥åŠæ•°æ®å˜æˆsqlè¯­å¥ä¿å­˜ä¸‹æ¥ï¼Œæ¢å¤çš„æ—¶å€™åªéœ€è¦åœ¨mysqlä¸­æ‰§è¡Œè¿™äº›å‘½ä»¤å°±è¡Œäº†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;section-1&quot;&gt;å‘½ä»¤ä½¿ç”¨&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;å¤‡ä»½ä¸€ä¸ªæˆ–è€…å¤šä¸ªè¡¨&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mysqldump -u ç”¨æˆ·å -p (å¯†ç ) [option] db_name [table_1 table_2] &amp;gt; xxx.sql
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;å¤‡ä»½å¤šä¸ªæ•°æ®åº“&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mysqldump -u ç”¨æˆ·å -p (å¯†ç ) [option] --databases db_name_1 db_name_2 ... &amp;gt; xxx.sql
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;å¤‡ä»½æ‰€æœ‰æ•°æ®åº“&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mysqldump -u ç”¨æˆ·å -p (å¯†ç ) [option] --all-databases &amp;gt; xxx.sql
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;åªå¤‡ä»½è¡¨ç»“æ„&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mysqldump --no-data/-d --databases mdb_name_1 db_name_2 ...&amp;gt; xxx.sql
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;æ¡ä»¶å¯¼å‡ºæ•°æ®&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mysqldump -u ç”¨æˆ·å -p db_name a1 --where=&#39;id=&quot;xxxxxxxxxxx&quot;&#39; &amp;gt; xxx.sql
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è·¨æœåŠ¡å™¨å¯¼å‡ºå¯¼å…¥æ•°æ®&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mysqldump --host=host_id_1 -u ç”¨æˆ·å -p (å¯†ç ) -C db_name_1 | mysql --host=host_id_2 -u ç”¨æˆ·å -p (å¯†ç ) db_name_2

è¯¥å‘½ä»¤çš„æ„æ€æ˜¯å°†ä¸»æœº1çš„æ•°æ®åº“1å€’å…¥åˆ°ä¸»æœº2çš„æ•°æ®åº“2ä¸­, å…¶ä¸­-Cå‚æ•°æ˜¯å¯ç”¨å‹ç¼©ä¼ é€’
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä»¥ä¸Šå‘½ä»¤æ˜¯æˆ‘ä»¬å¤‡ä»½æ•°æ®åº“ä¸­ç»å¸¸ç”¨åˆ°å¯¹ï¼Œè¿˜æœ‰å¥½å¤šå‘½ä»¤æˆ‘ä»¬ä¸ä¸€ä¸€åˆ—å‡ºï¼Œæƒ³äº†è§£è·Ÿå¤šå…³äºè¯¥å‘½ä»¤çš„ä½¿ç”¨æˆ‘ä»¬å¯ä»¥
ä½¿ç”¨å¸®åŠ©å‘½ä»¤æŸ¥çœ‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;man mysqldump or mysqldump --help
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;section-2&quot;&gt;å¦‚ä½•æ¢å¤ï¼Ÿ&lt;/h2&gt;

&lt;p&gt;å½“æˆ‘ä»¬é€šè¿‡mysqldumpå‘½ä»¤å¤‡ä»½äº†æ•°æ®åº“åæˆ‘ä»¬éœ€è¦å¦‚ä½•æ¢å¤ï¼Ÿæ ¹æ®å¦‚ä¸Šå‘½ä»¤çš„è¯­æ³•ï¼Œç†æ‰€å½“ç„¶çš„æˆ‘ä»¥ä¸ºæ¢å¤å°±æ˜¯é€†å‘ï¼Œå°†ç¬¦å·â€™&amp;gt;â€™ æ¢æˆâ€™&amp;lt;â€™å°±okäº†ã€‚
ç„¶è€Œç»“æœå°±æ˜¯æˆ‘æƒ³å¤šäº†ğŸ˜¢ğŸ˜¢ï¼Œæ‰€ä»¥æˆ‘ä¸Šé¢ç‰¹åˆ«å…ˆè®²äº†mysqldumpå¤‡ä»½é€»è¾‘ï¼Œå½“ä½ æ˜ç™½å¤‡ä»½é€»è¾‘åæ˜æ˜¾å¦‚æœä½¿ç”¨mysqldumpå‘½ä»¤æ˜¯æ— æ³•è¿›è¡Œæ•°æ®æ¢å¤çš„ã€‚
æ­£ç¡®æ¢å¤åº”è¯¥æ˜¯å¦‚ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mysql -u ç”¨æˆ·å -p (å¯†ç ) &amp;lt; xxx.sql
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;section-3&quot;&gt;é™„ä»¶ï¼šï¼ˆä¸­æ–‡å¸®åŠ©æ–‡æ¡£ï¼‰&lt;/h2&gt;

&lt;p&gt;â€“all-databases , -A&lt;/p&gt;

&lt;p&gt;å¯¼å‡ºå…¨éƒ¨æ•°æ®åº“ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases&lt;/p&gt;

&lt;p&gt;â€“all-tablespaces , -Y&lt;/p&gt;

&lt;p&gt;å¯¼å‡ºå…¨éƒ¨è¡¨ç©ºé—´ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“all-tablespaces&lt;/p&gt;

&lt;p&gt;â€“no-tablespaces , -y&lt;/p&gt;

&lt;p&gt;ä¸å¯¼å‡ºä»»ä½•è¡¨ç©ºé—´ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“no-tablespaces&lt;/p&gt;

&lt;p&gt;â€“add-drop-database&lt;/p&gt;

&lt;p&gt;æ¯ä¸ªæ•°æ®åº“åˆ›å»ºä¹‹å‰æ·»åŠ dropæ•°æ®åº“è¯­å¥ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“add-drop-database&lt;/p&gt;

&lt;p&gt;â€“add-drop-table&lt;/p&gt;

&lt;p&gt;æ¯ä¸ªæ•°æ®è¡¨åˆ›å»ºä¹‹å‰æ·»åŠ dropæ•°æ®è¡¨è¯­å¥ã€‚(é»˜è®¤ä¸ºæ‰“å¼€çŠ¶æ€ï¼Œä½¿ç”¨â€“skip-add-drop-tableå–æ¶ˆé€‰é¡¹)&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases (é»˜è®¤æ·»åŠ dropè¯­å¥)&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“skip-add-drop-table (å–æ¶ˆdropè¯­å¥)&lt;/p&gt;

&lt;p&gt;â€“add-locks&lt;/p&gt;

&lt;p&gt;åœ¨æ¯ä¸ªè¡¨å¯¼å‡ºä¹‹å‰å¢åŠ LOCK TABLESå¹¶ä¸”ä¹‹åUNLOCK TABLEã€‚(é»˜è®¤ä¸ºæ‰“å¼€çŠ¶æ€ï¼Œä½¿ç”¨â€“skip-add-lockså–æ¶ˆé€‰é¡¹)&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases (é»˜è®¤æ·»åŠ LOCKè¯­å¥)&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“skip-add-locks (å–æ¶ˆLOCKè¯­å¥)&lt;/p&gt;

&lt;p&gt;â€“allow-keywords&lt;/p&gt;

&lt;p&gt;å…è®¸åˆ›å»ºæ˜¯å…³é”®è¯çš„åˆ—åå­—ã€‚è¿™ç”±è¡¨åå‰ç¼€äºæ¯ä¸ªåˆ—ååšåˆ°ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“allow-keywords&lt;/p&gt;

&lt;p&gt;â€“apply-slave-statements&lt;/p&gt;

&lt;p&gt;åœ¨â€™CHANGE MASTERâ€™å‰æ·»åŠ â€™STOP SLAVEâ€™ï¼Œå¹¶ä¸”åœ¨å¯¼å‡ºçš„æœ€åæ·»åŠ â€™START SLAVEâ€™ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“apply-slave-statements&lt;/p&gt;

&lt;p&gt;â€“character-sets-dir&lt;/p&gt;

&lt;p&gt;å­—ç¬¦é›†æ–‡ä»¶çš„ç›®å½•&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“character-sets-dir=/usr/local/mysql/share/mysql/charsets&lt;/p&gt;

&lt;p&gt;â€“comments&lt;/p&gt;

&lt;p&gt;é™„åŠ æ³¨é‡Šä¿¡æ¯ã€‚é»˜è®¤ä¸ºæ‰“å¼€ï¼Œå¯ä»¥ç”¨â€“skip-commentså–æ¶ˆ&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases (é»˜è®¤è®°å½•æ³¨é‡Š)&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“skip-comments (å–æ¶ˆæ³¨é‡Š)&lt;/p&gt;

&lt;p&gt;â€“compatible&lt;/p&gt;

&lt;p&gt;å¯¼å‡ºçš„æ•°æ®å°†å’Œå…¶å®ƒæ•°æ®åº“æˆ–æ—§ç‰ˆæœ¬çš„MySQL ç›¸å…¼å®¹ã€‚å€¼å¯ä»¥ä¸ºansiã€mysql323ã€mysql40ã€postgresqlã€oracleã€mssqlã€db2ã€maxdbã€no_key_optionsã€no_tables_optionsã€no_field_optionsç­‰ï¼Œ&lt;/p&gt;

&lt;p&gt;è¦ä½¿ç”¨å‡ ä¸ªå€¼ï¼Œç”¨é€—å·å°†å®ƒä»¬éš”å¼€ã€‚å®ƒå¹¶ä¸ä¿è¯èƒ½å®Œå…¨å…¼å®¹ï¼Œè€Œæ˜¯å°½é‡å…¼å®¹ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“compatible=ansi&lt;/p&gt;

&lt;p&gt;â€“compact&lt;/p&gt;

&lt;p&gt;å¯¼å‡ºæ›´å°‘çš„è¾“å‡ºä¿¡æ¯(ç”¨äºè°ƒè¯•)ã€‚å»æ‰æ³¨é‡Šå’Œå¤´å°¾ç­‰ç»“æ„ã€‚å¯ä»¥ä½¿ç”¨é€‰é¡¹ï¼šâ€“skip-add-drop-table â€“skip-add-locks â€“skip-comments â€“skip-disable-keys&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“compact&lt;/p&gt;

&lt;p&gt;â€“complete-insert, -c&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨å®Œæ•´çš„insertè¯­å¥(åŒ…å«åˆ—åç§°)ã€‚è¿™ä¹ˆåšèƒ½æé«˜æ’å…¥æ•ˆç‡ï¼Œä½†æ˜¯å¯èƒ½ä¼šå—åˆ°max_allowed_packetå‚æ•°çš„å½±å“è€Œå¯¼è‡´æ’å…¥å¤±è´¥ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“complete-insert&lt;/p&gt;

&lt;p&gt;â€“compress, -C&lt;/p&gt;

&lt;p&gt;åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å¯ç”¨å‹ç¼©ä¼ é€’æ‰€æœ‰ä¿¡æ¯&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“compress&lt;/p&gt;

&lt;p&gt;â€“create-options, -a&lt;/p&gt;

&lt;p&gt;åœ¨CREATE TABLEè¯­å¥ä¸­åŒ…æ‹¬æ‰€æœ‰MySQLç‰¹æ€§é€‰é¡¹ã€‚(é»˜è®¤ä¸ºæ‰“å¼€çŠ¶æ€)&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases&lt;/p&gt;

&lt;p&gt;â€“databases, -B&lt;/p&gt;

&lt;p&gt;å¯¼å‡ºå‡ ä¸ªæ•°æ®åº“ã€‚å‚æ•°åé¢æ‰€æœ‰åå­—å‚é‡éƒ½è¢«çœ‹ä½œæ•°æ®åº“åã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“databases test mysql&lt;/p&gt;

&lt;p&gt;â€“debug&lt;/p&gt;

&lt;p&gt;è¾“å‡ºdebugä¿¡æ¯ï¼Œç”¨äºè°ƒè¯•ã€‚é»˜è®¤å€¼ä¸ºï¼šd:t,/tmp/mysqldump.trace&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“debug&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“debug=â€ d:t,/tmp/debug.traceâ€&lt;/p&gt;

&lt;p&gt;â€“debug-check&lt;/p&gt;

&lt;p&gt;æ£€æŸ¥å†…å­˜å’Œæ‰“å¼€æ–‡ä»¶ä½¿ç”¨è¯´æ˜å¹¶é€€å‡ºã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“debug-check&lt;/p&gt;

&lt;p&gt;â€“debug-info&lt;/p&gt;

&lt;p&gt;è¾“å‡ºè°ƒè¯•ä¿¡æ¯å¹¶é€€å‡º&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“debug-info&lt;/p&gt;

&lt;p&gt;â€“default-character-set&lt;/p&gt;

&lt;p&gt;è®¾ç½®é»˜è®¤å­—ç¬¦é›†ï¼Œé»˜è®¤å€¼ä¸ºutf8&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“default-character-set=utf8&lt;/p&gt;

&lt;p&gt;â€“delayed-insert&lt;/p&gt;

&lt;p&gt;é‡‡ç”¨å»¶æ—¶æ’å…¥æ–¹å¼ï¼ˆINSERT DELAYEDï¼‰å¯¼å‡ºæ•°æ®&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“delayed-insert&lt;/p&gt;

&lt;p&gt;â€“delete-master-logs&lt;/p&gt;

&lt;p&gt;masterå¤‡ä»½ååˆ é™¤æ—¥å¿—. è¿™ä¸ªå‚æ•°å°†è‡ªåŠ¨æ¿€æ´»â€“master-dataã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“delete-master-logs&lt;/p&gt;

&lt;p&gt;â€“disable-keys&lt;/p&gt;

&lt;p&gt;å¯¹äºæ¯ä¸ªè¡¨ï¼Œç”¨/&lt;em&gt;!40000 ALTER TABLE tbl_name DISABLE KEYS */;å’Œ/&lt;/em&gt;!40000 ALTER TABLE tbl_name ENABLE KEYS */;è¯­å¥å¼•ç”¨INSERTè¯­å¥ã€‚è¿™æ ·å¯ä»¥æ›´å¿«åœ°å¯¼å…¥dumpå‡ºæ¥çš„æ–‡ä»¶ï¼Œå› ä¸ºå®ƒæ˜¯åœ¨æ’å…¥æ‰€æœ‰è¡Œååˆ›å»ºç´¢å¼•çš„ã€‚è¯¥é€‰é¡¹åªé€‚åˆMyISAMè¡¨ï¼Œé»˜è®¤ä¸ºæ‰“å¼€çŠ¶æ€ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases&lt;/p&gt;

&lt;p&gt;â€“dump-slave&lt;/p&gt;

&lt;p&gt;è¯¥é€‰é¡¹å°†ä¸»çš„binlogä½ç½®å’Œæ–‡ä»¶åè¿½åŠ åˆ°å¯¼å‡ºæ•°æ®çš„æ–‡ä»¶ä¸­(show slave status)ã€‚è®¾ç½®ä¸º1æ—¶ï¼Œå°†ä¼šä»¥CHANGE MASTERå‘½ä»¤è¾“å‡ºåˆ°æ•°æ®æ–‡ä»¶ï¼›è®¾ç½®ä¸º2æ—¶ï¼Œä¼šåœ¨changeå‰åŠ ä¸Šæ³¨é‡Šã€‚è¯¥é€‰é¡¹å°†ä¼šæ‰“å¼€â€“lock-all-tablesï¼Œé™¤éâ€“single-transactionè¢«æŒ‡å®šã€‚è¯¥é€‰é¡¹ä¼šè‡ªåŠ¨å…³é—­â€“lock-tablesé€‰é¡¹ã€‚é»˜è®¤å€¼ä¸º0ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“dump-slave=1&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“dump-slave=2 â€“master-data&lt;/p&gt;

&lt;p&gt;è¯¥é€‰é¡¹å°†å½“å‰æœåŠ¡å™¨çš„binlogçš„ä½ç½®å’Œæ–‡ä»¶åè¿½åŠ åˆ°è¾“å‡ºæ–‡ä»¶ä¸­(show master status)ã€‚å¦‚æœä¸º1ï¼Œå°†ä¼šè¾“å‡ºCHANGE MASTER å‘½ä»¤ï¼›å¦‚æœä¸º2ï¼Œè¾“å‡ºçš„CHANGE MASTERå‘½ä»¤å‰æ·»åŠ æ³¨é‡Šä¿¡æ¯ã€‚è¯¥é€‰é¡¹å°†æ‰“å¼€â€“lock-all-tables é€‰é¡¹ï¼Œé™¤éâ€“single-transactionä¹Ÿè¢«æŒ‡å®šï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå…¨å±€è¯»é”åœ¨å¼€å§‹å¯¼å‡ºæ—¶è·å¾—å¾ˆçŸ­çš„æ—¶é—´ï¼›å…¶ä»–å†…å®¹å‚è€ƒä¸‹é¢çš„â€“single-transactioné€‰é¡¹ï¼‰ã€‚è¯¥é€‰é¡¹è‡ªåŠ¨å…³é—­â€“lock-tablesé€‰é¡¹ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“master-data=1;&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“master-data=2; â€“events, -E&lt;/p&gt;

&lt;p&gt;å¯¼å‡ºäº‹ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“events&lt;/p&gt;

&lt;p&gt;â€“extended-insert, -e&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨å…·æœ‰å¤šä¸ªVALUESåˆ—çš„INSERTè¯­æ³•ã€‚è¿™æ ·ä½¿å¯¼å‡ºæ–‡ä»¶æ›´å°ï¼Œå¹¶åŠ é€Ÿå¯¼å…¥æ—¶çš„é€Ÿåº¦ã€‚é»˜è®¤ä¸ºæ‰“å¼€çŠ¶æ€ï¼Œä½¿ç”¨â€“skip-extended-insertå–æ¶ˆé€‰é¡¹ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databasesâ€“skip-extended-insert (å–æ¶ˆé€‰é¡¹)&lt;/p&gt;

&lt;p&gt;â€“fields-terminated-by&lt;/p&gt;

&lt;p&gt;å¯¼å‡ºæ–‡ä»¶ä¸­å¿½ç•¥ç»™å®šå­—æ®µã€‚ä¸â€“tabé€‰é¡¹ä¸€èµ·ä½¿ç”¨ï¼Œä¸èƒ½ç”¨äºâ€“databaseså’Œâ€“all-databasesé€‰é¡¹&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p test test â€“tab=â€/home/mysqlâ€ â€“fields-terminated-by=â€#â€&lt;/p&gt;

&lt;p&gt;â€“fields-enclosed-by&lt;/p&gt;

&lt;p&gt;è¾“å‡ºæ–‡ä»¶ä¸­çš„å„ä¸ªå­—æ®µç”¨ç»™å®šå­—ç¬¦åŒ…è£¹ã€‚ä¸â€“tabé€‰é¡¹ä¸€èµ·ä½¿ç”¨ï¼Œä¸èƒ½ç”¨äºâ€“databaseså’Œâ€“all-databasesé€‰é¡¹&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p test test â€“tab=â€/home/mysqlâ€ â€“fields-enclosed-by=â€#â€&lt;/p&gt;

&lt;p&gt;â€“fields-optionally-enclosed-by&lt;/p&gt;

&lt;p&gt;è¾“å‡ºæ–‡ä»¶ä¸­çš„å„ä¸ªå­—æ®µç”¨ç»™å®šå­—ç¬¦é€‰æ‹©æ€§åŒ…è£¹ã€‚ä¸â€“tabé€‰é¡¹ä¸€èµ·ä½¿ç”¨ï¼Œä¸èƒ½ç”¨äºâ€“databaseså’Œâ€“all-databasesé€‰é¡¹&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p test test â€“tab=â€/home/mysqlâ€ â€“fields-enclosed-by=â€#â€ â€“fields-optionally-enclosed-by =â€#â€&lt;/p&gt;

&lt;p&gt;â€“fields-escaped-by&lt;/p&gt;

&lt;p&gt;è¾“å‡ºæ–‡ä»¶ä¸­çš„å„ä¸ªå­—æ®µå¿½ç•¥ç»™å®šå­—ç¬¦ã€‚ä¸â€“tabé€‰é¡¹ä¸€èµ·ä½¿ç”¨ï¼Œä¸èƒ½ç”¨äºâ€“databaseså’Œâ€“all-databasesé€‰é¡¹&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p mysql user â€“tab=â€/home/mysqlâ€ â€“fields-escaped-by=â€#â€&lt;/p&gt;

&lt;p&gt;â€“flush-logs&lt;/p&gt;

&lt;p&gt;å¼€å§‹å¯¼å‡ºä¹‹å‰åˆ·æ–°æ—¥å¿—ã€‚&lt;/p&gt;

&lt;p&gt;è¯·æ³¨æ„ï¼šå‡å¦‚ä¸€æ¬¡å¯¼å‡ºå¤šä¸ªæ•°æ®åº“(ä½¿ç”¨é€‰é¡¹â€“databasesæˆ–è€…â€“all-databases)ï¼Œå°†ä¼šé€ä¸ªæ•°æ®åº“åˆ·æ–°æ—¥å¿—ã€‚é™¤ä½¿ç”¨â€“lock-all-tablesæˆ–è€…â€“master-dataå¤–ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ—¥å¿—å°†ä¼šè¢«åˆ·æ–°ä¸€æ¬¡ï¼Œç›¸åº”çš„æ‰€ä»¥è¡¨åŒæ—¶è¢«é”å®šã€‚å› æ­¤ï¼Œå¦‚æœæ‰“ç®—åŒæ—¶å¯¼å‡ºå’Œåˆ·æ–°æ—¥å¿—åº”è¯¥ä½¿ç”¨â€“lock-all-tables æˆ–è€…â€“master-data å’Œâ€“flush-logsã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“flush-logs&lt;/p&gt;

&lt;p&gt;â€“flush-privileges&lt;/p&gt;

&lt;p&gt;åœ¨å¯¼å‡ºmysqlæ•°æ®åº“ä¹‹åï¼Œå‘å‡ºä¸€æ¡FLUSH PRIVILEGES è¯­å¥ã€‚ä¸ºäº†æ­£ç¡®æ¢å¤ï¼Œè¯¥é€‰é¡¹åº”è¯¥ç”¨äºå¯¼å‡ºmysqlæ•°æ®åº“å’Œä¾èµ–mysqlæ•°æ®åº“æ•°æ®çš„ä»»ä½•æ—¶å€™ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“flush-privileges&lt;/p&gt;

&lt;p&gt;â€“force&lt;/p&gt;

&lt;p&gt;åœ¨å¯¼å‡ºè¿‡ç¨‹ä¸­å¿½ç•¥å‡ºç°çš„SQLé”™è¯¯ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“force&lt;/p&gt;

&lt;p&gt;â€“help&lt;/p&gt;

&lt;p&gt;æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯å¹¶é€€å‡ºã€‚&lt;/p&gt;

&lt;p&gt;mysqldump â€“help&lt;/p&gt;

&lt;p&gt;â€“hex-blob&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨åå…­è¿›åˆ¶æ ¼å¼å¯¼å‡ºäºŒè¿›åˆ¶å­—ç¬¦ä¸²å­—æ®µã€‚å¦‚æœæœ‰äºŒè¿›åˆ¶æ•°æ®å°±å¿…é¡»ä½¿ç”¨è¯¥é€‰é¡¹ã€‚å½±å“åˆ°çš„å­—æ®µç±»å‹æœ‰BINARYã€VARBINARYã€BLOBã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“all-databases â€“hex-blob&lt;/p&gt;

&lt;p&gt;â€“host, -h&lt;/p&gt;

&lt;p&gt;éœ€è¦å¯¼å‡ºçš„ä¸»æœºä¿¡æ¯&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases&lt;/p&gt;

&lt;p&gt;â€“ignore-table&lt;/p&gt;

&lt;p&gt;ä¸å¯¼å‡ºæŒ‡å®šè¡¨ã€‚æŒ‡å®šå¿½ç•¥å¤šä¸ªè¡¨æ—¶ï¼Œéœ€è¦é‡å¤å¤šæ¬¡ï¼Œæ¯æ¬¡ä¸€ä¸ªè¡¨ã€‚æ¯ä¸ªè¡¨å¿…é¡»åŒæ—¶æŒ‡å®šæ•°æ®åº“å’Œè¡¨åã€‚ä¾‹å¦‚ï¼šâ€“ignore-table=database.table1 â€“ignore-table=database.table2 â€¦â€¦&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“ignore-table=mysql.user&lt;/p&gt;

&lt;p&gt;â€“include-master-host-port&lt;/p&gt;

&lt;p&gt;åœ¨â€“dump-slaveäº§ç”Ÿçš„â€™CHANGE MASTER TO..â€™è¯­å¥ä¸­å¢åŠ â€™MASTER_HOST=&lt;host&gt;ï¼ŒMASTER_PORT=&lt;port&gt;&#39;&lt;/port&gt;&lt;/host&gt;&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“include-master-host-port&lt;/p&gt;

&lt;p&gt;â€“insert-ignore&lt;/p&gt;

&lt;p&gt;åœ¨æ’å…¥è¡Œæ—¶ä½¿ç”¨INSERT IGNOREè¯­å¥.&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“insert-ignore&lt;/p&gt;

&lt;p&gt;â€“lines-terminated-by&lt;/p&gt;

&lt;p&gt;è¾“å‡ºæ–‡ä»¶çš„æ¯è¡Œç”¨ç»™å®šå­—ç¬¦ä¸²åˆ’åˆ†ã€‚ä¸â€“tabé€‰é¡¹ä¸€èµ·ä½¿ç”¨ï¼Œä¸èƒ½ç”¨äºâ€“databaseså’Œâ€“all-databasesé€‰é¡¹ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost test test â€“tab=â€/tmp/mysqlâ€ â€“lines-terminated-by=â€##â€&lt;/p&gt;

&lt;p&gt;â€“lock-all-tables, -x&lt;/p&gt;

&lt;p&gt;æäº¤è¯·æ±‚é”å®šæ‰€æœ‰æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨ï¼Œä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚è¿™æ˜¯ä¸€ä¸ªå…¨å±€è¯»é”ï¼Œå¹¶ä¸”è‡ªåŠ¨å…³é—­â€“single-transaction å’Œâ€“lock-tables é€‰é¡¹ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“lock-all-tables&lt;/p&gt;

&lt;p&gt;â€“lock-tables, -l&lt;/p&gt;

&lt;p&gt;å¼€å§‹å¯¼å‡ºå‰ï¼Œé”å®šæ‰€æœ‰è¡¨ã€‚ç”¨READ LOCALé”å®šè¡¨ä»¥å…è®¸MyISAMè¡¨å¹¶è¡Œæ’å…¥ã€‚å¯¹äºæ”¯æŒäº‹åŠ¡çš„è¡¨ä¾‹å¦‚InnoDBå’ŒBDBï¼Œâ€“single-transactionæ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒæ ¹æœ¬ä¸éœ€è¦é”å®šè¡¨ã€‚&lt;/p&gt;

&lt;p&gt;è¯·æ³¨æ„å½“å¯¼å‡ºå¤šä¸ªæ•°æ®åº“æ—¶ï¼Œâ€“lock-tablesåˆ†åˆ«ä¸ºæ¯ä¸ªæ•°æ®åº“é”å®šè¡¨ã€‚å› æ­¤ï¼Œè¯¥é€‰é¡¹ä¸èƒ½ä¿è¯å¯¼å‡ºæ–‡ä»¶ä¸­çš„è¡¨åœ¨æ•°æ®åº“ä¹‹é—´çš„é€»è¾‘ä¸€è‡´æ€§ã€‚ä¸åŒæ•°æ®åº“è¡¨çš„å¯¼å‡ºçŠ¶æ€å¯ä»¥å®Œå…¨ä¸åŒã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“lock-tables&lt;/p&gt;

&lt;p&gt;â€“log-error&lt;/p&gt;

&lt;p&gt;é™„åŠ è­¦å‘Šå’Œé”™è¯¯ä¿¡æ¯åˆ°ç»™å®šæ–‡ä»¶&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“log-error=/tmp/mysqldump_error_log.err&lt;/p&gt;

&lt;p&gt;â€“max_allowed_packet&lt;/p&gt;

&lt;p&gt;æœåŠ¡å™¨å‘é€å’Œæ¥å—çš„æœ€å¤§åŒ…é•¿åº¦ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“max_allowed_packet=10240&lt;/p&gt;

&lt;p&gt;â€“net_buffer_length&lt;/p&gt;

&lt;p&gt;TCP/IPå’Œsocketè¿æ¥çš„ç¼“å­˜å¤§å°ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“net_buffer_length=1024&lt;/p&gt;

&lt;p&gt;â€“no-autocommit&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨autocommit/commit è¯­å¥åŒ…è£¹è¡¨ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“no-autocommit&lt;/p&gt;

&lt;p&gt;â€“no-create-db, -n&lt;/p&gt;

&lt;p&gt;åªå¯¼å‡ºæ•°æ®ï¼Œè€Œä¸æ·»åŠ CREATE DATABASE è¯­å¥ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“no-create-db&lt;/p&gt;

&lt;p&gt;â€“no-create-info, -t&lt;/p&gt;

&lt;p&gt;åªå¯¼å‡ºæ•°æ®ï¼Œè€Œä¸æ·»åŠ CREATE TABLE è¯­å¥ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“no-create-info&lt;/p&gt;

&lt;p&gt;â€“no-data, -d&lt;/p&gt;

&lt;p&gt;ä¸å¯¼å‡ºä»»ä½•æ•°æ®ï¼Œåªå¯¼å‡ºæ•°æ®åº“è¡¨ç»“æ„ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“no-data&lt;/p&gt;

&lt;p&gt;â€“no-set-names, -N&lt;/p&gt;

&lt;p&gt;ç­‰åŒäºâ€“skip-set-charset&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“no-set-names&lt;/p&gt;

&lt;p&gt;â€“opt&lt;/p&gt;

&lt;p&gt;ç­‰åŒäºâ€“add-drop-table, â€“add-locks, â€“create-options, â€“quick, â€“extended-insert, â€“lock-tables, â€“set-charset, â€“disable-keys è¯¥é€‰é¡¹é»˜è®¤å¼€å¯, å¯ä»¥ç”¨â€“skip-optç¦ç”¨.&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“opt&lt;/p&gt;

&lt;p&gt;â€“order-by-primary&lt;/p&gt;

&lt;p&gt;å¦‚æœå­˜åœ¨ä¸»é”®ï¼Œæˆ–è€…ç¬¬ä¸€ä¸ªå”¯ä¸€é”®ï¼Œå¯¹æ¯ä¸ªè¡¨çš„è®°å½•è¿›è¡Œæ’åºã€‚åœ¨å¯¼å‡ºMyISAMè¡¨åˆ°InnoDBè¡¨æ—¶æœ‰æ•ˆï¼Œä½†ä¼šä½¿å¾—å¯¼å‡ºå·¥ä½œèŠ±è´¹å¾ˆé•¿æ—¶é—´ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“order-by-primary&lt;/p&gt;

&lt;p&gt;â€“password, -p&lt;/p&gt;

&lt;p&gt;è¿æ¥æ•°æ®åº“å¯†ç &lt;/p&gt;

&lt;p&gt;â€“pipe(windowsç³»ç»Ÿå¯ç”¨)&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨å‘½åç®¡é“è¿æ¥mysql&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“pipe&lt;/p&gt;

&lt;p&gt;â€“port, -P&lt;/p&gt;

&lt;p&gt;è¿æ¥æ•°æ®åº“ç«¯å£å·&lt;/p&gt;

&lt;p&gt;â€“protocol&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨çš„è¿æ¥åè®®ï¼ŒåŒ…æ‹¬ï¼štcp, socket, pipe, memory.&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“protocol=tcp&lt;/p&gt;

&lt;p&gt;â€“quick, -q&lt;/p&gt;

&lt;p&gt;ä¸ç¼“å†²æŸ¥è¯¢ï¼Œç›´æ¥å¯¼å‡ºåˆ°æ ‡å‡†è¾“å‡ºã€‚é»˜è®¤ä¸ºæ‰“å¼€çŠ¶æ€ï¼Œä½¿ç”¨â€“skip-quickå–æ¶ˆè¯¥é€‰é¡¹ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“skip-quick&lt;/p&gt;

&lt;p&gt;â€“quote-names,-Q&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨ï¼ˆ`ï¼‰å¼•èµ·è¡¨å’Œåˆ—åã€‚é»˜è®¤ä¸ºæ‰“å¼€çŠ¶æ€ï¼Œä½¿ç”¨â€“skip-quote-nameså–æ¶ˆè¯¥é€‰é¡¹ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“skip-quote-names&lt;/p&gt;

&lt;p&gt;â€“replace&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨REPLACE INTO å–ä»£INSERT INTO.&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“replace&lt;/p&gt;

&lt;p&gt;â€“result-file, -r&lt;/p&gt;

&lt;p&gt;ç›´æ¥è¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶ä¸­ã€‚è¯¥é€‰é¡¹åº”è¯¥ç”¨åœ¨ä½¿ç”¨å›è½¦æ¢è¡Œå¯¹ï¼ˆ\r\nï¼‰æ¢è¡Œçš„ç³»ç»Ÿä¸Šï¼ˆä¾‹å¦‚ï¼šDOSï¼ŒWindowsï¼‰ã€‚è¯¥é€‰é¡¹ç¡®ä¿åªæœ‰ä¸€è¡Œè¢«ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“result-file=/tmp/mysqldump_result_file.txt&lt;/p&gt;

&lt;p&gt;â€“routines, -R&lt;/p&gt;

&lt;p&gt;å¯¼å‡ºå­˜å‚¨è¿‡ç¨‹ä»¥åŠè‡ªå®šä¹‰å‡½æ•°ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“routines&lt;/p&gt;

&lt;p&gt;â€“set-charset&lt;/p&gt;

&lt;p&gt;æ·»åŠ â€™SET NAMES default_character_setâ€™åˆ°è¾“å‡ºæ–‡ä»¶ã€‚é»˜è®¤ä¸ºæ‰“å¼€çŠ¶æ€ï¼Œä½¿ç”¨â€“skip-set-charsetå…³é—­é€‰é¡¹ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“skip-set-charset&lt;/p&gt;

&lt;p&gt;â€“single-transaction&lt;/p&gt;

&lt;p&gt;è¯¥é€‰é¡¹åœ¨å¯¼å‡ºæ•°æ®ä¹‹å‰æäº¤ä¸€ä¸ªBEGIN SQLè¯­å¥ï¼ŒBEGIN ä¸ä¼šé˜»å¡ä»»ä½•åº”ç”¨ç¨‹åºä¸”èƒ½ä¿è¯å¯¼å‡ºæ—¶æ•°æ®åº“çš„ä¸€è‡´æ€§çŠ¶æ€ã€‚å®ƒåªé€‚ç”¨äºå¤šç‰ˆæœ¬å­˜å‚¨å¼•æ“ï¼Œä»…InnoDBã€‚æœ¬é€‰é¡¹å’Œâ€“lock-tables é€‰é¡¹æ˜¯äº’æ–¥çš„ï¼Œå› ä¸ºLOCK TABLES ä¼šä½¿ä»»ä½•æŒ‚èµ·çš„äº‹åŠ¡éšå«æäº¤ã€‚è¦æƒ³å¯¼å‡ºå¤§è¡¨çš„è¯ï¼Œåº”ç»“åˆä½¿ç”¨â€“quick é€‰é¡¹ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“single-transaction&lt;/p&gt;

&lt;p&gt;â€“dump-date&lt;/p&gt;

&lt;p&gt;å°†å¯¼å‡ºæ—¶é—´æ·»åŠ åˆ°è¾“å‡ºæ–‡ä»¶ä¸­ã€‚é»˜è®¤ä¸ºæ‰“å¼€çŠ¶æ€ï¼Œä½¿ç”¨â€“skip-dump-dateå…³é—­é€‰é¡¹ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“skip-dump-date&lt;/p&gt;

&lt;p&gt;â€“skip-opt&lt;/p&gt;

&lt;p&gt;ç¦ç”¨â€“opté€‰é¡¹.&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“skip-opt&lt;/p&gt;

&lt;p&gt;â€“socket,-S&lt;/p&gt;

&lt;p&gt;æŒ‡å®šè¿æ¥mysqlçš„socketæ–‡ä»¶ä½ç½®ï¼Œé»˜è®¤è·¯å¾„/tmp/mysql.sock&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“socket=/tmp/mysqld.sock&lt;/p&gt;

&lt;p&gt;â€“tab,-T&lt;/p&gt;

&lt;p&gt;ä¸ºæ¯ä¸ªè¡¨åœ¨ç»™å®šè·¯å¾„åˆ›å»ºtabåˆ†å‰²çš„æ–‡æœ¬æ–‡ä»¶ã€‚æ³¨æ„ï¼šä»…ä»…ç”¨äºmysqldumpå’ŒmysqldæœåŠ¡å™¨è¿è¡Œåœ¨ç›¸åŒæœºå™¨ä¸Šã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost test test â€“tab=â€/home/mysqlâ€&lt;/p&gt;

&lt;p&gt;â€“tables&lt;/p&gt;

&lt;p&gt;è¦†ç›–â€“databases (-B)å‚æ•°ï¼ŒæŒ‡å®šéœ€è¦å¯¼å‡ºçš„è¡¨åã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“databases test â€“tables test&lt;/p&gt;

&lt;p&gt;â€“triggers&lt;/p&gt;

&lt;p&gt;å¯¼å‡ºè§¦å‘å™¨ã€‚è¯¥é€‰é¡¹é»˜è®¤å¯ç”¨ï¼Œç”¨â€“skip-triggersç¦ç”¨å®ƒã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“triggers&lt;/p&gt;

&lt;p&gt;â€“tz-utc&lt;/p&gt;

&lt;p&gt;åœ¨å¯¼å‡ºé¡¶éƒ¨è®¾ç½®æ—¶åŒºTIME_ZONE=â€™+00:00â€™ ï¼Œä»¥ä¿è¯åœ¨ä¸åŒæ—¶åŒºå¯¼å‡ºçš„TIMESTAMP æ•°æ®æˆ–è€…æ•°æ®è¢«ç§»åŠ¨å…¶ä»–æ—¶åŒºæ—¶çš„æ­£ç¡®æ€§ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“tz-utc&lt;/p&gt;

&lt;p&gt;â€“user, -u&lt;/p&gt;

&lt;p&gt;æŒ‡å®šè¿æ¥çš„ç”¨æˆ·åã€‚&lt;/p&gt;

&lt;p&gt;â€“verbose, â€“v&lt;/p&gt;

&lt;p&gt;è¾“å‡ºå¤šç§å¹³å°ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;p&gt;â€“version, -V&lt;/p&gt;

&lt;p&gt;è¾“å‡ºmysqldumpç‰ˆæœ¬ä¿¡æ¯å¹¶é€€å‡º&lt;/p&gt;

&lt;p&gt;â€“where, -w&lt;/p&gt;

&lt;p&gt;åªè½¬å‚¨ç»™å®šçš„WHEREæ¡ä»¶é€‰æ‹©çš„è®°å½•ã€‚è¯·æ³¨æ„å¦‚æœæ¡ä»¶åŒ…å«å‘½ä»¤è§£é‡Šç¬¦ä¸“ç”¨ç©ºæ ¼æˆ–å­—ç¬¦ï¼Œä¸€å®šè¦å°†æ¡ä»¶å¼•ç”¨èµ·æ¥ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“where=â€ user=â€™rootâ€™â€&lt;/p&gt;

&lt;p&gt;â€“xml, -X&lt;/p&gt;

&lt;p&gt;å¯¼å‡ºXMLæ ¼å¼.&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“xml&lt;/p&gt;

&lt;p&gt;â€“plugin_dir&lt;/p&gt;

&lt;p&gt;å®¢æˆ·ç«¯æ’ä»¶çš„ç›®å½•ï¼Œç”¨äºå…¼å®¹ä¸åŒçš„æ’ä»¶ç‰ˆæœ¬ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“plugin_dir=â€/usr/local/lib/pluginâ€&lt;/p&gt;

&lt;p&gt;â€“default_auth&lt;/p&gt;

&lt;p&gt;å®¢æˆ·ç«¯æ’ä»¶é»˜è®¤ä½¿ç”¨æƒé™ã€‚&lt;/p&gt;

&lt;p&gt;mysqldump -uroot -p â€“host=localhost â€“all-databases â€“default-auth=â€/u&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;å‚è€ƒæ–‡æ¡£ï¼š
&lt;a href=&quot;http://dev.mysql.com/doc/refman/5.6/en/mysqldump.html#option_mysqldump_protocol&quot;&gt;http://dev.mysql.com/doc/refman/5.6/en/mysqldump.html#option_mysqldump_protocol&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Tue, 15 Nov 2016 17:00:13 +0800</pubDate>
        <link>http://www.pisces.ml/articles/openstack/mysql/20161115</link>
        <guid isPermaLink="true">http://www.pisces.ml/articles/openstack/mysql/20161115</guid>
        
        
        <category>openstack</category>
        
      </item>
    
      <item>
        <title>Vimå¿«æ·é”®æ•´ç†</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;Vimæ˜¯Mac OSå’ŒLinuxé‡Œå†…ç½®çš„ä¸€æ¬¾å¼ºå¤§çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œèƒ½å¤Ÿå’ŒShellæ— ç¼äº¤äº’ã€‚åŒæ—¶ä¹Ÿæ˜¯SSHè¿œç¨‹ç™»å½•VPSæ—¶ç¼–è¾‘æ–‡ä»¶çš„å”¯ä¸€é€‰æ‹©ã€‚å› æ­¤æŒæ¡Vimå¯¹äºåšæœåŠ¡å™¨è¿ç»´å’ŒWebåç«¯å¼€å‘çš„é‡è¦æ€§ä¸è¨€è€Œå–»ã€‚
æœ¬æ–‡å¯¹Vimçš„å¿«æ·é”®æ“ä½œè¿›è¡Œäº†ç®€å•æ•´ç†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Vimå¸¸è§æœ‰ä¸¤ç§æ¨¡å¼ä¸€ç§æ˜¯Insertæ¨¡å¼ï¼Œè¯¥æ¨¡å¼ä¸‹å¯ä»¥åƒå…¶å®ƒæ–‡æœ¬ç¼–è¾‘å™¨ä¸€æ ·æ­£å¸¸è¾“å…¥å­—ç¬¦ï¼›å¦ä¸€ç§æ˜¯Normalæ¨¡å¼ï¼Œè¯¥æ¨¡å¼ä¸‹Vimç›‘å¬ç”¨æˆ·çš„æŒ‰é”®å¯ä»¥å¯¹æ–‡æœ¬è¿›è¡Œå¿«é€Ÿä¿®æ”¹ã€‚&lt;/p&gt;

&lt;p&gt;æƒ³è¦ä»Insertæ¨¡å¼åˆ‡æ¢åˆ°Normalæ¨¡å¼åªéœ€æŒ‰ä¸‹ESCé”®å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;æƒ³è¦ä»Normalæ¨¡å¼åˆ‡æ¢åˆ°Insertæ¨¡å¼ï¼Œæœ‰å¾ˆå¤šæ–¹æ³•ã€‚
æœ€ç›´æ¥çš„æ˜¯æŒ‰ä¸‹Ié”®ï¼Œæ•ˆæœæ˜¯ï¼šåœ¨å½“å‰å…‰æ ‡å¤„æ’å…¥æ–‡æœ¬ã€‚
å¦‚æœæŒ‰ä¸‹Aé”®ï¼Œæ•ˆæœæ˜¯ï¼šåœ¨ä¸‹ä¸€å…‰æ ‡å¤„è¿½åŠ æ–‡æœ¬ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹å‡æ˜¯åœ¨Normalæ¨¡å¼ä¸‹çš„éƒ¨åˆ† å¿«æ·é”®è¯´æ˜ï¼š&lt;/p&gt;

&lt;h2 id=&quot;section&quot;&gt;å…‰æ ‡çš„å¿«é€Ÿç§»åŠ¨&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;h,j,k,lï¼šå·¦ï¼Œä¸‹ï¼Œä¸Šï¼Œå³&lt;/li&gt;
  &lt;li&gt;wï¼šå…‰æ ‡ç§»åŠ¨è‡³ä¸‹ä¸€å•è¯é¦–ä½&lt;/li&gt;
  &lt;li&gt;bï¼šå…‰æ ‡ç§»åŠ¨è‡³å½“å‰å•è¯é¦–ä½ï¼Œå¦‚æœå…‰æ ‡å·²ç»åœ¨å½“å‰å•è¯é¦–ä½ï¼Œå°±ç§»åŠ¨åˆ°å‰ä¸€å•è¯é¦–ä½&lt;/li&gt;
  &lt;li&gt;eï¼šå…‰æ ‡ç§»åŠ¨è‡³å½“å‰å•è¯æœ«ä½&lt;/li&gt;
  &lt;li&gt;ggï¼šå…‰æ ‡ç§»åŠ¨è‡³æ–‡æœ¬é¦–è¡Œ&lt;/li&gt;
  &lt;li&gt;Shift+gï¼šå…‰æ ‡ç§»åŠ¨è‡³æ–‡æœ¬å°¾è¡Œ&lt;/li&gt;
  &lt;li&gt;27+Shift+gï¼šå…‰æ ‡ç§»åŠ¨è‡³æ–‡æœ¬ç¬¬27è¡Œ&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-1&quot;&gt;å…‰æ ‡è·³è½¬&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;%: å¯ä»¥åŒ¹é…{},â€â€,(),[]ä¹‹é—´è·³è½¬ã€‚&lt;/li&gt;
  &lt;li&gt;Hã€Mã€Lï¼šç›´æ¥è·³è½¬åˆ°å½“å‰å±å¹•çš„é¡¶éƒ¨ã€ä¸­éƒ¨ã€åº•éƒ¨ã€‚&lt;/li&gt;
  &lt;li&gt;#Hï¼šè·³è½¬åˆ°å½“å‰å±çš„ç¬¬#è¡Œã€‚&lt;/li&gt;
  &lt;li&gt;#Lï¼šè·³è½¬åˆ°å½“å‰å±çš„å€’æ•°ç¬¬#è¡Œã€‚&lt;/li&gt;
  &lt;li&gt;zt: å½“å‰ç¼–è¾‘è¡Œç½®ä¸ºå±é¡¶ã€‚&lt;/li&gt;
  &lt;li&gt;zz: å½“å‰ç¼–è¾‘è¡Œç½®ä¸ºå±ä¸­ã€‚&lt;/li&gt;
  &lt;li&gt;zb: å½“å‰ç¼–è¾‘è¡Œç½®ä¸ºå±åº•ã€‚&lt;/li&gt;
  &lt;li&gt;Gï¼šç›´æ¥è·³è½¬åˆ°æ–‡ä»¶çš„åº•éƒ¨ã€‚&lt;/li&gt;
  &lt;li&gt;gg: è·³è½¬åˆ°æ–‡ä»¶é¦–ã€‚&lt;/li&gt;
  &lt;li&gt;():è·³è½¬åˆ°å½“å‰çš„è¡Œé¦–ã€è¡Œå°¾ã€‚&lt;/li&gt;
  &lt;li&gt;{}ï¼šå‘ä¸Šã€å‘ä¸‹è·³è½¬åˆ°æœ€è¿‘çš„ç©ºè¡Œã€‚&lt;/li&gt;
  &lt;li&gt;[{ï¼šè·³è½¬åˆ°ç›®å‰åŒºå—å¼€å¤´ã€‚&lt;/li&gt;
  &lt;li&gt;]}ï¼šè·³è½¬åˆ°ç›®å‰åŒºå—ç»“å°¾ã€‚&lt;/li&gt;
  &lt;li&gt;0: è·³è½¬åˆ°è¡Œé¦–ã€‚&lt;/li&gt;
  &lt;li&gt;$: è·³è½¬åˆ°è¡Œå°¾ã€‚&lt;/li&gt;
  &lt;li&gt;2$: è·³è½¬åˆ°ä¸‹ä¸€è¡Œçš„è¡Œå°¾ã€‚&lt;/li&gt;
  &lt;li&gt;#G: 15G,è·³è½¬åˆ°15è¡Œã€‚&lt;/li&gt;
  &lt;li&gt;:#ï¼šè·³è½¬åˆ°#è¡Œã€‚&lt;/li&gt;
  &lt;li&gt;fâ€™nâ€™ï¼šè·³è½¬åˆ°ä¸‹ä¸€ä¸ªâ€nâ€å­—æ¯åã€‚&lt;/li&gt;
  &lt;li&gt;ctrl+b: å‘åç¿»ä¸€é¡µã€‚&lt;/li&gt;
  &lt;li&gt;ctrl+fï¼šå‘å‰ç¿»ä¸€é¡µã€‚&lt;/li&gt;
  &lt;li&gt;ctrl+u: å‘åç¿»åŠé¡µã€‚&lt;/li&gt;
  &lt;li&gt;ctrl+d: å‘å‰ç¿»åŠé¡µã€‚&lt;/li&gt;
  &lt;li&gt;ctry+e: ä¸‹æ»šä¸€è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-2&quot;&gt;é€‰æ‹©&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;V: é€‰æ‹©ä¸€è¡Œã€‚&lt;/li&gt;
  &lt;li&gt;^v: çŸ©å½¢é€‰æ‹©ã€‚&lt;/li&gt;
  &lt;li&gt;v3w: é€‰æ‹©ä¸‰ä¸ªå­—ç¬¦&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-3&quot;&gt;æ’å…¥è¡Œ&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;i: å…‰æ ‡å‰æ’å…¥ã€‚&lt;/li&gt;
  &lt;li&gt;I: åœ¨å½“å‰è¡Œé¦–æ’å…¥ã€‚&lt;/li&gt;
  &lt;li&gt;a: å…‰æ ‡åæ’å…¥ã€‚&lt;/li&gt;
  &lt;li&gt;A: å½“å‰è¡Œå°¾æ’å…¥ã€‚&lt;/li&gt;
  &lt;li&gt;O: åœ¨å½“å‰è¡Œä¹‹å‰æ’å…¥æ–°è¡Œã€‚&lt;/li&gt;
  &lt;li&gt;o: åœ¨å½“å‰è¡Œä¹‹åæ’å…¥æ–°è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-4&quot;&gt;ä¿®æ”¹&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;r: æ›¿æ¢å…‰æ ‡æ‰€åœ¨å¤„çš„å­—ç¬¦ã€‚&lt;/li&gt;
  &lt;li&gt;Rï¼šæ›¿æ¢å…‰æ ‡æ‰€åˆ°ä¹‹å¤„çš„å­—ç¬¦ã€‚&lt;/li&gt;
  &lt;li&gt;cw: æ›´æ”¹å…‰æ ‡æ‰€åœ¨å¤„çš„å­—åˆ°å­—å°¾å¤„ã€‚&lt;/li&gt;
  &lt;li&gt;c#w: c3w ä¿®æ”¹3ä¸ªå­—ç¬¦ã€‚&lt;/li&gt;
  &lt;li&gt;Cï¼šä¿®æ”¹åˆ°è¡Œå°¾ã€‚&lt;/li&gt;
  &lt;li&gt;ciâ€™ï¼šä¿®æ”¹é…å¯¹æ ‡ç‚¹ç¬¦å·ä¸­çš„æ–‡æœ¬å†…å®¹ã€‚&lt;/li&gt;
  &lt;li&gt;diâ€™ï¼šåˆ é™¤é…å¯¹æ ‡ç‚¹ç¬¦å·ä¸­çš„æ–‡æœ¬å†…å®¹ã€‚&lt;/li&gt;
  &lt;li&gt;yiâ€™ï¼šå¤åˆ¶é…å¯¹æ ‡ç‚¹ç¬¦å·ä¸­çš„æ–‡æœ¬å†…å®¹ã€‚&lt;/li&gt;
  &lt;li&gt;viâ€™ï¼šé€‰ä¸­é…å¯¹æ ‡ç‚¹ç¬¦å·ä¸­çš„æ–‡æœ¬å†…å®¹ã€‚&lt;/li&gt;
  &lt;li&gt;sï¼šæ›¿æ¢å½“å‰ä¸€ä¸ªå…‰æ ‡æ‰€å¤„å­—ç¬¦ã€‚&lt;/li&gt;
  &lt;li&gt;#Sï¼šåˆ é™¤ # è¡Œï¼Œå¹¶ä»¥æ–°æ–‡æœ¬ä»£æ›¿ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-5&quot;&gt;åˆ é™¤ä¸è¿˜åŸ&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;uï¼šè¿˜åŸä¸Šä¸€ä¸ªæ“ä½œï¼ˆä¸é™äºåˆ é™¤ï¼‰&lt;/li&gt;
  &lt;li&gt;Dï¼šåˆ é™¤åˆ°è¡Œå°¾ã€‚&lt;/li&gt;
  &lt;li&gt;X: æ¯æŒ‰ä¸€æ¬¡ï¼Œåˆ é™¤å…‰æ ‡æ‰€åœ¨ä½ç½®çš„å‰é¢ä¸€ä¸ªå­—ç¬¦ã€‚&lt;/li&gt;
  &lt;li&gt;x: æ¯æŒ‰ä¸€æ¬¡ï¼Œåˆ é™¤å…‰æ ‡æ‰€åœ¨ä½ç½®çš„åé¢ä¸€ä¸ªå­—ç¬¦ã€‚&lt;/li&gt;
  &lt;li&gt;#x: åˆ é™¤å…‰æ ‡æ‰€åœ¨ä½ç½®åé¢6ä¸ªå­—ç¬¦ã€‚&lt;/li&gt;
  &lt;li&gt;d^: åˆ è‡³è¡Œé¦–ã€‚&lt;/li&gt;
  &lt;li&gt;d$: åˆ è‡³è¡Œå°¾ã€‚&lt;/li&gt;
  &lt;li&gt;dd:(å‰ªåˆ‡)åˆ é™¤å…‰æ ‡æ‰€åœ¨è¡Œã€‚&lt;/li&gt;
  &lt;li&gt;deï¼šåˆ é™¤å…‰æ ‡åçš„å•è¯å†…å®¹ï¼ŒåŒæ—¶è¢«åˆ é™¤å†…å®¹å­˜äºå‰ªè´´æ¿ä¸Š&lt;/li&gt;
  &lt;li&gt;dw: åˆ é™¤ä¸€ä¸ªå•è¯/å…‰æ ‡ä¹‹åçš„å•è¯å‰©ä½™éƒ¨åˆ†ã€‚&lt;/li&gt;
  &lt;li&gt;d4w: åˆ é™¤4ä¸ªwordã€‚&lt;/li&gt;
  &lt;li&gt;#dd: ä»å…‰æ ‡æ‰€åœ¨è¡Œå¼€å§‹åˆ é™¤#è¡Œã€‚&lt;/li&gt;
  &lt;li&gt;daB: åˆ é™¤{}åŠå…¶å†…çš„å†…å®¹ã€‚&lt;/li&gt;
  &lt;li&gt;diB: åˆ é™¤{}ä¸­çš„å†…å®¹ã€‚&lt;/li&gt;
  &lt;li&gt;n1,n2 dï¼šå°†n1,n2è¡Œä¹‹é—´çš„å†…å®¹åˆ é™¤ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-6&quot;&gt;å‰ªåˆ‡ã€å¤åˆ¶ä¸ç²˜è´´&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;é€‰å®šæ–‡æœ¬å—ï¼šä½¿ç”¨vè¿›å…¥å¯è§†æ¨¡å¼ï¼›ç§»åŠ¨å…‰æ ‡é”®é€‰å®šå†…å®¹&lt;/li&gt;
  &lt;li&gt;yï¼šå¤åˆ¶é€‰å®šå—&lt;/li&gt;
  &lt;li&gt;yyï¼šå¤åˆ¶å…‰æ ‡æ‰€åœ¨æ•´è¡Œ&lt;/li&gt;
  &lt;li&gt;dï¼šå‰ªåˆ‡é€‰å®šå—&lt;/li&gt;
  &lt;li&gt;ddï¼šå‰ªåˆ‡å…‰æ ‡æ‰€åœ¨æ•´è¡Œ&lt;/li&gt;
  &lt;li&gt;pï¼šç²˜è´´æ–‡æœ¬&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-7&quot;&gt;å¤§å°å†™è½¬æ¢&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;gUU: å°†å½“å‰è¡Œçš„å­—æ¯æ”¹ä¸ºå¤§å†™ã€‚&lt;/li&gt;
  &lt;li&gt;guu: å°†å½“å‰è¡Œçš„å­—æ¯æ”¹ä¸ºå°å†™ã€‚&lt;/li&gt;
  &lt;li&gt;gUw: å°†å½“å‰å…‰æ ‡ä¸‹çš„å•è¯æ”¹ä¸ºå¤§å†™ã€‚&lt;/li&gt;
  &lt;li&gt;guw: å°†å½“å‰å…‰æ ‡ä¸‹çš„å•è¯æ”¹ä¸ºå°å†™ã€‚&lt;/li&gt;
  &lt;li&gt;ggguG: æ•´ç¯‡å¤§å†™&lt;/li&gt;
  &lt;li&gt;gg: å…‰æ ‡åˆ°æ–‡ä»¶ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚&lt;/li&gt;
  &lt;li&gt;gu: æŠŠé€‰æ‹©èŒƒå›´å…¨éƒ¨å°å†™ã€‚&lt;/li&gt;
  &lt;li&gt;G: åˆ°æ–‡ä»¶ç»“æŸã€‚&lt;/li&gt;
  &lt;li&gt;gggUG: æ•´ç¯‡å°å†™ï¼š&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-8&quot;&gt;æŸ¥æ‰¾ä¸æ›¿æ¢&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;f+oï¼šåœ¨å½“å‰è¡Œçš„å…‰æ ‡ä¹‹åæŸ¥æ‰¾å­—æ¯o&lt;/li&gt;
  &lt;li&gt;F+bï¼šåœ¨å½“å‰è¡Œçš„å…‰æ ‡ä¹‹å‰æŸ¥æ‰¾å­—æ¯b&lt;/li&gt;
  &lt;li&gt;:/wordï¼šå…¨æ–‡æŸ¥æ‰¾wordã€‚ æŒ‰ä¸‹:å®é™…ä¸Šæ˜¯è¿›å…¥äº†Vimçš„å‘½ä»¤æ¨¡å¼ã€‚æŸ¥æ‰¾æ“ä½œæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ã€‚&lt;/li&gt;
  &lt;li&gt;r+pï¼šå°†å…‰æ ‡ä¹‹åçš„å­—ç¬¦æ›¿æ¢ä¸ºå­—æ¯p&lt;/li&gt;
  &lt;li&gt;:s/word/replaceï¼šå…‰æ ‡æ‰€åœ¨è¡Œçš„ç¬¬ä¸€ä¸ªwordæ›¿æ¢ä¸ºreplaceã€‚&lt;/li&gt;
  &lt;li&gt;:%s/from/to/ï¼šå…¨æ–‡æŸ¥æ‰¾fromå¹¶æ›¿æ¢ä¸ºtoã€‚&lt;/li&gt;
  &lt;li&gt;:1,50s/from/to/ï¼šåœ¨ç¬¬1è¡Œå’Œç¬¬50è¡Œä¹‹é—´ï¼ˆå«ï¼‰è¿›è¡Œæœç´¢å’Œæ›¿æ¢ã€‚&lt;/li&gt;
  &lt;li&gt;:45s/from/to/è¡¨ç¤ºä»…ä»…åœ¨ç¬¬45è¡Œè¿›è¡Œæœç´¢å’Œæ›¿æ¢ã€‚è€Œ1,$è¡Œå·èŒƒå›´å’Œ%æ˜¯ç­‰ä»·çš„ã€‚&lt;/li&gt;
  &lt;li&gt;:%s/from/to/gï¼šå…¨æ–‡æŸ¥æ‰¾fromå¹¶æ›¿æ¢ä¸ºto,åŒ…å«é€‰é¡¹gçš„æ›¿æ¢èŒƒå›´æ›´å¹¿ã€‚&lt;/li&gt;
  &lt;li&gt;:%s/from/to/gcï¼šå…¨æ–‡æŸ¥æ‰¾fromå¹¶æ›¿æ¢ä¸ºtoï¼Œæ›¿æ¢æ—¶è¯¢é—®ã€‚å¯ä»¥é€‰æ‹©y/n/a/q/l/^E/^Yï¼šyè¡¨ç¤ºåŒæ„å½“å‰æ›¿æ¢ï¼›nè¡¨ç¤ºä¸åŒæ„å½“å‰æ›¿æ¢ï¼›aè¡¨ç¤ºæ›¿æ¢å½“å‰å’Œåé¢çš„å¹¶ä¸”ä¸å†ç¡®è®¤ï¼›qè¡¨ç¤ºç«‹å³ç»“æŸæ›¿æ¢æ“ä½œï¼›lè¡¨ç¤ºæŠŠå½“å‰çš„æ›¿æ¢åç»“æŸæ›¿æ¢æ“ä½œï¼›^Eå‘ä¸Šæ»šå±^Yå‘ä¸‹æ»šå±ï¼Œç”¨æ¥å¸®åŠ©æŸ¥çœ‹å‰åå†…å®¹ä»¥å†³å®šè¿›è¡Œæ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;shell&quot;&gt;æ‰§è¡ŒShellå‘½ä»¤&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;:!lså°±ç­‰åŒäºåœ¨Shellç»ˆç«¯æ‰§è¡Œlså‘½ä»¤ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“åˆ†å‰²çº¿â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;åŸæ–‡å‚è€ƒé“¾æ¥ï¼šhttp://www.jianshu.com/p/c23136f68d2f&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Fri, 14 Oct 2016 17:00:13 +0800</pubDate>
        <link>http://www.pisces.ml/articles/linux/20161014</link>
        <guid isPermaLink="true">http://www.pisces.ml/articles/linux/20161014</guid>
        
        
        <category>linux</category>
        
      </item>
    
      <item>
        <title>jekyll å¸¸ç”¨å˜é‡</title>
        <description>&lt;h2 id=&quot;section&quot;&gt;å¸¸ç”¨å˜é‡&lt;/h2&gt;
&lt;p&gt;Jekyll ä¼šéå†ä½ çš„ç½‘ç«™æœå¯»è¦å¤„ç†çš„æ–‡ä»¶ã€‚ä»»ä½•æœ‰ YAML å¤´ä¿¡æ¯çš„æ–‡ä»¶éƒ½æ˜¯è¦å¤„ç†çš„å¯¹è±¡ã€‚å¯¹äºæ¯ä¸€ä¸ªè¿™æ ·çš„æ–‡ä»¶ï¼ŒJekyll éƒ½ä¼šé€šè¿‡ Liquid æ¨¡æ¿å·¥å…·æ¥ç”Ÿæˆä¸€ç³»åˆ—çš„æ•°æ®ã€‚ä¸‹é¢å°±æ˜¯è¿™äº›å¯ç”¨æ•°æ®å˜é‡çš„å‚è€ƒå’Œæ–‡æ¡£ã€‚&lt;/p&gt;

&lt;h3 id=&quot;global&quot;&gt;å…¨å±€(Global)å˜é‡&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å˜é‡&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;è¯´æ˜&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;site&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;æ¥è‡ª_config.ymlæ–‡ä»¶ï¼Œå…¨ç«™èŒƒå›´çš„ä¿¡æ¯+é…ç½®ã€‚è¯¦ç»†çš„ä¿¡æ¯è¯·å‚è€ƒä¸‹æ–‡&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;page&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;é¡µé¢ä¸“å±çš„ä¿¡æ¯ + YAML å¤´æ–‡ä»¶ä¿¡æ¯ã€‚é€šè¿‡ YAML å¤´æ–‡ä»¶è‡ªå®šä¹‰çš„ä¿¡æ¯éƒ½å¯ä»¥åœ¨è¿™é‡Œè¢«è·å–ã€‚è¯¦æƒ…è¯·å‚è€ƒä¸‹æ–‡ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;content&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;è¢« layout åŒ…è£¹çš„é‚£äº› Post æˆ–è€… Page æ¸²æŸ“ç”Ÿæˆçš„å†…å®¹ã€‚ä½†æ˜¯åˆæ²¡å®šä¹‰åœ¨ Post æˆ–è€… Page æ–‡ä»¶ä¸­çš„å˜é‡ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;paginator&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;æ¯å½“ paginate é…ç½®é€‰é¡¹è¢«è®¾ç½®äº†çš„æ—¶å€™ï¼Œè¿™ä¸ªå˜é‡å°±å¯ç”¨äº†ã€‚è¯¦æƒ…è¯·çœ‹&lt;a href=&quot;http://jekyllcn.com/docs/pagination/&quot;&gt;åˆ†é¡µ&lt;/a&gt;ã€‚&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;site&quot;&gt;å…¨ç«™(site)å˜é‡&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å˜é‡&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;è¯´æ˜&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;site.time&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;å½“å‰æ—¶é—´ï¼ˆè¿è¡Œjekyllè¿™ä¸ªå‘½ä»¤çš„æ—¶é—´ç‚¹ï¼‰ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;site.pages&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;æ‰€æœ‰ Pages çš„æ¸…å•ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;site.posts&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;ä¸€ä¸ªæŒ‰ç…§æ—¶é—´å€’åºçš„æ‰€æœ‰ Posts çš„æ¸…å•ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;site.related_posts&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;å¦‚æœå½“å‰è¢«å¤„ç†çš„é¡µé¢æ˜¯ä¸€ä¸ª Postï¼Œè¿™ä¸ªå˜é‡å°±ä¼šåŒ…å«æœ€å¤š10ä¸ªç›¸å…³çš„ Postã€‚é»˜è®¤çš„æƒ…å†µä¸‹ï¼Œç›¸å…³æ€§æ˜¯ä½è´¨é‡çš„ï¼Œä½†æ˜¯èƒ½è¢«å¾ˆå¿«çš„è®¡ç®—å‡ºæ¥ã€‚å¦‚æœä½ éœ€è¦é«˜ç›¸å…³æ€§ï¼Œå°±è¦æ¶ˆè€—æ›´å¤šçš„æ—¶é—´æ¥è®¡ç®—ã€‚ç”¨ jekyll è¿™ä¸ªå‘½ä»¤å¸¦ä¸Š â€“lsi (latent semantic indexing) é€‰é¡¹æ¥è®¡ç®—é«˜ç›¸å…³æ€§çš„ Postã€‚æ³¨æ„ï¼ŒGitHub åœ¨ç”Ÿæˆç«™ç‚¹æ—¶ä¸æ”¯æŒã€€lsiã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;site.static_files&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;é™æ€æ–‡ä»¶çš„åˆ—è¡¨ (æ­¤å¤–çš„æ–‡ä»¶ä¸ä¼šè¢« Jekyll å’Œ Liquid å¤„ç†ã€‚)ã€‚æ¯ä¸ªæ–‡ä»¶éƒ½å…·æœ‰ä¸‰ä¸ªå±æ€§ï¼š pathï¼Œ modified_time ä»¥åŠ extnameã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;site.html_pages&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;â€˜site.pagesâ€™çš„å­é›†ï¼Œå­˜å‚¨ä»¥â€˜.htmlâ€™ç»“å°¾çš„éƒ¨åˆ†ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;site.html_files&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;â€˜site.static_filesâ€™çš„å­é›†ï¼Œå­˜å‚¨ä»¥â€˜.htmlâ€™ç»“å°¾çš„éƒ¨åˆ†ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;site.collections&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;ä¸€ä¸ªæ‰€æœ‰é›†åˆï¼ˆcollectionï¼‰çš„æ¸…å•ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;site.data&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;ä¸€ä¸ªå­˜å‚¨äº† _data ç›®å½•ä¸‹çš„YAMLæ–‡ä»¶æ•°æ®çš„æ¸…å•ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;site.documents&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;æ¯ä¸€ä¸ªé›†åˆï¼ˆcollectionï¼‰ä¸­çš„å…¨éƒ¨æ–‡ä»¶çš„æ¸…å•ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;site.categories.CATEGORY&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;æ‰€æœ‰çš„åœ¨ CATEGORY ç±»åˆ«ä¸‹çš„å¸–å­ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;site.tags.TAG&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;æ‰€æœ‰çš„åœ¨ TAG æ ‡ç­¾ä¸‹çš„å¸–å­ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;site.[CONFIGURATION_DATA]&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;æ‰€æœ‰çš„é€šè¿‡å‘½ä»¤è¡Œå’Œ _config.yml è®¾ç½®çš„å˜é‡éƒ½ä¼šå­˜åˆ°è¿™ä¸ª site é‡Œé¢ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœä½ è®¾ç½®äº† url: http://mysite.com åœ¨ä½ çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆåœ¨ä½ çš„ Posts å’Œ Pages é‡Œé¢ï¼Œè¿™ä¸ªå˜é‡å°±è¢«å­˜å‚¨åœ¨äº† site.urlã€‚Jekyll å¹¶ä¸ä¼šæŠŠå¯¹ _config.yml åšçš„æ”¹åŠ¨æ”¾åˆ° watch æ¨¡å¼ï¼Œæ‰€ä»¥ä½ æ¯æ¬¡éƒ½è¦é‡å¯ Jekyll æ¥è®©ä½ çš„å˜åŠ¨ç”Ÿæ•ˆã€‚&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;page&quot;&gt;é¡µé¢(page)å˜é‡&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å˜é‡&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;è¯´æ˜&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;page.content&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;é¡µé¢å†…å®¹çš„æºç ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;page.title&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;é¡µé¢çš„æ ‡é¢˜ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;page.excerpt&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;é¡µé¢æ‘˜è¦çš„æºç ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;page.url&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;å¸–å­ä»¥æ–œçº¿æ‰“å¤´çš„ç›¸å¯¹è·¯å¾„ï¼Œä¾‹å­ï¼š /2008/12/14/my-post.htmlã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;page.date&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;å¸–å­çš„æ—¥æœŸã€‚æ—¥æœŸçš„å¯ä»¥åœ¨å¸–å­çš„å¤´ä¿¡æ¯ä¸­é€šè¿‡ç”¨ä»¥ä¸‹æ ¼å¼ YYYY-MM-DD HH:MM:SS (å‡è®¾æ˜¯ UTC), æˆ–è€… YYYY-MM-DD HH:MM:SS +/-TTTT ( ç”¨äºå£°æ˜ä¸åŒäº UTC çš„æ—¶åŒºï¼Œ æ¯”å¦‚ 2008-12-14 10:30:00 +0900) æ¥æ˜¾ç¤ºå£°æ˜å…¶ä»– æ—¥æœŸ/æ—¶é—´ çš„æ–¹å¼è¢«æ”¹å†™ï¼Œ&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;page.id&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;å¸–å­çš„å”¯ä¸€æ ‡è¯†ç ï¼ˆåœ¨RSSæºé‡Œéå¸¸æœ‰ç”¨ï¼‰ï¼Œæ¯”å¦‚ /2008/12/14/my-post&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;page.categories&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;iè¿™ä¸ªå¸–å­æ‰€å±çš„ Categoriesã€‚Categories æ˜¯ä»è¿™ä¸ªå¸–å­çš„ _posts ä»¥ä¸Š çš„ç›®å½•ç»“æ„ä¸­æå–çš„ã€‚ä¸¾ä¾‹æ¥è¯´, ä¸€ä¸ªåœ¨ /work/code/_posts/2008-12-24-closures.md ç›®å½•ä¸‹çš„ Postï¼Œè¿™ä¸ªå±æ€§å°±ä¼šè¢«è®¾ç½®æˆ [â€˜workâ€™, â€˜codeâ€™]ã€‚ä¸è¿‡ Categories ä¹Ÿèƒ½åœ¨ YAML å¤´æ–‡ä»¶ä¿¡æ¯ ä¸­è¢«è®¾ç½®ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;page.tags&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;iè¿™ä¸ª Post æ‰€å±çš„æ‰€æœ‰ tagsã€‚Tags æ˜¯åœ¨YAML å¤´æ–‡ä»¶ä¿¡æ¯ä¸­è¢«å®šä¹‰çš„ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;page.path&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Post æˆ–è€… Page çš„æºæ–‡ä»¶åœ°å€ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œä¸€ä¸ªé¡µé¢åœ¨ GitHub ä¸Šçš„æºæ–‡ä»¶åœ°å€ã€‚ è¿™å¯ä»¥åœ¨ YAML å¤´æ–‡ä»¶ä¿¡æ¯ ä¸­è¢«æ”¹å†™ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;page.next&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;å½“å‰æ–‡ç« åœ¨site.postsä¸­çš„ä½ç½®å¯¹åº”çš„ä¸‹ä¸€ç¯‡æ–‡ç« ã€‚è‹¥å½“å‰æ–‡ç« ä¸ºæœ€åä¸€ç¯‡æ–‡ç« ï¼Œè¿”å›nil&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;page.previous&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;å½“å‰æ–‡ç« åœ¨site.postsä¸­çš„ä½ç½®å¯¹åº”çš„ä¸Šä¸€ç¯‡æ–‡ç« ã€‚è‹¥å½“å‰æ–‡ç« ä¸ºç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œè¿”å›nil&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;æç¤ºâ„¢: ä½¿ç”¨è‡ªå®šä¹‰çš„å¤´ä¿¡æ¯&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;blockquote&gt;
    &lt;p&gt;ä»»ä½•ä½ è‡ªå®šä¹‰çš„å¤´æ–‡ä»¶ä¿¡æ¯éƒ½ä¼šåœ¨ page ä¸­å¯ç”¨ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœä½ åœ¨ä¸€ä¸ª Page çš„å¤´æ–‡ä»¶ä¸­è®¾ç½®äº† custom_css: trueï¼Œ è¿™ä¸ªå˜é‡å°±å¯ä»¥è¿™æ ·è¢«å–åˆ° page.custom_cssã€‚&lt;/p&gt;
  &lt;/blockquote&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;paginator&quot;&gt;åˆ†é¡µå™¨(Paginator)&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å˜é‡&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;è¯´æ˜&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;paginator.per_page&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;æ¯ä¸€é¡µ Posts çš„æ•°é‡ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;paginator.posts&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;è¿™ä¸€é¡µå¯ç”¨çš„ Postsã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;paginator.total_posts&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Posts çš„æ€»æ•°ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;paginator.total_pages&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Pages çš„æ€»æ•°ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;paginator.page&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;å½“å‰é¡µå·ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;paginator.previous_page&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;å‰ä¸€é¡µçš„é¡µå·ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;paginator.previous_page_path&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;å‰ä¸€é¡µçš„åœ°å€ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;paginator.next_page&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;ä¸‹ä¸€é¡µçš„é¡µå·ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;paginator.next_page_path&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;ä¸‹ä¸€é¡µçš„åœ°å€ã€‚&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;åˆ†é¡µå™¨å˜é‡çš„å¯ç”¨æ€§&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;blockquote&gt;
    &lt;p&gt;è¿™äº›å˜é‡ä»…åœ¨é¦–é¡µæ–‡ä»¶ä¸­å¯ç”¨ï¼Œä¸è¿‡ä»–ä»¬ä¹Ÿä¼šå­˜åœ¨äºå­ç›®å½•ä¸­ï¼Œå°±åƒ /blog/index.htmlã€‚&lt;/p&gt;
  &lt;/blockquote&gt;
&lt;/blockquote&gt;

&lt;p&gt;æœ¬æ–‡è½¬è‡ªï¼š&lt;a href=&quot;http://jekyllcn.com/docs/variables/&quot;&gt;http://jekyllcn.com/docs/variables/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ä»…ä¾›å­¦ä¹ ä½¿ç”¨.&lt;/p&gt;
</description>
        <pubDate>Fri, 22 Jul 2016 17:00:13 +0800</pubDate>
        <link>http://www.pisces.ml/articles/jekyll/2016722</link>
        <guid isPermaLink="true">http://www.pisces.ml/articles/jekyll/2016722</guid>
        
        
        <category>jekyll</category>
        
      </item>
    
      <item>
        <title>Keystoneå¯¹æ¥ActiveDirectory</title>
        <description>&lt;p&gt;keystoneå¯¹æ¥AD(ActiveDirectory)ï¼Œæœ¬æ–‡è®°å½•å¯¹æ¥é…ç½®è¿‡ç¨‹&lt;/p&gt;

&lt;h2 id=&quot;section&quot;&gt;ç®€ä»‹&lt;/h2&gt;

&lt;p&gt;ADï¼ŒæŒ‡Windowsçš„Active Directoryï¼Œæ˜¯LDAPåè®®çš„å¦ä¸€ä¸ªå®ç°ï¼ŒKeystoneä¹Ÿå¯ä»¥å’ŒADè¿›è¡Œå¯¹æ¥ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ad&quot;&gt;ADæœåŠ¡å®‰è£…é…ç½®&lt;/h2&gt;

&lt;p&gt;é¦–å…ˆæˆ‘ä»¬éœ€è¦é…ç½®å¥½ADï¼Œä»¥ç”¨æ¥å¯¹æ¥keystoneã€‚&lt;/p&gt;

&lt;h3 id=&quot;ad-1&quot;&gt;å®‰è£…ADæœåŠ¡&lt;/h3&gt;

&lt;p&gt;åœ¨window server ä¸­å®‰è£…ADæœåŠ¡ï¼Œè¯¥è¿‡ç¨‹å¯å‚è€ƒï¼ˆhttps://support.rackspace.com/how-to/installing-active-directory-on-windows-server-2012/ï¼‰è¿™é‡Œä¸å†ç»†è¯´ã€‚&lt;/p&gt;

&lt;h3 id=&quot;section-1&quot;&gt;æ•°æ®åˆå§‹åŒ–&lt;/h3&gt;

&lt;p&gt;ADæœåŠ¡å®‰è£…å®Œæˆåä¼šç”ŸæˆUsersçš„å®¹å™¨ï¼Œè¯¥å®¹å™¨å­˜æ”¾ç”¨æˆ·çš„åˆ†ç»„ä»¥åŠç”¨æˆ·ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://www.pisces.ml/images/image2016-5-23-1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å½“ç„¶å¯¹äºkeystoneæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ç§æ¨¡å¼ï¼Œå°†ç”¨æˆ·å’Œåˆ†ç»„åŒæ—¶éƒ½æ”¾åœ¨å®¹å™¨Usersä¸­ï¼Œä½†æ˜¯è¿™æ ·åšä¼šæ˜¾çš„å¾ˆä¹±ã€‚ä¸€ç§åšæ³•æ˜¯æˆ‘ä»¬å¯ä»¥å•ç‹¬ç»™ç”¨æˆ·ç”Ÿæˆä¸€ä¸ªç±»ä¼¼çš„å®¹å™¨æ¥å­˜æ”¾æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ï¼Œä¹Ÿç»™åˆ†ç»„ç”Ÿæˆä¸€ä¸ªå®¹å™¨æ¥å­˜æ”¾æ‰€æœ‰åˆ†ç»„(å½“ç„¶ä¹Ÿå¯ä»¥æ ¹æ®å®¢æˆ·ç°åœ¨çš„è´¦æˆ·ä½“ç³»è¿›è¡Œè§„åˆ’ï¼Œè¿™é‡Œåªåšç¤ºä¾‹ç”¨)ï¼Œå¦‚ä¸‹æ­¥éª¤æ‰€ç¤ºåˆ†åˆ«å»ºç«‹ä¸¤ä¸ªå®¹å™¨æ¥å­˜æ”¾ç”¨æˆ·å’Œåˆ†ç»„ï¼š&lt;/p&gt;

&lt;p&gt;ç¬¬ä¸€æ­¥ï¼šåœ¨æ ¹ç›®å½•ustackä¸‹ç‚¹å‡»æ–°å»ºï¼Œå®¹å™¨ç±»å‹ä¸ºâ€˜ç»„ç»‡å•ä½â€™&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://www.pisces.ml/images/image2016-5-23-2.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç¬¬äºŒæ­¥ï¼šç”ŸæˆKeystone_Userså®¹å™¨&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://www.pisces.ml/images/image2016-5-23-3.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åŒæ ·çš„æ–¹å¼åˆ›å»ºå®¹å™¨Keystone_Groupsæ¥å­˜æ”¾åˆ†ç»„ï¼Œæ–°å»ºå®Œæˆåå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://www.pisces.ml/images/mage2016-5-23-4.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å®Œæˆä¹‹åæˆ‘ä»¬éœ€è¦åœ¨å®¹å™¨Keystone_Userså’ŒKeystone_Groupsä¸­åˆ†åˆ«åˆ›å»ºç”¨æˆ·å’Œåˆ†ç»„ï¼Œç¤ºä¾‹ï¼ˆåœ¨Keystone_Usersæ–°å»ºç”¨æˆ·ï¼‰ï¼š
è¿›å…¥å®¹å™¨Keystone_Usersï¼Œå³å‡»æ–°å»ºï¼ç”¨æˆ·ï¼Œå¡«ä¸Šå¿…è¦çš„ç”¨æˆ·ä¿¡æ¯ç¡®è®¤å³å¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://www.pisces.ml/images/image2016-5-23-5.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åŒæ ·çš„æ–¹å¼å¯ä»¥å»ºç«‹ç›¸åº”çš„åˆ†ç»„ï¼Œå¹¶å°†ç”¨æˆ·æ·»åŠ åˆ°è¯¥åˆ†ç»„ä¸­ã€‚&lt;/p&gt;

&lt;h2 id=&quot;keystone&quot;&gt;keystoneçš„å®‰è£…å’Œé…ç½®&lt;/h2&gt;

&lt;h3 id=&quot;keysotne&quot;&gt;keysotneå®‰è£…&lt;/h3&gt;

&lt;p&gt;keystoneå®‰è£…è¿‡ç¨‹ä¸»è¦æ˜¯æ ¹æ®ç¤¾åŒºæ–‡æ¡£è¿›è¡Œå®‰è£…éƒ¨ç½²å³å¯ï¼Œå‚è€ƒï¼š&lt;/p&gt;

&lt;p&gt;SUSE: &lt;a href=&quot;http://docs.openstack.org/mitaka/install-guide-obs/index.html&quot;&gt;http://docs.openstack.org/mitaka/install-guide-obs/index.html&lt;/a&gt; ä¸»è¦æ‰§è¡Œä»¥ä¸‹æ­¥éª¤æ¥å®‰è£…é…ç½®keystone&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://docs.openstack.org/mitaka/install-guide-obs/environment-packages.html&quot;&gt;æ·»åŠ è½¯ä»¶æºå¹¶å®‰è£…åŒ…python-openstackclient&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://docs.openstack.org/mitaka/install-guide-obs/environment-sql-database.html&quot;&gt;å®‰è£…æ•°æ®åº“&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://docs.openstack.org/mitaka/install-guide-obs/environment-memcached.html&quot;&gt;å®‰è£…memcacheæœåŠ¡å™¨&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://docs.openstack.org/mitaka/install-guide-obs/keystone.html&quot;&gt;å®‰è£…keystone&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Ubuntu:&lt;a href=&quot;http://docs.openstack.org/mitaka/install-guide-ubuntu/&quot;&gt;http://docs.openstack.org/mitaka/install-guide-ubuntu/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Red Hat Enterprise Linux 7 and CentOS7: &lt;a href=&quot;http://docs.openstack.org/mitaka/install-guide-rdo/&quot;&gt;http://docs.openstack.org/mitaka/install-guide-rdo/&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;keystonead&quot;&gt;keystoneå¯¹æ¥ADé…ç½®&lt;/h3&gt;

&lt;p&gt;ç¬¬ä¸€æ­¥ï¼šsource keystoneè¯ä¹¦æ–‡ä»¶openrc(v3ç‰ˆæœ¬)ï¼Œè¯¥æ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@ldap:~# cat openrc_v3
export OS_PROJECT_DOMAIN_NAME=default
export OS_USER_DOMAIN_NAME=default
export OS_PROJECT_NAME=admin
export OS_USERNAME=admin
export OS_PASSWORD=root
export OS_AUTH_URL=http://127.0.0.1:35357/v3
export OS_IDENTITY_API_VERSION=3
export OS_IMAGE_API_VERSION=2
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ç¬¬äºŒæ­¥ï¼šåœ¨è·¯å¾„â€™/etc/keystone/â€™ä¸‹åˆ›å»ºdomainsç›®å½•ï¼Œå¹¶ä¿®æ”¹ç”¨æˆ·æƒé™&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ï¼ƒã€€æ–°å»ºç›®å½•
mkdir /etc/keystone/domains/
ï¼ƒã€€ä¿®æ”¹æƒé™
chown keystone /etc/keystone/domains/
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ç¬¬ä¸‰æ­¥ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶keystone.confï¼Œåšå¦‚ä¸‹ä¿®æ”¹&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# æ–‡ä»¶ä½ç½®ã€€/etc/keystone
[identity]
domain_specific_drivers_enabled = true
domain_config_dir = /etc/keystone/domains
[assignment]
driver = keystone.assignment.backends.sql.Assignment
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ç¬¬å››æ­¥ï¼šæŸ¥çœ‹AD serverçš„NetBIOS name ä½œä¸ºAD DSçš„åŸŸ&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;PS C:\&amp;gt; Get-ADDomain | select NetBIOSName
NetBIOSName
-----------
USTACK
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ç”±ä¸Šæ‰€ç¤ºæˆ‘ä»¬å¯ä»¥çœ‹åˆ°NetBIOS name ä¸ºUSTACK&lt;/p&gt;

&lt;p&gt;ç¬¬äº”æ­¥ï¼šç”¨openstackå‘½ä»¤åˆ›å»ºAD ç”¨æˆ·åŸŸ&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨ä¸Šæ­¥éª¤å¾—åˆ°çš„NetBIOSNameä½œä¸ºkeystoneè´¦æˆ·ä¸­çš„åŸŸåã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;openstack domain create  USTACK
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ç¬¬äº”æ­¥ï¼šåœ¨/etc/keystone/domains/ä¸‹åˆ›å»ºæ–‡ä»¶keystone.USTACK.confï¼ˆæ³¨æ„è¯¥æ–‡ä»¶çš„å‘½åå¿…é¡»æ ¼å¼keystone.{NetBIOSName}.confï¼‰å¹¶åšå¦‚ä¸‹é…ç½®ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[ldap]
url = ldap://172.16.10.13
user = cn=chengkun,cn=Users,dc=ustack,dc=test
password = Ustack2016
suffix = dc=ustack,dc=test
user_tree_dn = cn=Users,dc=ustack,dc=test
# user_filter = (memberOf=cn=ustack_admin,OU=UserGroups,DC=ustack,DC=test)
user_objectclass = person
user_id_attribute = sAMAccountName
user_name_attribute = sAMAccountName
user_mail_attribute = mail
user_pass_attribute =
user_enabled_attribute = userAccountControl
user_enabled_mask = 2
user_enabled_default = 512
user_attribute_ignore = password,tenant_id,tenants
user_allow_create = false
user_allow_update = false
user_allow_delete = false
group_tree_dn = OU=UserGroups,DC=ustack,DC=test
# group_tree_dn = cn=Users,dc=ustack,dc=test
group_objectclass = group
group_id_attribute = cn
group_name_attribute = cn
group_allow_create = False
group_allow_update = False
group_allow_delete = False
[identity]
driver = keystone.identity.backends.ldap.Identity
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æ³¨æ„ä¸Šé¢é…ç½®çš„ç”¨æˆ·ä¿¡æ¯æ ¹æ®å®é™…ç”¨æˆ·ä¿¡æ¯å¡«å†™å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;ä¿®æ”¹è¯¥æ–‡ä»¶æƒé™ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;chown keystone /etc/keystone/domains/keystone.LAB.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ç¬¬å…­æ­¥ï¼šç»™ADè´¦æˆ·domainåˆ†é…æƒé™&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#æŸ¥çœ‹domain id
[root@localhost ~]# openstack domain show USTACK
+---------+----------------------------------+
| Field   | Value                            |
+---------+----------------------------------+
| enabled | True                             |
| id      | 1954d71a8445418482b4d3966e6a8cfe |
| name    | USTACK                           |
+---------+----------------------------------+
#æŸ¥è¯¢adminç”¨æˆ·id
[root@localhost ~]# openstack user list --domain default | grep admin
| 8ef5b603ae1344cea4fe060d198d42ad | admin |

#ç»™ç”¨æˆ·adminåœ¨domain USTACKä¸­æ·»åŠ adminçš„role
openstack role add --domain 1954d71a8445418482b4d3966e6a8cfe --user 8ef5b603ae1344cea4fe060d198d42ad admin

#å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ˜¯å¦å·²ç»æ·»åŠ ä¸Š
[root@localhost ~]# openstack role assignment list | grep 1954d71a8445418482b4d3966e6a8cfe | grep 8ef5b603ae1344cea4fe060d198d42ad
| 9d9bb1f3f9e84e999cc18f99fd901398 | 8ef5b603ae1344cea4fe060d198d42ad                                 |                                  |                                  | 1954d71a8445418482b4d3966e6a8cfe |
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ç¬¬ä¸ƒæ­¥ï¼šé‡å¯keystoneæœåŠ¡&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# æ³¨ï¼šå¦‚æœkeystoneè·‘åœ¨httpdä¸Šï¼Œç›´æ¥é‡å¯httpdæœåŠ¡å³å¯
systemctl restart openstack-keystone.service
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;section-2&quot;&gt;å‚è€ƒèµ„æ–™&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;https://docs.hpcloud.com/commercial/GA1/1.1commerical.services-identity-integrate-ldap.html#topic9275__connect&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;https://access.redhat.com/documentation/en/red-hat-enterprise-linux-openstack-platform/7/integrate-with-identity-service/chapter-1-active-directory-integration&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;https://technet.microsoft.com/en-us/library/ee617195.aspx&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;http://windowsitpro.com/powershell/top-10-active-directory-tasks-solved-powershell&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Thu, 02 Jun 2016 17:00:13 +0800</pubDate>
        <link>http://www.pisces.ml/articles/openstack/2016602</link>
        <guid isPermaLink="true">http://www.pisces.ml/articles/openstack/2016602</guid>
        
        
        <category>openstack</category>
        
      </item>
    
      <item>
        <title>tcpdumpå‘½ä»¤è¯¦è§£</title>
        <description>&lt;p&gt;è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯è®°å½•å…³äºtcpdumpçš„ä½¿ç”¨ï¼Œtcpdumpæ˜¯å¸¸ç”¨çš„æŠ“åŒ…å·¥å…·ï¼Œè¯¥å·¥å…·å¯ä»¥çµæ´»çš„æŠ“å–åœ¨ç½‘ç»œä¸­åŒ…ä¼ è¾“ã€‚&lt;/p&gt;

&lt;p&gt;ï¼ˆæ“ä½œç³»ç»Ÿï¼šubuntu 15.04ï¼‰&lt;/p&gt;

&lt;h2 id=&quot;tcpdump&quot;&gt;tcpdumpå‘½ä»¤æ ¼å¼&lt;/h2&gt;

&lt;p&gt;æ³¨æ„ï¼šè¯¦ç»†è§£é‡Šå¯ä»¥é€šè¿‡man tcpdumpæ¥æŸ¥çœ‹ã€‚&lt;/p&gt;

&lt;p&gt;tcpdump [-i ç½‘å¡] -nnAX â€˜è¡¨è¾¾å¼â€™&lt;/p&gt;

&lt;p&gt;å‚æ•°æ„ä¹‰ï¼š
-i: interface ç›‘å¬çš„ç½‘å¡
-nnï¼šè¡¨ç¤ºä»¥ipå’Œportçš„æ–¹å¼æ˜¾ç¤ºæ¥æºä¸»æœºå’Œç›®çš„ä¸»æœºï¼Œè€Œä¸æ˜¯ç”¨ä¸»æœºåå’ŒæœåŠ¡
-Aï¼šä»¥asciiçš„æ–¹å¼æ˜¾ç¤ºæ•°æ®åŒ…ï¼ŒæŠ“å–webæ•°æ®æ—¶å¾ˆæœ‰ç”¨
-Xï¼šæ•°æ®åŒ…å°†ä¼šä»¥16è¿›åˆ¶å’Œasciiçš„æ–¹å¼æ˜¾ç¤ºï¼ˆè¿™æ ·æ˜¾ç¤ºæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿï¼‰&lt;/p&gt;

&lt;p&gt;è¡¨è¾¾å¼ï¼šè¡¨è¾¾å¼æœ‰å¾ˆå¤šç§ï¼Œå¸¸è§çš„æœ‰ï¼šhost ä¸»æœºï¼›port ç«¯å£ï¼›src host å‘åŒ…ä¸»æœºï¼›dst host æ”¶åŒ…ä¸»æœºã€‚å¤šä¸ªæ¡ä»¶å¯ä»¥ç”¨andã€orç»„åˆï¼Œå–åå¯ä»¥ä½¿ç”¨!ï¼Œæ›´å¤šçš„ä½¿ç”¨å¯ä»¥æŸ¥çœ‹man 7 pcap-filterã€‚&lt;/p&gt;

&lt;h2 id=&quot;section&quot;&gt;ç›‘å¬ç½‘å¡&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ç›‘å¬eth0ç½‘å¡
tcpdump -i eth0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¯ä»¥ä½¿ç”¨ifconfigå‘½ä»¤æ¥æŸ¥çœ‹ç½‘å¡ä¿¡æ¯ï¼Œä»¥ä¾¿é€šè¿‡tcpdumpå‘½ä»¤æ¥ç›‘å¬ç›¸åº”ç½‘å¡ã€‚&lt;/p&gt;

&lt;h2 id=&quot;section-1&quot;&gt;ç›‘å¬æŒ‡å®šåè®®çš„æ•°æ®&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# è¡¨ç¤ºç›‘å¬eth0ç½‘å¡ï¼Œå¹¶ä¸”åªæ¥æ”¶icmpåè®®æ•°æ®
tcpdump -i eth0 -nn &#39;icmp&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ç›‘å¬icmpåè®®ç±»å‹æ•°æ®ï¼Œicmpå³pingå‘½ä»¤ä½¿ç”¨çš„åè®®ã€‚å¸¸ç”¨çš„åè®®ç±»å‹æœ‰tcp,udpç­‰ã€‚&lt;/p&gt;

&lt;p&gt;ç¤ºä¾‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://www.pisces.ml/images/tcpdump.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä»¥ä¸Šæ˜¯æŠ“å–icmpåè®®ç±»å‹æ•°æ®ï¼Œæ•°æ®å«ä¹‰ï¼š&lt;/p&gt;

&lt;p&gt;æŠ“åˆ°åŒ…çš„æ—¶é—´ IP å‘åŒ…çš„ä¸»æœºå’Œç«¯å£ &amp;gt; æ¥æ”¶çš„ä¸»æœºå’Œç«¯å£ æ•°æ®åŒ…å†…å®¹&lt;/p&gt;

&lt;h2 id=&quot;section-2&quot;&gt;ç›‘å¬æŒ‡å®šçš„ä¸»æœº&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tcpdump -i eth0 -nn &#39;host 192.168.1.231&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¯¥å‘½ä»¤è¡¨ç¤ºæŠ“å–ä¸»æœº192.168.1.231çš„å‘é€åŒ…å’Œæ¥æ”¶åŒ…&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tcpdump -i eth0 -nn &#39;src host 192.168.1.231&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¡¨ç¤ºåªæŠ“å–ä¸»æœº192.168.1.231å‘é€çš„åŒ…&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tcpdump -i eth0 -nn &#39;dst host 192.168.1.231&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¡¨ç¤ºåªæŠ“å–ä¸»æœº192.168.1.231æ¥æ”¶åˆ°çš„åŒ…&lt;/p&gt;

&lt;h2 id=&quot;section-3&quot;&gt;ç›‘å¬æŒ‡å®šç«¯å£&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tcpdump -i eth0 -nnA &#39;port 80&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;è¯¥å‘½ä»¤è¡¨ç¤ºæŠ“å–80ç«¯å£çš„æ•°æ®åŒ…ï¼Œå¹¶ä»¥asciiçš„æ–¹å¼æ˜¾ç¤ºæ•°æ®åŒ…ï¼Œåœ¨webå¼€å‘ä¸­å¾ˆå®ç”¨&lt;/p&gt;

&lt;h2 id=&quot;section-4&quot;&gt;ç›‘å¬æŒ‡å®šä¸»æœºå’Œç«¯å£&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tcpdump -i eth0 -nnA &#39;port 80 and src host 192.168.1.231&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;å¤šä¸ªæ¡ä»¶å¯ä»¥ç”¨andï¼Œorè¿æ¥ã€‚ä¸Šä¾‹è¡¨ç¤ºç›‘å¬192.168.1.231ä¸»æœºé€šè¿‡80ç«¯å£å‘é€çš„æ•°æ®åŒ…ã€‚&lt;/p&gt;

&lt;h2 id=&quot;section-5&quot;&gt;ç›‘å¬é™¤æŸä¸ªç«¯å£å¤–çš„å…¶å®ƒç«¯å£&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tcpdump -i eth0 -nnA &#39;!port 22&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¦‚æœéœ€è¦æ’é™¤æŸä¸ªç«¯å£æˆ–è€…ä¸»æœºï¼Œå¯ä»¥ä½¿ç”¨â€œ!â€ç¬¦å·ï¼Œä¸Šä¾‹è¡¨ç¤ºç›‘å¬é22ç«¯å£çš„æ•°æ®åŒ…ã€‚&lt;/p&gt;

&lt;p&gt;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“åä¸½åˆ†å‰²çº¿â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“&lt;/p&gt;

&lt;p&gt;ä»¥ä¸Šå†…å®¹è®°å½•ä»¥å¤‡åç”¨ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&lt;/p&gt;
</description>
        <pubDate>Sun, 22 May 2016 17:00:13 +0800</pubDate>
        <link>http://www.pisces.ml/articles/linux/2016522</link>
        <guid isPermaLink="true">http://www.pisces.ml/articles/linux/2016522</guid>
        
        
        <category>linux</category>
        
      </item>
    
      <item>
        <title>keystoneæ¶æ„å’ŒåŠŸèƒ½åˆ†æ</title>
        <description>&lt;h2 id=&quot;section&quot;&gt;ç®€ä»‹&lt;/h2&gt;
&lt;p&gt;Keystone(OpenStack Identity Service)æ˜¯ OpenStack æ¡†æ¶ä¸­è´Ÿè´£ç®¡ç†èº«ä»½éªŒè¯ã€æœåŠ¡è§„åˆ™å’ŒæœåŠ¡ä»¤ç‰ŒåŠŸèƒ½ç­‰çš„æ¨¡å—ã€‚ç”¨æˆ·è®¿é—®èµ„æºéœ€è¦éªŒè¯ç”¨æˆ·çš„èº«ä»½ä¸æƒé™ï¼ŒæœåŠ¡æ‰§è¡Œæ“ä½œä¹Ÿéœ€è¦è¿›è¡Œæƒé™æ£€æµ‹ï¼Œè¿™äº›éƒ½éœ€è¦é€šè¿‡ Keystone æ¥å¤„ç†ã€‚ç›®å‰KeystoneåŒæ—¶æ”¯æŒV2å’ŒV3ç‰ˆæœ¬ï¼Keystone V3 ç‰ˆæœ¬åšå‡ºäº†è®¸å¤šå˜åŒ–å’Œæ”¹è¿›ï¼Œå¼•å…¥äº† Domain å’Œ Group ç­‰æ–°æ¦‚å¿µï¼&lt;/p&gt;

&lt;h2 id=&quot;keystone&quot;&gt;keystoneåŸºæœ¬æ¦‚å¿µ&lt;/h2&gt;

&lt;p&gt;Keystone ä¸­ä¸»è¦æ¶‰åŠåˆ°å¦‚ä¸‹å‡ ä¸ªæ¦‚å¿µï¼šUserã€Project(v3)ã€Domainã€Regionã€Roleã€Tokenã€‚ä¸‹é¢å¯¹è¿™å‡ ä¸ªæ¦‚å¿µè¿›è¡Œç®€è¦è¯´æ˜ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Userï¼šå³ä½¿ç”¨æœåŠ¡çš„ç”¨æˆ·ï¼Œå¯ä»¥æ˜¯äººã€æœåŠ¡æˆ–è€…æ˜¯ç³»ç»Ÿï¼Œåªè¦æ˜¯ä½¿ç”¨äº† Openstack æœåŠ¡çš„å¯¹è±¡éƒ½å¯ä»¥ç§°ä¸ºç”¨æˆ·ã€‚&lt;/li&gt;
  &lt;li&gt;Projectï¼šé¡¹ç›®æˆ–è€…ç†è§£ä¸ºç»„ç»‡æ‹¥æœ‰çš„èµ„æºçš„åˆé›†ã€‚åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­å¯ä»¥æ‹¥æœ‰å¾ˆå¤šä¸ªç”¨æˆ·ï¼Œè¿™äº›ç”¨æˆ·å¯ä»¥æ ¹æ®æƒé™çš„åˆ’åˆ†ä½¿ç”¨é¡¹ç›®ä¸­çš„èµ„æºã€‚&lt;/li&gt;
  &lt;li&gt;Domain: ä½œç”¨åŸŸï¼Œå³é¡¹ç›®çš„é›†åˆï¼Œåœ¨ä¸€ä¸ªåŸŸå†…å¯ä»¥åˆ›å»ºå¤šä¸ªé¡¹ç›®ã€‚&lt;/li&gt;
  &lt;li&gt;Region: ä½œç”¨èŒƒå›´ï¼Œæ˜¯åŸŸçš„é›†åˆï¼Œé€šè¿‡Regionæ¥åˆ’åˆ†åŒºåŸŸï¼ŒRegionåŒ…æ‹¬äº†æ‰€æœ‰çš„å¯ç”¨èµ„æºã€‚&lt;/li&gt;
  &lt;li&gt;Roleè§’è‰²:ç”¨äºåˆ†é…æ“ä½œçš„æƒé™ã€‚è§’è‰²å¯ä»¥è¢«æŒ‡å®šç»™ç”¨æˆ·ï¼Œä½¿å¾—è¯¥ç”¨æˆ·è·å¾—è§’è‰²å¯¹åº”çš„æ“ä½œæƒé™ã€‚&lt;/li&gt;
  &lt;li&gt;Credential ç”¨æˆ·è¯æ®ï¼šç”¨æ¥è¯æ˜ç”¨æˆ·èº«ä»½çš„è¯æ®ï¼Œå¯ä»¥æ˜¯ç”¨æˆ·åå’Œå¯†ç ã€ç”¨æˆ·åå’ŒAPI keyï¼Œæˆ–è€…ä¸€ä¸ª Keystone åˆ†é…çš„èº«ä»½tokenã€‚&lt;/li&gt;
  &lt;li&gt;Tokenä»¤ç‰Œï¼šæŒ‡çš„æ˜¯ä¸€ä¸²æ¯”ç‰¹å€¼æˆ–è€…å­—ç¬¦ä¸²ï¼Œç”¨æ¥ä½œä¸ºè®¿é—®èµ„æºçš„è®°å·ã€‚Token ä¸­å«æœ‰å¯è®¿é—®èµ„æºçš„èŒƒå›´å’Œæœ‰æ•ˆæ—¶é—´ã€‚&lt;/li&gt;
  &lt;li&gt;Groupç»„ï¼šåˆ†ç»„å¯ä»¥è·Ÿé¡¹ç›®æˆ–è€…åŸŸå»ºç«‹ç›¸åº”å…³ç³»ï¼åŒç»„çš„é¡¹ç›®å¯ä»¥å¯¹é¡¹ç›®æˆ–è€…åŸŸå†…äº«æœ‰ç›¸åº”çš„æ“ä½œæƒé™ã€‚&lt;/li&gt;
  &lt;li&gt;Service æœåŠ¡ï¼šä¸€ä¸ª OpenStack æœåŠ¡ï¼Œæ¯”å¦‚Novaã€Swiftæˆ–è€…Glanceç­‰ã€‚æ¯ä¸ªæœåŠ¡æä¾›ä¸€ä¸ªæˆ–è€…å¤šä¸ª endpoint ä¾›ç”¨æˆ·è®¿é—®èµ„æºä»¥åŠè¿›è¡Œæ“ä½œã€‚&lt;/li&gt;
  &lt;li&gt;Endpointç«¯ç‚¹ ï¼šä¸€ä¸ªç½‘ç»œå¯è®¿é—®çš„æœåŠ¡åœ°å€ï¼Œé€šè¿‡å®ƒä½ å¯ä»¥è®¿é—®ä¸€ä¸ªæœåŠ¡ï¼Œé€šå¸¸æ˜¯ä¸ª URL åœ°å€ã€‚ä¸åŒ region æœ‰ä¸åŒçš„service endpointã€‚endpointå‘Šè¯‰ä¹Ÿå¯å‘Šè¯‰ OpenStack service å»å“ªé‡Œè®¿é—®ç‰¹å®šçš„ servcieã€‚æ¯”å¦‚ï¼Œå½“ Nova éœ€è¦è®¿é—® Glance æœåŠ¡å»è·å– image æ—¶ï¼ŒNova é€šè¿‡è®¿é—® Keystone æ‹¿åˆ° Glance çš„ endpointï¼Œç„¶åé€šè¿‡è®¿é—®è¯¥ endpoint å»è·å–GlanceæœåŠ¡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡Endpointçš„ region å±æ€§å»å®šä¹‰å¤šä¸ª regionã€‚Endpoint è¯¥ä½¿ç”¨å¯¹è±¡åˆ†ä¸ºä¸‰ç±»ï¼š
    &lt;ol&gt;
      &lt;li&gt;adminurl:æä¾›ç»™adminè®¿é—®&lt;/li&gt;
      &lt;li&gt;internalurl:è¯¥åœ°å€æ˜¯ç»™å†…éƒ¨æœåŠ¡ä¹‹é—´è¿›è¡Œè®¿é—®&lt;/li&gt;
      &lt;li&gt;publicurl:å…¬å…±ç”¨æˆ·å¯ä»¥è®¿é—®çš„åœ°å€&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Policy:OpenStackå¯¹ç”¨æˆ·çš„éªŒè¯é™¤äº† OpenStack çš„èº«ä»½éªŒè¯ä»¥å¤–ï¼Œè¿˜éœ€è¦é‰´åˆ«ç”¨æˆ·å¯¹æŸä¸ªæœåŠ¡æ˜¯å¦æœ‰è®¿é—®æƒé™ã€‚Policy æœºåˆ¶å°±æ˜¯ç”¨æ¥æ§åˆ¶æŸä¸€ä¸ª User åœ¨æŸä¸ª Tenant ä¸­æŸä¸ªæ“ä½œçš„æƒé™ã€‚è¿™ä¸ª User èƒ½æ‰§è¡Œä»€ä¹ˆæ“ä½œï¼Œä¸èƒ½æ‰§è¡Œä»€ä¹ˆæ“ä½œï¼Œå°±æ˜¯é€šè¿‡ policy æœºåˆ¶æ¥å®ç°çš„ã€‚å¯¹äº Keystone æœåŠ¡æ¥è¯´ï¼Œpolicy å°±æ˜¯ä¸€ä¸ªjson æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯ /etc/keystone/policy.jsonã€‚é€šè¿‡é…ç½®è¿™ä¸ªæ–‡ä»¶ï¼ŒKeystone Service å®ç°äº†å¯¹ User çš„åŸºäºç”¨æˆ·è§’è‰²çš„æƒé™ç®¡ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-1&quot;&gt;æ¦‚å¿µç†è§£&lt;/h2&gt;

&lt;h3 id=&quot;section-2&quot;&gt;è´¦æˆ·å…³ç³»&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;http://www.pisces.ml/images/relation_user_project_region.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä»ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºåœ¨ä¸€ä¸ª RegionOneä¸­åŒ…å«å¤šä¸ªDomainï¼Œæ¯ä¸ªDomainå…±åŒä½¿ç”¨Regionæ‰€æä¾›çš„èµ„æºã€‚Domain1ä¸­åŒ…å« 3 ä¸ª Projects,å¯ä»¥é€šè¿‡ Group1 å°† Role adminç›´æ¥èµ‹äºˆ Domain,é‚£ä¹ˆ Group1 ä¸­çš„æ‰€æœ‰ç”¨æˆ·å°†ä¼šå¯¹ Domain1ä¸­çš„æ‰€æœ‰ Projects éƒ½æ‹¥æœ‰adminæƒé™ã€‚ä¹Ÿå¯ä»¥é€šè¿‡ Group2 å°† Role demo åªèµ‹äºˆ Project3,è¿™æ · Group2 ä¸­çš„ User å°±åªæ‹¥æœ‰å¯¹Project3æœ‰ç›¸åº”çš„æƒé™ï¼Œè€Œä¸ä¼šå½±å“å…¶å®ƒ Projectsã€‚&lt;/p&gt;

&lt;h3 id=&quot;section-3&quot;&gt;ç®¡ç†å¯¹è±¡å…³ç³»&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;http://www.pisces.ml/images/flow_chart.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä»ä¸Šå›¾æˆ‘ä»¬å¯ä»¥æ¸…æ™°çš„çœ‹åˆ°å„ä¸ªå¯¹è±¡ä¹‹é—´çš„æ€»ä½“å…³ç³»ï¼Œç®€å•çš„è¯´ç”¨æˆ·é€šè¿‡ç”¨æˆ·åå¯†ç ç™»å…¥ï¼ˆæˆ–è€…ä½¿ç”¨è”åˆè®¤è¯ç™»å…¥ï¼‰ï¼ŒéªŒè¯æˆåŠŸkeystoneä¼šè¿”å›ç›¸åº”çš„token(scope_token/unscope_token),scope_tokenä¸­åŒ…å«ä¸€ç³»åˆ—çš„metaä¿¡æ¯ï¼ˆåŒ…æ‹¬ç«¯å£ï¼è§’è‰²ï¼é¡¹ç›®ï¼‰ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šå…ˆéªŒè¯tokenæœ‰æ•ˆæ€§ï¼Œç”¨æˆ·å†æ‹¿è¿™tokenå»è¯·æ±‚ç›¸åº”çš„èµ„æºï¼ŒæœåŠ¡è·ŸæœåŠ¡ä¹‹é—´è®¿é—®ä¹Ÿæ˜¯é€šè¿‡endpointæ‰¾åˆ°æœåŠ¡åœ°å€å¹¶è¿›è¡Œè¯·æ±‚èµ„æºä¿¡æ¯ï¼Œå¯è§tokenåœ¨æ•´ä¸ªopenstaqckå®¶æ—èµ·åˆ°äº†å¾ˆé‡è¦çš„ä½œç”¨ã€‚å¦å¤–éœ€è¦æçš„æ˜¯å„ä¸ªæœåŠ¡ä¸­çš„policyæœºåˆ¶ï¼Œpolicyæ˜¯æ ¹æ®tokenä¸­çš„è§’è‰²ä¿¡æ¯æ¥åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰ç›¸åº”çš„æ“ä½œæƒé™ã€‚&lt;/p&gt;

&lt;h2 id=&quot;section-4&quot;&gt;æ¶æ„&lt;/h2&gt;

&lt;h3 id=&quot;section-5&quot;&gt;æ•´ä½“æ¶æ„å›¾&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;http://www.pisces.ml/images/openstack.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç”±ä¸Šå›¾å¯çŸ¥keystoneä¸ºå„ä¸ªæ¨¡å—æä¾›è®¤è¯æœåŠ¡ï¼Œæ‰€ä»¥å„ä¸ªæ¨¡å—ä¸keystoneéƒ½æœ‰æ‰€äº¤äº’ã€‚å…¶ä¸­ç™»å½•è®¤è¯ä½“ç°åœ¨ç”¨æˆ·è®¿é—®å„ä¸ªç»„ä»¶çš„APIæ—¶ï¼Œè°ƒç”¨äº†WSGIæ¡†æ¶çš„authtoken filterï¼Œè¯¥filteræœ€å…ˆè°ƒç”¨keystoneclient ï¼Œæœ€ç»ˆé€šè¿‡keystoneéªŒè¯tokenï¼Œå®Œæˆå¯¹ç”¨æˆ·çš„ç™»å½•è®¤è¯ã€‚å¦‚æœè®¤è¯å¤±è´¥ï¼Œç”¨æˆ·å°†ä¸èƒ½è®¿é—®è¯¥APIã€‚&lt;/p&gt;

&lt;h3 id=&quot;keystone-1&quot;&gt;keystoneæ¶æ„&lt;/h3&gt;

&lt;h4 id=&quot;keystone-2&quot;&gt;keystoneæºç ç»“æ„&lt;/h4&gt;

&lt;p&gt;ç›®å½•ç»“æ„&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;â”œâ”€â”€ assignment
â”‚   â”œâ”€â”€ backends
â”‚   â”œâ”€â”€ controllers.py
â”‚   â”œâ”€â”€ controllers.pyc
â”‚   â”œâ”€â”€ core.py
â”‚   â”œâ”€â”€ core.pyc
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ __init__.pyc
â”‚   â”œâ”€â”€ role_backends
â”‚   â”œâ”€â”€ routers.py
â”‚   â”œâ”€â”€ routers.pyc
â”‚   â”œâ”€â”€ schema.py
â”‚   â””â”€â”€ schema.pyc
â”œâ”€â”€ auth
â”‚   â”œâ”€â”€ controllers.py
â”‚   â”œâ”€â”€ controllers.pyc
â”‚   â”œâ”€â”€ core.py
â”‚   â”œâ”€â”€ core.pyc
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ __init__.pyc
â”‚   â”œâ”€â”€ plugins
â”‚   â”œâ”€â”€ routers.py
â”‚   â””â”€â”€ routers.pyc
â”œâ”€â”€ backends.pyc
â”œâ”€â”€ catalog
â”‚   â”œâ”€â”€ backends
â”‚   â”œâ”€â”€ controllers.py
â”‚   â”œâ”€â”€ controllers.pyc
â”‚   â”œâ”€â”€ core.py
â”‚   â”œâ”€â”€ core.pyc
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ __init__.pyc
â”‚   â”œâ”€â”€ routers.py
â”‚   â”œâ”€â”€ routers.pyc
â”‚   â”œâ”€â”€ schema.py
â”‚   â””â”€â”€ schema.pyc
â”œâ”€â”€ clean.pyc
â”œâ”€â”€ cli.pyc
â”œâ”€â”€ cmd
â”‚   â”œâ”€â”€ all.py
â”‚   â”œâ”€â”€ all.pyc
â”‚   â”œâ”€â”€ cli.py
â”‚   â”œâ”€â”€ cli.pyc
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ __init__.pyc
â”‚   â”œâ”€â”€ manage.py
â”‚   â””â”€â”€ manage.pyc
......
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;cmdç›®å½•ä¸‹(ä¸»è¦å­˜æ”¾å‘½ä»¤è¡Œå·¥å…·)ï¼š
    &lt;ul&gt;
      &lt;li&gt;keystone-allï¼ˆæœ¬åœ°å¯åŠ¨æœåŠ¡ç›‘å¬35357å’Œ5000ç«¯å£ï¼‰&lt;/li&gt;
      &lt;li&gt;keystone-manageï¼ˆkeystoneç»¼åˆç®¡ç†å·¥å…·
  a. db_sync:åˆå§‹åŒ–æ•°æ®åº“
  b. db_versionï¼šæ‰“å°æ•°æ®åº“è¿ç§»ç‰ˆæœ¬
  c. fernet_rotateï¼šRotate Fernet encryption keysã€‚
  d. fernet_setupï¼šSetup a key repository for Fernet tokens
  e. mapping_purge:æ¸…ç©ºmappingè¡¨
  f. pki_setupï¼šåˆå§‹åŒ–ç”Ÿæˆå¯†é’¥å¯¹å’Œè¯ä¹¦æ–‡ä»¶
  g. saml_idp_metadataï¼šç”ŸæˆIdentity Providerçš„metadata
  h. ssl_setup ï¼šä¸ºhttpsé“¾æ¥ç”Ÿæˆå¯†é’¥å¯¹å’Œè¯ä¹¦
  i. token_flush ï¼šæ¸…é™¤è¿‡æœŸtoken&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;æœåŠ¡ç›®å½•ï¼š
    &lt;ul&gt;
      &lt;li&gt;æœåŠ¡ç›®å½•å¦‚identity,token,catalogç­‰ï¼Œä»–ä»¬çš„æ¶æ„ç±»ä¼¼éƒ½æ˜¯é€šè¿‡routerè¿›è¡Œurlè·¯ç”±åˆ°ç›¸åº”çš„controllerä¸Šï¼Œcontrollerè¿›è¡Œé€»è¾‘å¤„ç†ï¼Œé€šè¿‡æŒ‡å®šçš„driverè°ƒç”¨ç›¸åº”çš„åå°å¤„ç†ã€‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;serverç›®å½•ï¼š
    &lt;ul&gt;
      &lt;li&gt;æœåŠ¡å…¥å£ï¼Œä¸»è¦æ˜¯åŠ è½½é…ç½®å¯åŠ¨æœåŠ¡ç›‘å¬ç›¸åº”ç«¯å£&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;middlewareç›®å½•ï¼š
    &lt;ul&gt;
      &lt;li&gt;ä¸­é—´é”®æ”¯æŒï¼Œç”¨äºé¢„å¤„ç†requestè¯·æ±‚&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;keystone-3&quot;&gt;keystoneæœåŠ¡å¯åŠ¨&lt;/h4&gt;

&lt;p&gt;&lt;em&gt;å¯åŠ¨æ–¹å¼&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;keystoneå¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼å¯åŠ¨åˆ†åˆ«æ˜¯æœ¬åœ°å¼€å‘æ¨¡å¼å’Œéƒ¨ç½²ç¯å¢ƒï¼š&lt;/p&gt;

&lt;p&gt;æœ¬åœ°å¼€å‘ç¯å¢ƒï¼škeystone-all â€“configl-file /etc/keystone/keystone.conf&lt;/p&gt;

&lt;p&gt;éƒ¨ç½²ç¯å¢ƒï¼šä¸»è¦æ˜¯å°†åº”ç”¨è·‘åœ¨httpdä¸Šï¼Œå¯å‚è€ƒé…ç½®æ–‡æ¡£ï¼šhttp://docs.openstack.org/developer/keystone/apache-httpd.html&lt;/p&gt;

&lt;p&gt;&lt;em&gt;å¯åŠ¨æ¨¡å¼åˆ†æ&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;keystoneé€šè¿‡paste deployç»„ç»‡appï¼Œä¼šå¯åŠ¨admin(ç›‘å¬35357ç«¯å£)å’Œmain(ç›‘å¬5000ç«¯å£),å¯¹åº”keystone-paste.iniä¸­çš„[composite:main]å’Œ[composite:admin]ï¼Œå¦‚ä¸‹æ‰€ç¤ºé…ç½®æ–‡ä»¶ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://www.pisces.ml/images/image2016-3-4 16-57-3.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä»ä¸Šé¢é…ç½®æ–‡ä»¶æˆ‘ä»¬å¯ä»¥çœ‹å‡ºadminåº”ç”¨ä¸»è¦æ˜¯æä¾›ç®¡ç†å‘˜appï¼Œmainä¸»è¦æä¾›äº†å…¬å…±appã€‚ä»–ä»¬åŒæ—¶éƒ½æ”¯æŒv2å’Œv3ç‰ˆæœ¬apiï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºv3ç‰ˆæœ¬çš„apiåœ¨adminå’Œmainä¸­æ˜¯æ²¡æœ‰å·®å¼‚çš„ï¼ˆåœ¨v3ç‰ˆæœ¬ä¸­éƒ½æ˜¯ä½¿ç”¨api_v3ï¼‰ï¼Œä½†æ˜¯åœ¨v2ç‰ˆæœ¬ä¸­å­˜åœ¨å·®å¼‚ï¼Œåœ¨mainç”¨äº†public_apiè€Œåœ¨adminä¸­ç”¨äº†admin_apiï¼ˆè¿™å°±å¯ä»¥è§£é‡Šä¸ºä½•åœ¨v2ç‰ˆæœ¬ä¸­å‘ä¸åŒçš„ç«¯å£å‘é€ç›¸åŒçš„è¯·æ±‚å´è¿”å›ä¸åŒç»“æœï¼‰ã€‚ç®€å•çš„è¯´åœ¨v2ç‰ˆæœ¬ä¸­è¿˜åŒºåˆ†adminå’Œpublicï¼Œåœ¨v3ç‰ˆæœ¬ä¸­å·²ç»ä¸åŒºåˆ†ï¼Œv3ç‰ˆæœ¬ä¸­å°±æ˜¯æŒ‰ç…§RBACå³è®¿é—®æ§åˆ¶æ¥å†³å®šç”¨æˆ·æ˜¯å¦å¯¹è¯¥apiæœ‰æ“ä½œæƒé™ã€‚&lt;/p&gt;

&lt;p&gt;å…·ä½“çš„factoryæ„é€ ï¼ŒåŒ…æ‹¬è·¯ç”±çš„å®ç°ï¼Œä»¥åŠä¸­é—´ä»¶çš„å¤„ç†ï¼Œåˆ°æœ€ç»ˆçš„åº”ç”¨å¤„ç†æœ‰å…´è¶£å¯ä»¥çœ‹çœ‹æºç çš„å®ç°ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ã€‚&lt;/p&gt;

&lt;h4 id=&quot;keystone-resful-api&quot;&gt;keystone RESful Apiæ¶æ„&lt;/h4&gt;

&lt;p&gt;æ¶æ„å›¾ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://www.pisces.ml/images/RESTFul_API.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;keystoneæ˜¯åŸºäºpython WSGIæ¡†æ¶å®ç°çš„webåº”ç”¨ï¼Œé€šè¿‡pasteç»„ç»‡webåº”ç”¨æœåŠ¡ç½‘ç»œï¼Œå¯¹å¤–æä¾›REST Apiï¼Œä¸»è¦æä¾›äº†æä¾› Identityã€Tokenã€Catalog ã€Resourceã€Assignmentå’Œ Policy æœåŠ¡ï¼š
* IdentityæœåŠ¡éªŒè¯äº†èº«ä»½éªŒè¯å‡­è¯ï¼Œå¹¶æä¾›äº†æ‰€æœ‰ç›¸å…³çš„å…ƒæ•°æ®ã€‚
* TokenæœåŠ¡éªŒè¯å¹¶ç®¡ç†ç”¨äºéªŒè¯è¯·æ±‚èº«ä»½çš„ä»¤ç‰Œã€‚
* CatalogæœåŠ¡æä¾›äº†å¯ç”¨äºç«¯ç‚¹å‘ç°çš„æœåŠ¡æ³¨å†Œè¡¨ã€‚
* PolicyæœåŠ¡æš´éœ²äº†ä¸€ä¸ªåŸºäºè§„åˆ™çš„èº«ä»½éªŒè¯å¼•æ“ã€‚
* ResourceæœåŠ¡æä¾›èµ„æºåŒ…æ‹¬project/domain
* AssignmentæœåŠ¡åˆ†é…è§’è‰²&lt;/p&gt;

&lt;p&gt;æ¯ä¸ª Keystone åŠŸèƒ½éƒ½æ”¯æŒç”¨äºé›†æˆåˆ°å¼‚æ„ç¯å¢ƒå¹¶å±•ç¤ºä¸åŒåŠŸèƒ½çš„åç«¯æ’ä»¶ã€‚é€šè¿‡ä¸‹è¡¨æˆ‘ä»¬çœ‹ä¸‹å„ä¸ªæœåŠ¡æ‰€ç®¡ç†çš„å¯¹è±¡ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;| ç»„ä»¶åç§° | ç®¡ç†å¯¹è±¡ | ç±»å‹/æ ¼å¼ | æœåŠ¡åå° | é…ç½®åå° |
|:-----:|:-----:|:-----:|:-----:|:-----:|
| identity | keystone.identity.controllers.Groupl3 keystone.identity.controllers.UserV3 | -- | ldap/sql | [identity] driver = sql|
| Token | keystone.token.controllers.Auth | uuid/pki/pkiz/fernet | kvs/sql/memcache/memcache_pool | [token] provider = uuid/pki/pkiz/fernet driver = sql/memcache/memcache_pool |
|Catalog  | keystone.catalog.controllers.EndpointV3 keystone.catalog.controllers.RegionV3 keystone.catalog.controllers.ServiceV3 | -- |  kvs/templated/sql | [catalog] driver=sql/kvs/templated |
| Policy | keystone.policy.controllers.PolicyV3 | -- | sql | [policy] driver=sql |
| Resource | keystone.resource.controllers.DomainV3 keystone.resource.controllers.ProjectV3 | -- | ldap/sql | [resource] driver=ldap/sql |
| Assignment | keystone.assignment.controllers.GrantAssignmentV3 keystone.assignment.controllers.ProjectAssignmentV3 keystone.assignment.controllers.TenantAssignment keystone.assignment.controllers.Role keystone.assignment.controllers.RoleAssignmentV2 keystone.assignment.controllers.RoleAssignmentV3 keystone.assignment.controllers.RoleV3 | -- | sql/ldap | [assignment] driver=sql/ldap |
| Authentication | keystone.auth.controllers.Auth | password/saml2/token/oauth1 | -- | [auth] methods=external,password,token,oauth1 password=keystone.auth.plugins.password.Password token=keystone.auth.plugins.token.Token |
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;section-6&quot;&gt;å®‰è£…é…ç½®&lt;/h2&gt;

&lt;h3 id=&quot;section-7&quot;&gt;è½¯ä»¶å®‰è£…&lt;/h3&gt;

&lt;p&gt;å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼å®‰è£…keystone:
* æºç å®‰è£…
* è½¯ä»¶åŒ…å®‰è£…&lt;/p&gt;

&lt;p&gt;&lt;em&gt;æºç å®‰è£…ï¼ˆæœ¬åœ°ç¯å¢ƒï¼‰&lt;/em&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ git clone https://git.openstack.org/openstack/keystone.gitã€€#æ‹·è´æºç 
$ cd keystone/ &amp;amp;&amp;amp; virtualenv .venv #è¿›å…¥è½¯ä»¶åŒ…ï¼Œåˆ›å»ºæœ¬åœ°éš”ç¦»ç¯å¢ƒ
$ source .venv/bin/activate
$ pip install -r requirements.txtã€€ï¼ƒå®‰è£…è½¯ä»¶ä¾èµ–åŒ…
$ python setup.py install/developã€€ï¼ƒå¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©å·²å“ªç§æ–¹å¼å®‰è£…ï¼Œç³»ç»Ÿå®‰è£…ï¼å¼€å‘è€…æ¨¡å¼å®‰è£…
$ vim /etc/keystone/keystone.confã€€ï¼ƒæ ¹æ®å…·ä½“éœ€æ±‚é…ç½®keystoneï¼Œå¯å‚è€ƒå®˜æ–¹é…ç½®æ–‡æ¡£ï¼šhttp://docs.openstack.org/developer/keystone/configuration.html
# åˆå§‹åŒ–æ•°æ®åº“: keystone-manage --config-file etc/keystone.conf db_sync
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;em&gt;è½¯ä»¶åŒ…å®‰è£…&lt;/em&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ï¼ƒUbuntu
$ sudo apt-get install keystone
# Fedora
$ sudo yum install openstack-keystone

# é…ç½®keystoneé…ç½®æ–‡ä»¶keystone.conf
# åˆå§‹åŒ–æ•°æ®åº“: keystone-manage --config-file etc/keystone.conf db_sync
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;section-8&quot;&gt;é…ç½®è¯´æ˜&lt;/h3&gt;

&lt;p&gt;keystoneä»£ç çš„etc/ç›®å½•ä¸‹å«æœ‰keystoneçš„é…ç½®æ–‡ä»¶&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;keystone.conf ä¸»è¦é…ç½®æ–‡ä»¶&lt;/li&gt;
  &lt;li&gt;keystone-paste.ini pasteé…ç½®æ–‡ä»¶, å¯ä»¥é€šè¿‡ä¿®æ”¹æ­¤æ–‡ä»¶å¢å‡keystoneè¿è¡Œæ—¶åŠ è½½çš„æ‰©å±•(contrib).&lt;/li&gt;
  &lt;li&gt;default_catalog.templates å®šä¹‰service catalogçš„è¯­æ³•æ–‡ä»¶, å¦‚æœkeystoneçš„catalog driver å®šä¹‰ä¸ºkeystone.catalog.backends.templated.Catalog åˆ™ä¼šä»æ–‡æœ¬æ–‡ä»¶ä¸­è¯»å–endpointä¿¡æ¯(ä¸¥æ ¼æ³¨æ„è¯­æ³•, ç©ºæ ¼ç­‰), å®šä¹‰æˆkeystone.catalog.backends.sql.Catalog åˆ™ä¼šä»æ•°æ®åº“ä¸­åŠ è½½endpoint.&lt;/li&gt;
  &lt;li&gt;policy.json keystoneçš„æ¥å£æƒé™æ§åˆ¶å®šä¹‰.&lt;/li&gt;
  &lt;li&gt;policy.v3cloudsample.json keystone å®˜æ–¹çš„å¤šdomainéƒ¨ç½²æ–¹å¼ä¸­çš„æƒé™æ§åˆ¶exampleæ–‡ä»¶,æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;keystone.conf ä¸­ä¸»è¦é…ç½®é€‰é¡¹è¯´æ˜:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[DEFAULT]
   admin_token = ADMIN   # å®šä¹‰ä¸€ä¸ªè¶…çº§ç®¡ç†å‘˜çš„token, ä½¿ç”¨æ­¤tokenå¯ä»¥ç»•è¿‡æƒé™æ£€æŸ¥ç›´æ¥æ“ä½œæ‰€æœ‰æ¥å£, æ­¤å‚æ•°åº”è¯¥åªåœ¨å®‰è£…å®Œkeystoneååˆ›å»ºåˆå§‹è´¦æˆ·æ—¶ä½¿ç”¨, ç”Ÿäº§ç¯å¢ƒä¸­åº”è¯¥è¢«ç¦ç”¨, ç¦ç”¨æ–¹æ³•ä¸º: åœ¨keystone-paste.iniä¸­å°†æ‰€æœ‰pipelineä¸­çš„admin_token_authè¿™ä¸ªfilteråˆ æ‰.
debug = False # æ‰“å°debugçº§åˆ«çš„æ—¥å¿—
verbose = False  # æ‰“å°infoçº§åˆ«çš„æ—¥å¿— ,
   &quot;&quot;&quot;
   æ—¥å¿—çº§åˆ«æ§åˆ¶çš„é€»è¾‘ä¸º:
    if CONF.debug:
        log_root.setLevel(logging.DEBUG)
    elif CONF.verbose:
        log_root.setLevel(logging.INFO)
    else:
        log_root.setLevel(logging.WARNING)
&quot;&quot;&quot;
log_file = /var/log/keystone.log   # æŒ‡å®šå°†logæ‰“åˆ°å“ªä¸ªæ—¥å¿—æ–‡ä»¶ä¸­, ä¸è®¾ç½®,æ—¥å¿—ä¼šæ‰“å°åˆ°å±å¹•
# å’Œrabbitmqç›¸å…³çš„ä¸»è¦å‚æ•°
rabbit_host = localhost
rabbit_port = 5672
rabbit_userid = openstack
rabbit_password = testing
rabbit_virtual_host = /
rabbit_ha_queues = True
amqp_durable_queues = True  # ä¸ºtrueçš„è¯,æ‰€æœ‰rabbitmqç›¸å…³çš„æ¶ˆæ¯,queue,exchangeéƒ½ä¼šå˜æˆæŒä¹…åŒ–çš„.
control_exchange  = keystone  # keystone å‘é€çš„ æ¶ˆæ¯éƒ½ä¼šå‘åˆ°è¯¥ exchange
[auth]
methods = password, token   # å¼€å¯çš„è®¤è¯æ–¹å¼
password = keystone.auth.plugins.password.Password  # methodsä¸­æ¯ä¸ªå®šä¹‰çš„è®¤è¯æ–¹æ³•éƒ½éœ€è¦åœ¨ä¸‹æ–¹å®šä¹‰
token = keystone.auth.plugins.token.Token
[catalog]
template_file = default_catalog.templates   # å¦‚æœdriverä¸ºtemplated, åˆ™æ­¤é€‰é¡¹ç”Ÿæ•ˆ
driver = keystone.catalog.backends.sql.Catalog
[token]
expiration = 3600  # tokençš„è¿‡æœŸæ—¶é—´, æŒ‰sè®¡ç®—,é»˜è®¤3600s
provider = keystone.token.provider.uuid.Provider  # ä½¿ç”¨çš„tokenæ ¼å¼, uuid/pki/pkiz/fernet
[database]
connection = mysql://root:root@localhost/keystone  # å®šä¹‰æ•°æ®åº“è¿æ¥, å¦‚æœä½¿ç”¨sqlite,åˆ™å¯ä»¥ä¿®æ”¹ä¸ºsqlite:///keystone.db
[os_inherit]
enabled = True  # æ—¥å¦å¼€å¯os_inherit æ‰©å±•, å®˜æ–¹å¯¹æ­¤æ‰©å±•çš„è¯´æ˜æ–‡æ¡£: https://github.com/openstack/identity-api/blob/master/v3/src/markdown/identity-api-v3-os-inherit-ext.md
æ‰€æœ‰å‚æ•°çš„é»˜è®¤å€¼å®šä¹‰éƒ½åœ¨keystone/common/config.pyä¸­
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;fqa&quot;&gt;FQA&lt;/h2&gt;

&lt;p&gt;ï¼±ï¼škeystoneçš„35357å’Œ5000ç«¯å£æœ‰ä»€ä¹ˆåŒºåˆ«?
ï¼¡ï¼šåœ¨keystoneçš„ v3 apiä¸­35357 å’Œ5000 æ²¡æœ‰ä»»ä½•åŒºåˆ«, å»ºè®®ç»Ÿä¸€åªä½¿ç”¨35357ç«¯å£, åœ¨v2.0çš„apiä¸­, 5000æ˜¯public apiçš„ç«¯å£,35357æ˜¯admin apiçš„ç«¯å£, ä¸¤è€…æä¾›apiçš„å…·ä½“å·®åˆ«å¯ä»¥çœ‹keystone-paste.iniä¸­çš„[pipeline:public_api] å’Œ[pipeline:admin_api].
ï¼±ï¼šå¦‚ä½•å¼€å¯ä¸€ä¸ªé»˜è®¤æœªå¯ç”¨çš„æ‰©å±•?
ï¼¡ï¼škeystoneçš„æ‰©å±•,éƒ½ä»¥filterçš„å½¢å¼åœ¨keystone-paste.iniä¸­å®šä¹‰, éœ€è¦å¼€å¯åªéœ€è¦å°†å…¶åŠ å…¥ç›¸åº”çš„pipelineä¸­,æ³¨æ„çš„æ˜¯æœ‰äº›æ‰©å±•è¿˜ä¾èµ–ä¸€äº›æ•°æ®åº“è¡¨, è¿™äº›è¡¨é»˜è®¤å®‰è£…æ˜¯ä¸ä¼šç”Ÿæˆçš„, éœ€è¦ç”¨keystone-manage å‘½ä»¤é¢å¤–åˆå§‹åŒ–.
æ¯”å¦‚è¦å¯ç”¨oauth1æ‰©å±•, æ­¤æ‰©å±•æœ‰è‡ªå·±çš„æ•°æ®åº“è¡¨:
oauth1åœ¨keystone-paste.iniä¸­çš„å®šä¹‰ä¸º[filter:oauth1_extension], å°†å…¶åŠ å…¥[pipeline:api_v3], é¡ºåºæœ€å¥½æ”¾åœ¨service_v3ä¹‹å‰. PS: æœ‰äº›æ‰©å±•åªæ”¯æŒv2.0 api,æœ‰äº›åªæ”¯æŒv3 api,å®é™…æƒ…å†µå¯ä»¥æŸ¥çœ‹å®ƒä»¬çš„å®ç°,æ¯”å¦‚oauth1: keystone.contrib.oauth1.controllers, å…¶ä¸­æ‰€æœ‰çš„controlleréƒ½æ˜¯ç»§æ‰¿è‡ªV3Controller, åˆ™æ­¤apiåªèƒ½åœ¨v3ä¸‹ä½¿ç”¨. keystone-manage â€“config-file etc/keystone.conf db_sync â€“extension oauth1 æ¥ä¸‹æ¥å³å¯ä½¿ç”¨oauth1æ‰©å±•å®šä¹‰çš„apiäº†.&lt;/p&gt;

&lt;h2 id=&quot;section-9&quot;&gt;å‚è€ƒæ–‡æ¡£&lt;/h2&gt;

&lt;p&gt;http://docs.openstack.org/developer/keystone/
http://docs.openstack.org/developer/keystone/architecture.html#application-construction
http://docs.openstack.org/developer/keystone/installing.html
http://docs.openstack.org/developer/keystone/developing.html
http://www.ibm.com/developerworks/cn/cloud/library/cl-openstack-keystone/index.html
https://www.ibm.com/developerworks/cn/cloud/library/cl-openstack-pythonapis/
http://www.cnblogs.com/sammyliu/p/4272611.html
http://blog.csdn.net/hzrandd/article/details/10834381&lt;/p&gt;

</description>
        <pubDate>Sun, 24 Apr 2016 17:00:13 +0800</pubDate>
        <link>http://www.pisces.ml/articles/openstack/20160425</link>
        <guid isPermaLink="true">http://www.pisces.ml/articles/openstack/20160425</guid>
        
        
        <category>openstack</category>
        
      </item>
    
      <item>
        <title>linuxç—…æ¯’æ‰«æè½¯ä»¶ClamAVå®‰è£…äºä½¿ç”¨</title>
        <description>&lt;p&gt;è¿‘æœŸå®‰è£…çš„å‡ å°è™šæ‹Ÿæœºç½‘ç»œå‡ºå»æµé‡é«˜çš„æƒŠäººï¼Œè¾¾åˆ°400~600M/sï¼Œç›´æ¥å¯¼è‡´ç½‘ç»œå‡ ä¹ç˜«ç—ªã€‚ç›´æ¥å¯¼è‡´è¿œç¨‹è¿æ¥ä¸ä¸Šä¸»æœºï¼Œç½‘ç»œå»¶è¿Ÿç‰¹åˆ«é«˜ã€‚æŸ¥è¯¢åŸå› å‘ç°åå°æœ‰ä¸€ä¸ªè¿›ç¨‹æ¶ˆè€—ä¸€åŠcpuï¼Œå¹¶ä¸”è¯¥è¿›ç¨‹æ€æ­»ååˆä¼šè‡ªåŠ¨å¯åŠ¨å¦å¤–ä¸€ä¸ªè¿›ç¨‹ï¼Œæ— æ³•æ€æ‰ã€‚å½“æ–­æ‰å…¬ç½‘ipåå°±èƒ½killæ‰è¯¥è¿›ç¨‹ï¼Œä¸”ä¸ä¼šå†è‡ªåŠ¨å¯åŠ¨ã€‚ä¸”è¯¥å±€åŸŸç½‘ä¸­æ‰€æœ‰ä¸»æœºå‡å‡ºç°è¯¥çŠ¶å†µï¼Œ
æ ¹æ®è¯¥ç°è±¡æœ‰å¯èƒ½æ˜¯ddosæ”»å‡»å¯¼è‡´ã€‚äºæ˜¯ä¸Šç½‘æŸ¥äº†ä¸€äº›æ€æ¯’è½¯ä»¶ï¼Œè¯•å›¾killæ‰è¯¥ç—…æ¯’ã€‚ç½‘ä¸ŠæŸ¥è¯¢åˆ°äº†ä¸€æ¬¾ubuntuä¸Šçš„å¼€æºæ€æ¯’è½¯ä»¶ï¼Œå°è¯•äº†ä»¥ä¸‹æœç„¶æœ‰æ•ˆæœã€‚ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»ä¸‹è¿™æ¬¾è½¯ä»¶clamAVï¼Œå°è¯•äº†ä»¥ä¸‹æœç„¶æœ‰æ•ˆæœã€‚ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»ä¸‹è¿™æ¬¾è½¯ä»¶clamAVã€‚&lt;/p&gt;

&lt;h2 id=&quot;clamav&quot;&gt;ä»€ä¹ˆæ˜¯clamAV&lt;/h2&gt;

&lt;p&gt;clamAVå…¨åClam AntiVirusï¼Œæ˜¯ä¸€æ¬¾å¼€æºçš„æ€æ¯’è½¯ä»¶ï¼Œèƒ½å¤Ÿé¢„é˜²è®¸å¤šçš„æ¶æ„è½¯ä»¶ä¸»è¦åº”ç”¨äºé‚®ä»¶æœåŠ¡å™¨ã€‚æ‰«æå¹¶æ¸…ç†ç³»ç»Ÿä¸­çš„æ¶æ„è½¯ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;clamAVåŒ…å«äº†å¤§é‡çš„å®ç”¨ç¨‹åºå¦‚ï¼šå‘½ä»¤è¡Œæ‰«æï¼Œè‡ªåŠ¨è·Ÿæ–°æ•°æ®åº“å’Œå¯æ‰©å±•å¤šçº¿ç¨‹å®ˆæŠ¤è¿›ç¨‹ï¼Œä»¥åŠåç—…æ¯’å¼•æ“ã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥ä»‹ç»ä¸‹clamAVçš„å®‰è£…å’Œä½¿ç”¨ã€‚&lt;/p&gt;

&lt;h2 id=&quot;section&quot;&gt;å®‰è£…ï¼†é…ç½®&lt;/h2&gt;

&lt;p&gt;1.å®‰è£…è½¯ä»¶åŒ…&lt;/p&gt;

&lt;p&gt;clamAVå®‰è£…æ–¹æ³•æœ‰å¾ˆå¤šå¯ä»¥ç›´æ¥å»å®˜ç½‘&lt;a href=&quot;http://www.clamav.net/download.html&quot;&gt;ä¸‹è½½&lt;/a&gt;å¹¶è¿›è¡Œå®‰è£…ï¼Œä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬å¯ä»¥ç›´æ¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç›´æ¥åœ¨ubuntuç³»ç»Ÿä¸­å®‰è£…è¯¥è½¯ä»¶åŒ…ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# å¦‚æœå®‰è£…ä¸äº†æˆ‘ä»¬å¯ä»¥å…ˆæ›´æ–°ä¸‹è½¯ä»¶æº`apt-get update`
sudo apt-get install clamav clamav-daemon
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;2.æ›´æ–°ç—…æ¯’æ•°æ®åº“&lt;/p&gt;

&lt;p&gt;å®‰è£…å®ŒæˆåclamAVä¼šæç¤ºä½ å®‰è£…ç—…æ¯’æ•°æ®åº“ï¼ŒclamAVä¼šæ ¹æ®æ•°æ®åº“ä¸­æä¾›çš„æ•°æ®å¯¹ç³»ç»Ÿè¿›è¡Œæœç´¢æŸ¥è¯¢ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥åŒæ­¥è¿œç¨‹ç—…æ¯’æ•°æ®åº“,è¯¥å‘½ä»¤ä¼šä¸‹è½½main.cvdå’Œdaily.cvdæ–‡ä»¶ã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo freshclam
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;clamav-1&quot;&gt;clamAVä½¿ç”¨&lt;/h2&gt;

&lt;p&gt;å®‰è£…å¾ˆç®€å•ï¼Œä½¿ç”¨æ›´ç®€å•ï¼Œå°±ä¸€ä¸ª&lt;code class=&quot;highlighter-rouge&quot;&gt;clamscan&lt;/code&gt;å‘½ä»¤å³å¯ã€‚ç¤ºä¾‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# æ‰«æ/homeç›®å½•ä¸‹çš„æ–‡ä»¶
clamscan -r /home

# å…¨ç›˜æ‰«æ(è¯¥å‘½ä»¤å¯èƒ½æ‰§è¡Œæ—¶é—´æ¯”è¾ƒé•¿)
clamscan -r /

# æ ¼å¼åŒ–è¾“å‡ºï¼Œåªè¾“å‡ºæ˜¾ç¤ºç—…æ¯’æ–‡ä»¶æˆ–è€…æ˜¯æ¶æ„è¿›ç¨‹
clamscan -r --bell -i /

# æŸ¥è¯¢ä»»æ„ä½ç½®ï¼Œå¹¶å°†ç»“æœå†™å…¥æ–°æ–‡ä»¶è®°å½•
sudo clamscan -r /folder/to/scan/ | grep FOUND &amp;gt;&amp;gt; /path/to/save/report/myfile.txt
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¦‚ä¸Šå‘½ä»¤ä¼šæ‰«æç›®å½•ï¼Œå¦‚æœå‘ç°æ¶æ„è½¯ä»¶æˆ–è€…ç—…æ¯’æ–‡ä»¶ä¼šè‡ªåŠ¨æ¸…ç†&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬è¿˜å¯ä»¥ä¸ºclamAVå»ºç«‹å®šæ—¶ä»»åŠ¡æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;crontab -e
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¹¶åœ¨å®šæ—¶ä»»åŠ¡ä¸­å†™å…¥å¦‚ä¸‹ä»»åŠ¡&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;00 00 * * * clamscan -r /location_of_files_or_folder # æ ¹æ®å®é™…æŒ‡å®šæœç´¢æ–‡ä»¶å¤¹
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¦å¤–å¦‚æœä½ ä¸ä¹ æƒ¯ä½¿ç”¨å‘½ä»¤è¡Œï¼Œè¿˜å¯ä»¥ä½¿ç”¨clamAVçš„GUIç•Œé¢ï¼Œéœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…GUI&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo apt-get install ClamTK
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
        <pubDate>Sun, 27 Mar 2016 17:00:13 +0800</pubDate>
        <link>http://www.pisces.ml/articles/linux/2016328</link>
        <guid isPermaLink="true">http://www.pisces.ml/articles/linux/2016328</guid>
        
        
        <category>linux</category>
        
      </item>
    
      <item>
        <title>openstack å¤šèŠ‚ç‚¹å®‰è£…</title>
        <description>&lt;p&gt;æœ¬æ–‡è®°å½•åŒèŠ‚ç‚¹openstackéƒ¨ç½²æµç¨‹,æ ¹æ®&lt;a href=&quot;http://docs.openstack.org/liberty/install-guide-ubuntu/&quot;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;,ä¸€æ­¥ä¸€æ­¥æ­å»ºopenstack,å¹¶ä¸”è®°å½•æ­å»ºè¿‡ç¨‹é‡åˆ°çš„å‘ã€‚&lt;/p&gt;

&lt;h2 id=&quot;section&quot;&gt;æ¦‚è¦&lt;/h2&gt;

&lt;p&gt;openstackæ˜¯ä¸€ä¸ªå¼€æºç¤¾åŒºï¼Œæä¾›IAASè§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬é¦–å…ˆæ¥äº†è§£ä¸‹åŸºç¡€æœåŠ¡ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://docs.openstack.org/developer/horizon/&quot;&gt;Horizon&lt;/a&gt;:é¢æ¿æœåŠ¡ï¼Œç›´æ¥é¢å‘ç”¨æˆ·ï¼Œä¸ºç”¨æˆ·æä¾›å¯è§†æ“ä½œã€‚&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://docs.openstack.org/developer/nova/&quot;&gt;Nova&lt;/a&gt;:è®¡ç®—æœåŠ¡ï¼Œæä¾›è®¡ç®—æœºç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œå¦‚æ–°å»ºè™šæ‹Ÿæœºç­‰ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://docs.openstack.org/developer/neutron/&quot;&gt;Neutron&lt;/a&gt;:ç½‘ç»œæœåŠ¡ï¼Œæä¾›äº‘è®¡ç®—ç¯å¢ƒä¸‹çš„è™šæ‹Ÿç½‘ç»œåŠŸèƒ½ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://docs.openstack.org/developer/keystone/&quot;&gt;Keystone&lt;/a&gt;:è®¤è¯æœåŠ¡ï¼Œæä¾›ç”¨æˆ·è®¤è¯ä»¥åŠopenstackä¸­æœåŠ¡è®¤è¯ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://docs.openstack.org/developer/glance/&quot;&gt;Glance&lt;/a&gt;:é•œåƒæœåŠ¡ï¼Œæä¾›é•œåƒå­˜å‚¨ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://docs.openstack.org/developer/ceilometer/&quot;&gt;Ceilometer&lt;/a&gt;:ç›‘æ§æœåŠ¡ï¼Œè´Ÿè´£èµ„æºç›‘æ§å®æ—¶äº†è§£èµ„æºæƒ…å†µã€‚&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://docs.openstack.org/developer/swift/&quot;&gt;Swift&lt;/a&gt;:å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œæä¾›å¤šç§Ÿæˆ·çš„å¯¹è±¡å­˜å‚¨ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://docs.openstack.org/developer/cinder/&quot;&gt;Cinder&lt;/a&gt;:å—å­˜å‚¨æœåŠ¡ï¼Œæä¾›å—å­˜å‚¨ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-1&quot;&gt;éƒ¨ç½²æ¶æ„&lt;/h2&gt;

&lt;h3 id=&quot;section-2&quot;&gt;ç¡¬ä»¶æ¶æ„&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;http://www.pisces.ml/images/hwreqs.png&quot; alt=&quot;éƒ¨ç½²ç»“æ„å›¾&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¸¸è§„éƒ¨ç½²ä¸»è¦æœ‰åˆ†ä¸ºæ§åˆ¶èŠ‚ç‚¹ï¼Œè®¡ç®—èŠ‚ç‚¹ï¼Œç½‘ç»œèŠ‚ç‚¹ã€‚æˆ‘ä»¬ä»¥æœ€ç®€æ–¹å¼éƒ¨ç½²ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºä½¿ç”¨ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œæ§åˆ¶èŠ‚ç‚¹å’Œè®¡ç®—èŠ‚ç‚¹ï¼Œæˆ‘ä»¬ä¸å•ç‹¬éƒ¨ç½²ç½‘ç»œèŠ‚ç‚¹å°†ç½‘ç»œagentéƒ¨ç½²åœ¨æ§åˆ¶èŠ‚ç‚¹ä¸å•ç‹¬éƒ¨ç½²åœ¨ç½‘ç»œèŠ‚ç‚¹ã€‚å¦å¤–é…ç½®è‡³å°‘å¦‚ä¸Šè¦æ±‚æ‰€ç¤ºã€‚&lt;/p&gt;

&lt;h3 id=&quot;section-3&quot;&gt;è½¯ä»¶æ¶æ„&lt;/h3&gt;

&lt;p&gt;1.è½¯ä»¶éƒ¨ç½²æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://www.pisces.ml/images/network2-services.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ§åˆ¶èŠ‚ç‚¹&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ§åˆ¶èŠ‚ç‚¹ä¸»è¦éƒ¨ç½²openstackåŸºç¡€æœåŠ¡å¦‚ï¼škeystone,horizon,Neutronç­‰ï¼Œä»¥åŠåŸºç¡€æœåŠ¡çš„æ”¯æŒæœåŠ¡ï¼Œå¦‚ï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼ŒNTPï¼Œmysqlç­‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;è®¡ç®—èŠ‚ç‚¹&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;è®¡ç®—èŠ‚ç‚¹ä¸»è¦éƒ¨ç½²hypervisorï¼Œæ ¹æ®novaè°ƒåº¦ç®—æ³•åˆ›å»ºå®ä¾‹ï¼Œä»¥åŠç½‘ç»œæœåŠ¡ã€‚&lt;/p&gt;

&lt;p&gt;2.ç½‘ç»œæ‹“æ‰‘æ¶æ„å›¾ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://www.pisces.ml/images/networklayout.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;section-4&quot;&gt;ç¯å¢ƒå‡†å¤‡&lt;/h2&gt;

&lt;h3 id=&quot;section-5&quot;&gt;åŸºç¡€ç¯å¢ƒæ­å»º&lt;/h3&gt;

&lt;p&gt;ä»¥ä¸‹ç¯å¢ƒæ­å»ºåœ¨é€šè¿‡&lt;a href=&quot;https://console.ustack.com&quot;&gt;ustack&lt;/a&gt;äº‘å¹³å°è¿›è¡Œæ­å»ºï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;æ–°å»ºè·¯ç”±å™¨route0&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;åˆ›å»ºç§æœ‰ç½‘ç»œpublic-networkå’Œmanagement-network&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ç”³è¯·åä¸ºnetçš„å…¬ç½‘å¹¶ä¸”ç»‘å®šåˆ°è·¯ç”±å™¨route&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;å°†ç§æœ‰ç½‘ç»œpublic-networkå…³è”åˆ°è·¯ç”±å™¨route&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;åˆ›å»ºæ§åˆ¶èŠ‚ç‚¹controller(2vcpu,8G)å’Œè®¡ç®—èŠ‚ç‚¹compute(4vcpu,8G),å°†controlleråŠ å…¥ç§æœ‰ç½‘ç»œpublic-network,å°†computeåŠ å…¥ç§æœ‰ç½‘ç»œpublic-networkå’Œmanagement-network&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ­å»ºå®Œæˆåç½‘ç»œæ‹“æ‰‘å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://www.pisces.ml/images/topology.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;host&quot;&gt;é…ç½®host&lt;/h3&gt;

&lt;p&gt;æ¥ç€æˆ‘ä»¬æ¥é…ç½®æ§åˆ¶èŠ‚ç‚¹å’Œè®¡ç®—å‡ ç‚¹host&lt;/p&gt;

&lt;p&gt;ä¿®æ”¹æ–‡ä»¶/etc/hosts,å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# æ§åˆ¶èŠ‚ç‚¹ç¼–è¾‘æ–‡ä»¶/etc/hosts

192.168.2.2 controller
192.168.2.5 compute

# è®¡ç®—èŠ‚ç‚¹åŒä¸Šæ“ä½œ
192.168.2.2 controller
192.168.2.5 compute
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤åœ¨æ§åˆ¶èŠ‚ç‚¹å’Œè®¡ç®—èŠ‚ç‚¹éªŒè¯æ˜¯å¦é…ç½®æ­£ç¡®ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;root@compute:~# ping controller
PING controller (192.168.2.2) 56(84) bytes of data.
64 bytes from controller (192.168.2.2): icmp_seq=1 ttl=64 time=0.407 ms
64 bytes from controller (192.168.2.2): icmp_seq=2 ttl=64 time=0.508 ms
64 bytes from controller (192.168.2.2): icmp_seq=3 ttl=64 time=0.571 ms&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;root@compute:~# ping -c 4 openstack.org
PING openstack.org (162.242.140.107) 56(84) bytes of data.
64 bytes from 162.242.140.107: icmp_seq=1 ttl=42 time=386 ms
64 bytes from 162.242.140.107: icmp_seq=2 ttl=42 time=384 ms
64 bytes from 162.242.140.107: icmp_seq=3 ttl=42 time=386 ms&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;section-6&quot;&gt;å®‰è£…æ”¯æŒè½¯ä»¶&lt;/h3&gt;

&lt;h4 id=&quot;ntp&quot;&gt;å®‰è£…NTPæœåŠ¡&lt;/h4&gt;

&lt;p&gt;æ§åˆ¶èŠ‚ç‚¹controllerï¼š&lt;/p&gt;

&lt;p&gt;1.å®‰è£…chronyåŒ…&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;apt-get install chrony
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;2.ç¼–è¾‘æ–‡ä»¶/etc/chrony/chrony.confæ’å…¥ä»¥ä¸‹å†…å®¹&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ä»¥asia.pool.ntp.orgæ—¶é—´ä¸ºä¾‹
server asia.pool.ntp.org iburst
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;3.é‡å¯NTPæœåŠ¡&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;service chrony restart
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è®¡ç®—èŠ‚ç‚¹computeï¼š&lt;/p&gt;

&lt;p&gt;å®‰è£…æ­¥éª¤è·Ÿæ§åˆ¶èŠ‚ç‚¹ä¸€æ ·ï¼Œåœ¨ç¼–è¾‘/etc/chrony/chrony.confæ–‡ä»¶æ—¶éœ€è¦æ’å…¥ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# è¡¨ç¤ºè·ŸcontrollerèŠ‚ç‚¹æ—¶é—´åŒæ­¥
server controller iburst
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;éªŒè¯ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# *è¡¨ç¤ºå½“å‰æ‰€ç”¨çš„æ—¶é—´
# æ§åˆ¶èŠ‚ç‚¹
root@controller:~# chronyc sources
210 Number of sources = 1
MS Name/IP address         Stratum Poll Reach LastRx Last sample
===============================================================================
^* host-2.net50.sol.az           4   6   177    55  +3003us[ +313us] +/-  694ms

# è®¡ç®—èŠ‚ç‚¹
root@compute:~# chronyc sources
210 Number of sources = 1
MS Name/IP address         Stratum Poll Reach LastRx Last sample
===============================================================================
^* controller                    5   6   377    36  +4607us[  +27ms] +/-  734ms
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;openstack&quot;&gt;å®‰è£…openstackè½¯ä»¶åŒ…æ”¯æŒ&lt;/h4&gt;

&lt;p&gt;è¯¥æ“ä½œåœ¨æ‰€æœ‰èŠ‚ç‚¹å‡æ‰§è¡Œ&lt;/p&gt;

&lt;p&gt;ä¿®æ”¹æ–‡ä»¶/etc/apt/sources.listï¼Œå¢åŠ ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;deb http://ubuntu-cloud.archive.canonical.com/ubuntu trusty-updates/liberty main&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ‰§è¡Œå‘½ä»¤ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;apt-get update &amp;amp;&amp;amp; apt-get dist-upgrade
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¦‚æœå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;error:
W: GPG error: http://ubuntu-cloud.archive.canonical.com trusty-updates/liberty Release: The following signatures couldnâ€™t be verified because the public key is not available: NO_PUBKEY 5EDB1B62EC4926EA
æ‰§è¡Œå‘½ä»¤&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 5EDB1B62EC4926EA&lt;/code&gt;ååœ¨è¿è¡Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;apt-get update &amp;amp;&amp;amp; apt-get dist-upgrade&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&quot;sql&quot;&gt;å®‰è£…SQLæ•°æ®åº“&lt;/h4&gt;

&lt;p&gt;åœ¨æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼š&lt;/p&gt;

&lt;p&gt;1.å®‰è£…sqlåŒ…,å¹¶ä¸”è®¾ç½®rootç”¨æˆ·å¯†ç &lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;apt-get install mariadb-server python-pymysql
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;2.ä¿®æ”¹æ–‡ä»¶/etc/mysql/my.cnfå¹¶æ·»åŠ å¦‚ä¸‹å†…å®¹å…è®¸æ‰€æœ‰èŠ‚ç‚¹è¯·æ±‚ã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[mysqld]
bind-address = 0.0.0.0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;3.é‡å¯sqlæœåŠ¡&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;service mysql restart
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;rabbitmq&quot;&gt;å®‰è£…æ¶ˆæ¯é˜Ÿåˆ—rabbitmq&lt;/h4&gt;

&lt;p&gt;1.å®‰è£…rabbitmqè½¯ä»¶åŒ…&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;apt-get install rabbitmq-server
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;2.æ·»åŠ openstackç”¨æˆ·&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rabbitmqctl add_user openstack root
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;3.ç»™openstackç”¨æˆ·æ·»åŠ è¯»å†™æƒé™&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rabbitmqctl set_permissions openstack &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;openstack-1&quot;&gt;å®‰è£…openstackè½¯ä»¶&lt;/h2&gt;

&lt;h3 id=&quot;keystone&quot;&gt;å®‰è£…keystone&lt;/h3&gt;

&lt;h4 id=&quot;keystone-1&quot;&gt;åˆ›å»ºkeystoneæ•°æ®åº“&lt;/h4&gt;

&lt;p&gt;åˆ›å»ºkeystoneæ•°æ®åº“ä»¥åŠç”Ÿæˆadmin token&lt;/p&gt;

&lt;p&gt;1.ç™»å…¥æ•°æ®åº“&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mysql -uroot
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;2.åˆ›å»ºkeystoneæ•°æ®åº“&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CREATE DATABASE keystone;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;3.æ·»åŠ æ•°æ®åº“è®¿é—®æƒé™&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;GRANT ALL PRIVILEGES ON keystone.* TO &#39;keystone&#39;@&#39;localhost&#39; \
  IDENTIFIED BY &#39;root&#39;;
GRANT ALL PRIVILEGES ON keystone.* TO &#39;keystone&#39;@&#39;%&#39; \
  IDENTIFIED BY &#39;root&#39;;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;admin-token&quot;&gt;éšæœºç”Ÿæˆadmin token&lt;/h4&gt;

&lt;p&gt;æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆadmin tokenä»¥ä¾¿åç»­æ­¥éª¤ä½¿ç”¨&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@controller:~# openssl rand -hex 10
e770648f049dd983575b
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;keystone-2&quot;&gt;å®‰è£…keystoneæœåŠ¡&lt;/h4&gt;

&lt;p&gt;1.ä»æºå®‰è£…keystone&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ç¦æ­¢å®‰è£…å®Œåå¯åŠ¨æœåŠ¡
echo &quot;manual&quot; &amp;gt; /etc/init/keystone.override

apt-get install keystone apache2 libapache2-mod-wsgi \
  memcached python-memcache
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;2.é…ç½®keystoneé…ç½®æ–‡ä»¶/etc/keystone/keystone.conf,ä¿®æ”¹ä»¥ä¸‹é…ç½®&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[DEFAULT]
...
admin_token = e770648f049dd983575b

[database]
...
connection = mysql://keystone:root@controller/keystone?charset=utf8

[memcache]
...
servers = localhost:11211

[token]
...
provider = uuid
driver = memcache

[revoke]
...
driver = sql

[DEFAULT]
...
verbose = True
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;3.åŒæ­¥æ•°æ®åº“&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;su -s /bin/sh -c &quot;keystone-manage db_sync&quot; keystone
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;apache&quot;&gt;é…ç½®apacheæœåŠ¡å™¨&lt;/h4&gt;

&lt;p&gt;1.ç¼–è¾‘æ–‡ä»¶/etc/apache2/apache2.confä¿®æ”¹Servername&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ServerName controller
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;2.åˆ›å»ºæ–‡ä»¶/etc/apache2/sites-available/wsgi-keystone.confï¼Œå¹¶æ·»åŠ å¦‚ä¸‹å†…å®¹&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Listen 5000
Listen 35357

&amp;lt;VirtualHost *:5000&amp;gt;
    WSGIDaemonProcess keystone-public processes=5 threads=1 user=keystone group=keystone display-name=%{GROUP}
    WSGIProcessGroup keystone-public
    WSGIScriptAlias / /usr/bin/keystone-wsgi-public
    WSGIApplicationGroup %{GLOBAL}
    WSGIPassAuthorization On
    &amp;lt;IfVersion &amp;gt;= 2.4&amp;gt;
      ErrorLogFormat &quot;%{cu}t %M&quot;
    &amp;lt;/IfVersion&amp;gt;
    ErrorLog /var/log/apache2/keystone.log
    CustomLog /var/log/apache2/keystone_access.log combined

    &amp;lt;Directory /usr/bin&amp;gt;
        &amp;lt;IfVersion &amp;gt;= 2.4&amp;gt;
            Require all granted
        &amp;lt;/IfVersion&amp;gt;
        &amp;lt;IfVersion &amp;lt; 2.4&amp;gt;
            Order allow,deny
            Allow from all
        &amp;lt;/IfVersion&amp;gt;
    &amp;lt;/Directory&amp;gt;
&amp;lt;/VirtualHost&amp;gt;

&amp;lt;VirtualHost *:35357&amp;gt;
    WSGIDaemonProcess keystone-admin processes=5 threads=1 user=keystone group=keystone display-name=%{GROUP}
    WSGIProcessGroup keystone-admin
    WSGIScriptAlias / /usr/bin/keystone-wsgi-admin
    WSGIApplicationGroup %{GLOBAL}
    WSGIPassAuthorization On
    &amp;lt;IfVersion &amp;gt;= 2.4&amp;gt;
      ErrorLogFormat &quot;%{cu}t %M&quot;
    &amp;lt;/IfVersion&amp;gt;
    ErrorLog /var/log/apache2/keystone.log
    CustomLog /var/log/apache2/keystone_access.log combined

    &amp;lt;Directory /usr/bin&amp;gt;
        &amp;lt;IfVersion &amp;gt;= 2.4&amp;gt;
            Require all granted
        &amp;lt;/IfVersion&amp;gt;
        &amp;lt;IfVersion &amp;lt; 2.4&amp;gt;
            Order allow,deny
            Allow from all
        &amp;lt;/IfVersion&amp;gt;
    &amp;lt;/Directory&amp;gt;
&amp;lt;/VirtualHost&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;3.å…è®¸åŠ è½½keystoneæœåŠ¡å¹¶é‡å¯apacheæœåŠ¡å™¨&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ln -s /etc/apache2/sites-available/wsgi-keystone.conf /etc/apache2/sites-enabled

service apache2 restart
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;service-entityapi-endpoints&quot;&gt;åˆ›å»ºservice entityå’ŒAPI endpoints&lt;/h4&gt;

&lt;p&gt;1.é…ç½®è®¤è¯ä¿¡æ¯&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;export OS_TOKEN=e770648f049dd983575b
export OS_URL=http://controller:35357/v3
export OS_IDENTITY_API_VERSION=3
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;2.åˆ›å»ºkeystoneæœåŠ¡&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@controller:~# openstack service create \
&amp;gt;   --name keystone --description &quot;OpenStack Identity&quot; identity
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | OpenStack Identity               |
| enabled     | True                             |
| id          | 70c001520bc346f5a24cbce02251edc0 |
| name        | keystone                         |
| type        | identity                         |
+-------------+----------------------------------+
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;3.åˆ›å»ºendpoints&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@controller:~# openstack endpoint create --region RegionOne \
&amp;gt;   identity public http://controller:5000/v2.0
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | 20ff23f26e9044bab521cf3aa449107c |
| interface    | public                           |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 70c001520bc346f5a24cbce02251edc0 |
| service_name | keystone                         |
| service_type | identity                         |
| url          | http://controller:5000/v2.0      |
+--------------+----------------------------------+

root@controller:~# openstack endpoint create --region RegionOne \
&amp;gt;   identity internal http://controller:5000/v2.0
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | 2f61696b382f4d18be1dbf26958affc9 |
| interface    | internal                         |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 70c001520bc346f5a24cbce02251edc0 |
| service_name | keystone                         |
| service_type | identity                         |
| url          | http://controller:5000/v2.0      |
+--------------+----------------------------------+

root@controller:~# openstack endpoint create --region RegionOne \
&amp;gt;   identity admin http://controller:35357/v2.0
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | cce98996793948f8841e9e809c1fcce0 |
| interface    | admin                            |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 70c001520bc346f5a24cbce02251edc0 |
| service_name | keystone                         |
| service_type | identity                         |
| url          | http://controller:35357/v2.0     |
+--------------+----------------------------------+
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;projects-users-and-roles&quot;&gt;åˆ›å»ºprojects, users, and roles&lt;/h4&gt;

&lt;p&gt;1.åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# åˆ›å»ºç®¡ç†å‘˜é¡¹ç›®
root@controller:~# openstack project create --domain default \
&amp;gt;   --description &quot;Admin Project&quot; admin
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | Admin Project                    |
| domain_id   | default                          |
| enabled     | True                             |
| id          | ae557b315d7c430c929f31b480084ada |
| is_domain   | False                            |
| name        | admin                            |
| parent_id   | None                             |
+-------------+----------------------------------+

# åˆ›å»ºadminè´¦æˆ·
root@controller:~# openstack user create --domain default \
&amp;gt;   --password-prompt admin
User Password:
Repeat User Password:
+-----------+----------------------------------+
| Field     | Value                            |
+-----------+----------------------------------+
| domain_id | default                          |
| enabled   | True                             |
| id        | 59a21d5fea5a42908d5911635eb92742 |
| name      | admin                            |
+-----------+----------------------------------+

# åˆ›å»ºadminè§’è‰²
root@controller:~# openstack role create admin
+-------+----------------------------------+
| Field | Value                            |
+-------+----------------------------------+
| id    | 28754433fefd4572be420fcf91be7788 |
| name  | admin                            |
+-------+----------------------------------+

# æ·»åŠ æƒé™
root@controller:~# openstack role add --project admin --user admin admin
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;2.åˆ›å»ºserviceé¡¹ç›®&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@controller:~# openstack project create --domain default \
&amp;gt;   --description &quot;Service Project&quot; service
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | Service Project                  |
| domain_id   | default                          |
| enabled     | True                             |
| id          | c0f3b4ac140e4d98a4ec87adbfb54c60 |
| is_domain   | False                            |
| name        | service                          |
| parent_id   | None                             |
+-------------+----------------------------------+
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;3.åˆ›å»ºæ™®é€šç”¨æˆ·&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# åˆ›å»ºdemoé¡¹ç›®
root@controller:~# openstack project create --domain default \
&amp;gt;   --description &quot;Demo Project&quot; demo
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | Demo Project                     |
| domain_id   | default                          |
| enabled     | True                             |
| id          | 89149a8b334a4a05bf50772944d41dad |
| is_domain   | False                            |
| name        | demo                             |
| parent_id   | None                             |
+-------------+----------------------------------+

# åˆ›å»ºdemoç”¨æˆ·
root@controller:~# openstack user create --domain default \
&amp;gt;   --password-prompt demo
User Password:
Repeat User Password:
+-----------+----------------------------------+
| Field     | Value                            |
+-----------+----------------------------------+
| domain_id | default                          |
| enabled   | True                             |
| id        | c86e83459c21400c9092e4b68aac0e6e |
| name      | demo                             |
+-----------+----------------------------------+

# åˆ›å»ºuserè§’è‰²
root@controller:~# openstack role create user
+-------+----------------------------------+
| Field | Value                            |
+-------+----------------------------------+
| id    | 48b053ac809d48d58b0032e52be9d057 |
| name  | user                             |
+-------+----------------------------------+

# åˆ†é…è§’è‰²
root@controller:~# openstack role add --project demo --user demo user
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;section-7&quot;&gt;éªŒè¯é…ç½®&lt;/h4&gt;

&lt;p&gt;1.æ¸…é™¤åŸæœ‰ç¯å¢ƒå˜é‡&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;unset OS_TOKEN OS_URL
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;2.ä½¿ç”¨ç”¨æˆ·åå¯†ç è·å–token&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@controller:~#  openstack --os-auth-url http://controller:35357/v3 \
&amp;gt;   --os-project-domain-id default --os-user-domain-id default \
&amp;gt;   --os-project-name admin --os-username admin --os-auth-type password \
&amp;gt;   token issue
Password:
+------------+----------------------------------+
| Field      | Value                            |
+------------+----------------------------------+
| expires    | 2016-03-24T11:06:17.423633Z      |
| id         | d55f1ceaabf14b93aef5516c497c2d7e |
| project_id | ae557b315d7c430c929f31b480084ada |
| user_id    | 59a21d5fea5a42908d5911635eb92742 |
+------------+----------------------------------+
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;openstack-2&quot;&gt;åˆ›å»ºopenstackå‘½ä»¤è¡Œè¯ä¹¦æ–‡ä»¶&lt;/h4&gt;

&lt;p&gt;æ–°å»ºæ–‡ä»¶admin-openrc.shï¼Œå¹¶æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;export OS_PROJECT_DOMAIN_ID=default
export OS_USER_DOMAIN_ID=default
export OS_PROJECT_NAME=admin
export OS_TENANT_NAME=admin
export OS_USERNAME=admin
export OS_PASSWORD=root #æ ¹æ®å®é™…å¡«å†™
export OS_AUTH_URL=http://controller:35357/v3
export OS_IDENTITY_API_VERSION=3
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;glance&quot;&gt;å®‰è£…é•œåƒæœåŠ¡glance&lt;/h3&gt;

&lt;h4 id=&quot;section-8&quot;&gt;åŸºç¡€é…ç½®å‡†å¤‡&lt;/h4&gt;

&lt;p&gt;1.è¿›å…¥æ•°æ®åº“æœåŠ¡åˆ›å»ºglanceæ•°æ®åº“&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# åˆ›å»ºglanceæ•°æ®åº“
CREATE DATABASE glance;

åˆ†é…ç›¸åº”çš„è®¿é—®æƒé™
GRANT ALL PRIVILEGES ON glance.* TO &#39;glance&#39;@&#39;localhost&#39; \
  IDENTIFIED BY &#39;root&#39;;
GRANT ALL PRIVILEGES ON glance.* TO &#39;glance&#39;@&#39;%&#39; \
  IDENTIFIED BY &#39;root&#39;;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;2.sourceè¯ä¹¦æ–‡ä»¶admin-openrc.sh&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;root@controller:~# source admin-openrc.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;3.åœ¨keystoneä¸­åˆ›å»ºglanceç”¨æˆ·ä¿¡æ¯&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# åˆ›å»ºglanceç”¨æˆ·
root@controller:~# openstack user create --domain default --password-prompt glance
User Password:
Repeat User Password:
+-----------+----------------------------------+
| Field     | Value                            |
+-----------+----------------------------------+
| domain_id | default                          |
| enabled   | True                             |
| id        | dc680f9b12e44ebb93c91dfdeeabcb8f |
| name      | glance                           |
+-----------+----------------------------------+

# ä¸ºglanceç”¨æˆ·åœ¨serviceé¡¹ç›®æ·»åŠ adminæƒé™
root@controller:~# openstack role add --project service --user glance admin

# åˆ›å»ºglanceæœåŠ¡
root@controller:~# openstack service create --name glance \
&amp;gt;   --description &quot;OpenStack Image service&quot; image

+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | OpenStack Image service          |
| enabled     | True                             |
| id          | 0fc59e7791d9463085c7f84a39c1f3c8 |
| name        | glance                           |
| type        | image                            |
+-------------+----------------------------------+

# åˆ›å»ºé•œåƒæœåŠ¡endpoint
root@controller:~# openstack endpoint create --region RegionOne \
&amp;gt;   image public http://controller:9292
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | 9c34be6312974f9dabc8783816771103 |
| interface    | public                           |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 0fc59e7791d9463085c7f84a39c1f3c8 |
| service_name | glance                           |
| service_type | image                            |
| url          | http://controller:9292           |
+--------------+----------------------------------+

root@controller:~# openstack endpoint create --region RegionOne \
&amp;gt;   image internal http://controller:9292
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | a6f97076343248ec98ec7a800ec94577 |
| interface    | internal                         |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 0fc59e7791d9463085c7f84a39c1f3c8 |
| service_name | glance                           |
| service_type | image                            |
| url          | http://controller:9292           |
+--------------+----------------------------------+

root@controller:~#  openstack endpoint create --region RegionOne \
&amp;gt;   image admin http://controller:9292
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | e01dbccee82a406e8deaae02b6590b44 |
| interface    | admin                            |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 0fc59e7791d9463085c7f84a39c1f3c8 |
| service_name | glance                           |
| service_type | image                            |
| url          | http://controller:9292           |
+--------------+----------------------------------+
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;glance-1&quot;&gt;å®‰è£…é…ç½®glanceè½¯ä»¶åŒ…&lt;/h4&gt;

&lt;p&gt;1.å®‰è£…è½¯ä»¶åŒ…&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;apt-get install glance python-glanceclient
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;2.ä¿®æ”¹é…ç½®æ–‡ä»¶/etc/glance/glance-api.confå’Œ/etc/glance/glance-registry.conf&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ä¿®æ”¹æ–‡ä»¶/etc/glance/glance-api.conf
[database]
...
connection = mysql+pymysql://glance:GLANCE_DBPASS@controller/glance

[keystone_authtoken]
...
auth_uri = http://controller:5000
auth_url = http://controller:35357
auth_plugin = password
project_domain_id = default
user_domain_id = default
project_name = service
username = glance
password = root

[paste_deploy]
...
flavor = keystone

[glance_store]
...
default_store = file
filesystem_store_datadir = /var/lib/glance/images/

[DEFAULT]
...
notification_driver = noop
verbose = True

===============================================================

# ä¿®æ”¹é…ç½®æ–‡ä»¶/etc/glance/glance-registry.conf
[database]
...
connection = mysql+pymysql://glance:root@controller/glance

[keystone_authtoken]
...
auth_uri = http://controller:5000
auth_url = http://controller:35357
auth_plugin = password
project_domain_id = default
user_domain_id = default
project_name = service
username = glance
password = root

[paste_deploy]
...
flavor = keystone

[DEFAULT]
...
notification_driver = noop
verbose = True
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;3.åŒæ­¥glanceæ•°æ®åº“å¹¶é‡å¯æœåŠ¡&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# åŒæ­¥æ•°æ®åº“
su -s /bin/sh -c &quot;glance-manage db_sync&quot; glance
# é‡å¯æœåŠ¡
service glance-registry restart
service glance-api restart
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;p&lt;/p&gt;

&lt;h4 id=&quot;glance-2&quot;&gt;éªŒè¯glanceæœåŠ¡&lt;/h4&gt;

&lt;p&gt;1.å°†é•œåƒç‰ˆæœ¬ä¿¡æ¯å†™å…¥è¯ä¹¦æ–‡ä»¶admin-openrc.sh&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;echo &quot;export OS_IMAGE_API_VERSION=2&quot; \
  | tee -a admin-openrc.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;2.sourceæ–‡ä»¶admin-openrc.sh&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;source admin-openrc.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;3.ä¸‹è½½æµ‹è¯•é•œåƒ&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;wget http://download.cirros-cloud.net/0.3.4/cirros-0.3.4-x86_64-disk.img
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;4.åœ¨glanceåˆ›å»ºé•œåƒ&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# åˆ›å»ºé•œåƒ
root@controller:~# glance image-create --name &quot;cirros&quot; \
&amp;gt;   --file cirros-0.3.4-x86_64-disk.img \
&amp;gt;   --disk-format qcow2 --container-format bare \
&amp;gt;   --visibility public --progress
[=============================&amp;gt;] 100%
+------------------+--------------------------------------+
| Property         | Value                                |
+------------------+--------------------------------------+
| checksum         | ee1eca47dc88f4879d8a229cc70a07c6     |
| container_format | bare                                 |
| created_at       | 2016-03-25T06:23:07Z                 |
| disk_format      | qcow2                                |
| id               | 67cfd037-5704-4432-9b2c-cf5fffdb6319 |
| min_disk         | 0                                    |
| min_ram          | 0                                    |
| name             | cirros                               |
| owner            | ae557b315d7c430c929f31b480084ada     |
| protected        | False                                |
| size             | 13287936                             |
| status           | active                               |
| tags             | []                                   |
| updated_at       | 2016-03-25T06:23:08Z                 |
| virtual_size     | None                                 |
| visibility       | public                               |
+------------------+--------------------------------------+
]]

# æŸ¥çœ‹é•œåƒ
root@controller:~# glance image-list
+--------------------------------------+--------+
| ID                                   | Name   |
+--------------------------------------+--------+
| 67cfd037-5704-4432-9b2c-cf5fffdb6319 | cirros |
+--------------------------------------+--------+
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;nova&quot;&gt;å®‰è£…è®¡ç®—æœåŠ¡Nova&lt;/h3&gt;

&lt;h4 id=&quot;section-9&quot;&gt;å®‰è£…æ§åˆ¶èŠ‚ç‚¹&lt;/h4&gt;

&lt;h5 id=&quot;section-10&quot;&gt;å‰æœŸå‡†å¤‡&lt;/h5&gt;

&lt;p&gt;1.åˆ›å»ºnovaæ•°æ®åº“ï¼Œå¹¶åˆ†é…æƒé™&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# åˆ›å»ºæ•°æ®åº“
CREATE DATABASE nova;

# åˆ†é…è®¿é—®æƒé™
GRANT ALL PRIVILEGES ON nova.* TO &#39;nova&#39;@&#39;localhost&#39; \
  IDENTIFIED BY &#39;NOVA_DBPASS&#39;;
GRANT ALL PRIVILEGES ON nova.* TO &#39;nova&#39;@&#39;%&#39; \
  IDENTIFIED BY &#39;NOVA_DBPASS&#39;;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;2.åœ¨keystoneä¸­åˆ›å»ºnovaç”¨æˆ·,æœåŠ¡ä»¥åŠendpoint&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# åˆ›å»ºè´¦æˆ·
root@controller:~# openstack user create --domain default --password-prompt nova
User Password:
Repeat User Password:
+-----------+----------------------------------+
| Field     | Value                            |
+-----------+----------------------------------+
| domain_id | default                          |
| enabled   | True                             |
| id        | 77a5b14032ed484ebeefa981e1c0ac00 |
| name      | nova                             |
+-----------+----------------------------------+

# ç»™novaæ·»åŠ adminæƒé™
root@controller:~# openstack role add --project service --user nova admin

# åˆ›å»ºnovaæœåŠ¡
root@controller:~# openstack service create --name nova \
&amp;gt;   --description &quot;OpenStack Compute&quot; compute
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | OpenStack Compute                |
| enabled     | True                             |
| id          | 023a040a53b44ff69cb9d5d8f210323b |
| name        | nova                             |
| type        | compute                          |
+-------------+----------------------------------+

# æ·»åŠ endpoint
root@controller:~# openstack endpoint create --region RegionOne \
&amp;gt;   compute public http://controller:8774/v2/%\(tenant_id\)s
+--------------+-----------------------------------------+
| Field        | Value                                   |
+--------------+-----------------------------------------+
| enabled      | True                                    |
| id           | df485e2cbf9b414ab57be9d9a0d9b253        |
| interface    | public                                  |
| region       | RegionOne                               |
| region_id    | RegionOne                               |
| service_id   | 023a040a53b44ff69cb9d5d8f210323b        |
| service_name | nova                                    |
| service_type | compute                                 |
| url          | http://controller:8774/v2/%(tenant_id)s |
+--------------+-----------------------------------------+

root@controller:~# openstack endpoint create --region RegionOne \
&amp;gt;   compute internal http://controller:8774/v2/%\(tenant_id\)s
+--------------+-----------------------------------------+
| Field        | Value                                   |
+--------------+-----------------------------------------+
| enabled      | True                                    |
| id           | bf83399e62c0481593d3c923ddce2820        |
| interface    | internal                                |
| region       | RegionOne                               |
| region_id    | RegionOne                               |
| service_id   | 023a040a53b44ff69cb9d5d8f210323b        |
| service_name | nova                                    |
| service_type | compute                                 |
| url          | http://controller:8774/v2/%(tenant_id)s |
+--------------+-----------------------------------------+

root@controller:~# openstack endpoint create --region RegionOne \
&amp;gt;   compute admin http://controller:8774/v2/%\(tenant_id\)s
+--------------+-----------------------------------------+
| Field        | Value                                   |
+--------------+-----------------------------------------+
| enabled      | True                                    |
| id           | 1a3972fe66f243b08bbc5e98e27b3110        |
| interface    | admin                                   |
| region       | RegionOne                               |
| region_id    | RegionOne                               |
| service_id   | 023a040a53b44ff69cb9d5d8f210323b        |
| service_name | nova                                    |
| service_type | compute                                 |
| url          | http://controller:8774/v2/%(tenant_id)s |
+--------------+-----------------------------------------+
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h5 id=&quot;nova-1&quot;&gt;å®‰è£…novaè½¯ä»¶åŒ…å¹¶é…ç½®&lt;/h5&gt;

&lt;p&gt;1.å®‰è£…è½¯ä»¶åŒ…&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; apt-get install nova-api nova-cert nova-conductor \
   nova-consoleauth nova-novncproxy nova-scheduler \
     python-novaclient
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;2.ç¼–è¾‘é…ç½®æ–‡ä»¶/etc/nova/nova.conf ä¿®æ”¹ä»¥ä¸‹é…ç½®&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[database]
...
connection = mysql+pymysql://nova:root@controller/nova

[DEFAULT]
...
rpc_backend = rabbit

[oslo_messaging_rabbit]
...
rabbit_host = controller
rabbit_userid = openstack
rabbit_password = root
...
auth_strategy = keystone
...
my_ip = 192.168.2.2

...
network_api_class = nova.network.neutronv2.api.API
security_group_api = neutron
linuxnet_interface_driver = nova.network.linux_net.NeutronLinuxBridgeInterfaceDriver
firewall_driver = nova.virt.firewall.NoopFirewallDriver

...
enabled_apis=osapi_compute,metadata

...
verbose = True

[keystone_authtoken]
...
auth_uri = http://controller:5000
auth_url = http://controller:35357
auth_plugin = password
project_domain_id = default
user_domain_id = default
project_name = service
username = nova
password = root

[vnc]
...
vncserver_listen = $my_ip
vncserver_proxyclient_address = $my_ip

[glance]
...
host = controller

[oslo_concurrency]
...
lock_path = /var/lib/nova/tmp
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;3.åŒæ­¥æ•°æ®åº“&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;su -s /bin/sh -c &quot;nova-manage db sync&quot; nova
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;4.é‡å¯novaæœåŠ¡&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;service nova-api restart
service nova-cert restart
service nova-consoleauth restart
service nova-scheduler restart
service nova-conductor restart
service nova-novncproxy restart
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;section-11&quot;&gt;å®‰è£…è®¡ç®—èŠ‚ç‚¹&lt;/h3&gt;

&lt;p&gt;1.å®‰è£…è½¯ä»¶åŒ…&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;apt-get install nova-compute sysfsutils
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;2.ä¿®æ”¹é…ç½®æ–‡ä»¶/etc/nova/nova.conf&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[DEFAULT]
...
rpc_backend = rabbit
...
auth_strategy = keystone
...
my_ip = 192.168.2.2 # computeèŠ‚ç‚¹çš„ipåœ°å€
...
network_api_class = nova.network.neutronv2.api.API
security_group_api = neutron
linuxnet_interface_driver = nova.network.linux_net.NeutronLinuxBridgeInterfaceDriver
firewall_driver = nova.virt.firewall.NoopFirewallDriver
...
verbose = True

[oslo_messaging_rabbit]
...
rabbit_host = controller
rabbit_userid = openstack
rabbit_password = root

[keystone_authtoken]
...
auth_uri = http://controller:5000
auth_url = http://controller:35357
auth_plugin = password
project_domain_id = default
user_domain_id = default
project_name = service
username = nova
password = root

[vnc]
...
enabled = True
vncserver_listen = 0.0.0.0
vncserver_proxyclient_address = $my_ip
novncproxy_base_url = http://controller:6080/vnc_auto.html

[glance]
...
host = controller

[oslo_concurrency]
...
lock_path = /var/lib/nova/tmp
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;3.éªŒè¯æ˜¯å¦æ”¯æŒè™šæ‹ŸåŒ–&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¦‚æœè¿”å›ï¼åˆ™è¡¨ç¤ºä¸æ”¯æŒ
egrep -c &#39;(vmx|svm)&#39; /proc/cpuinfo

# æˆ‘ä»¬çš„ç¯å¢ƒæ˜¯åœ¨è™šæ‹ŸåŒ–ç¯å¢ƒä¸­æ‰€ä»¥è‚¯å®šä¸æ”¯æŒå†æ¬¡è™šæ‹ŸåŒ–ï¼Œæ‰€ä»¥éœ€è¦åœ¨/etc/nova/nova-compute.confä¸­åšå¦‚ä¸‹é…ç½®
[libvirt]
...
virt_type = qemu # å¦‚æœæ”¯æŒçš„è¯å¯ä»¥è®¾ç½®ä¸ºkvm
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;4.é‡å¯nova computeæœåŠ¡&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;service nova-compute restart
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;section-12&quot;&gt;éªŒè¯æœåŠ¡&lt;/h3&gt;

&lt;p&gt;åœ¨æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# åˆ—å‡ºnovaæ‰€æœ‰æœåŠ¡åˆ—è¡¨
root@controller:~# nova service-list
+----+------------------+------------+----------+---------+-------+----------------------------+-----------------+
| Id | Binary           | Host       | Zone     | Status  | State | Updated_at                 | Disabled Reason |
+----+------------------+------------+----------+---------+-------+----------------------------+-----------------+
| 1  | nova-cert        | controller | internal | enabled | up    | 2016-03-27T11:48:59.000000 | -               |
| 2  | nova-consoleauth | controller | internal | enabled | up    | 2016-03-27T11:48:59.000000 | -               |
| 3  | nova-conductor   | controller | internal | enabled | up    | 2016-03-27T11:48:59.000000 | -               |
| 4  | nova-scheduler   | controller | internal | enabled | up    | 2016-03-27T11:48:59.000000 | -               |
| 5  | nova-compute     | compute    | nova     | enabled | up    | 2016-03-27T11:48:59.000000 | -               |
+----+------------------+------------+----------+---------+-------+----------------------------+-----------------+

# æŸ¥çœ‹é•œåƒ
root@controller:~# nova image-list
+--------------------------------------+--------+--------+--------+
| ID                                   | Name   | Status | Server |
+--------------------------------------+--------+--------+--------+
| 67cfd037-5704-4432-9b2c-cf5fffdb6319 | cirros | ACTIVE |        |
+--------------------------------------+--------+--------+--------+
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;neutron&quot;&gt;å®‰è£…ç½‘ç»œæœåŠ¡neutron&lt;/h3&gt;

&lt;h4 id=&quot;section-13&quot;&gt;å®‰è£…æ§åˆ¶èŠ‚ç‚¹&lt;/h4&gt;

&lt;p&gt;1.åˆ›å»ºneutronæ•°æ®åº“å¹¶åˆ†é…ç›¸åº”æƒé™&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# åˆ›å»ºæ•°æ®åº“
CREATE DATABASE neutron;
# åˆ†é…è®¿é—®æƒé™
GRANT ALL PRIVILEGES ON neutron.* TO &#39;neutron&#39;@&#39;localhost&#39; \
  IDENTIFIED BY &#39;root&#39;;
GRANT ALL PRIVILEGES ON neutron.* TO &#39;neutron&#39;@&#39;%&#39; \
  IDENTIFIED BY &#39;root&#39;;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;2.åœ¨keystoneä¸­åˆ›å»ºneutronæœåŠ¡ä»¥åŠendpoint&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# åˆ›å»ºneutronç”¨æˆ·
root@controller:~# openstack user create --domain default --password-prompt neutron
User Password:
Repeat User Password:
+-----------+----------------------------------+
| Field     | Value                            |
+-----------+----------------------------------+
| domain_id | default                          |
| enabled   | True                             |
| id        | a8edd66b5dc64ce2b2a37cf66546297f |
| name      | neutron                          |
+-----------+----------------------------------+
# ç»™neutronç”¨æˆ·åˆ†é…adminæƒé™
root@controller:~# openstack role add --project service --user neutron admin
# åˆ›å»ºneutronæœåŠ¡
root@controller:~# openstack service create --name neutron \
&amp;gt;   --description &quot;OpenStack Networking&quot; network
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | OpenStack Networking             |
| enabled     | True                             |
| id          | 4a3333006f844469b2ae735014a24ec9 |
| name        | neutron                          |
| type        | network                          |
+-------------+----------------------------------+
# åˆ›å»ºç½‘ç»œæœåŠ¡endpoint
root@controller:~# openstack endpoint create --region RegionOne \
&amp;gt;   network public http://controller:9696
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | e7b234ba729b46cbbaa86db2df71e0f2 |
| interface    | public                           |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 4a3333006f844469b2ae735014a24ec9 |
| service_name | neutron                          |
| service_type | network                          |
| url          | http://controller:9696           |
+--------------+----------------------------------+

root@controller:~# openstack endpoint create --region RegionOne \
&amp;gt;   network internal http://controller:9696
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | fadda1557ca846edbeab3f6f8dc79823 |
| interface    | internal                         |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 4a3333006f844469b2ae735014a24ec9 |
| service_name | neutron                          |
| service_type | network                          |
| url          | http://controller:9696           |
+--------------+----------------------------------+

root@controller:~# openstack endpoint create --region RegionOne \
&amp;gt;   network admin http://controller:9696
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | 3f9866732fd84b70bb14e00fcee597a3 |
| interface    | admin                            |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 4a3333006f844469b2ae735014a24ec9 |
| service_name | neutron                          |
| service_type | network                          |
| url          | http://controller:9696           |
+--------------+----------------------------------+
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;3.å®‰è£…neutronè½¯ä»¶ï¼ˆæ ¹æ®Self-serviceç½‘ç»œæ–¹å¼ï¼‰&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;apt-get install neutron-server neutron-plugin-ml2 \
  neutron-plugin-linuxbridge-agent neutron-l3-agent neutron-dhcp-agent \
    neutron-metadata-agent python-neutronclient conntrack
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;4.ä¿®æ”¹é…ç½®æ–‡ä»¶/etc/neutron/neutron.conf&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[database]
...
connection = mysql+pymysql://neutron:root@controller/neutron

[DEFAULT]
...
core_plugin = ml2
service_plugins = router
allow_overlapping_ips = True
...
rpc_backend = rabbit
...
auth_strategy = keystone
...
notify_nova_on_port_status_changes = True
notify_nova_on_port_data_changes = True
nova_url = http://controller:8774/v2
...
verbose = True

[oslo_messaging_rabbit]
...
rabbit_host = controller
rabbit_userid = openstack
rabbit_password = RABBIT_PASS

[keystone_authtoken]
...
auth_uri = http://controller:5000
auth_url = http://controller:35357
auth_plugin = password
project_domain_id = default
user_domain_id = default
project_name = service
username = neutron
password = NEUTRON_PASS

[nova]
...
auth_url = http://controller:35357
auth_plugin = password
project_domain_id = default
user_domain_id = default
region_name = RegionOne
project_name = service
username = nova
password = NOVA_PASS
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;5.ä¿®æ”¹é…ç½®æ–‡ä»¶/etc/neutron/plugins/ml2/ml2_conf.ini&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[ml2]
...
type_drivers = flat,vlan,vxlan
...
tenant_network_types = vxlan
...
mechanism_drivers = linuxbridge,l2population
...
extension_drivers = port_security

[ml2_type_flat]
...
flat_networks = public

[ml2_type_vxlan]
...
vni_ranges = 1:1000

[securitygroup]
...
enable_ipset = True
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;6.ä¿®æ”¹é…ç½®æ–‡ä»¶/etc/neutron/plugins/ml2/linuxbridge_agent.ini&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[linux_bridge]
physical_interface_mappings = public:eth0

[vxlan]
enable_vxlan = True
local_ip = 192.168.2.2
l2_population = True

[agent]
...
prevent_arp_spoofing = True

[securitygroup]
...
enable_security_group = True
firewall_driver = neutron.agent.linux.iptables_firewall.IptablesFirewallDriver
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;7.ä¿®æ”¹é…ç½®æ–‡ä»¶/etc/neutron/l3_agent.ini&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[DEFAULT]
...
interface_driver = neutron.agent.linux.interface.BridgeInterfaceDriver
...
verbose = True
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;8.ä¿®æ”¹é…ç½®æ–‡ä»¶/etc/neutron/dhcp_agent.ini&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[DEFAULT]
...
interface_driver = neutron.agent.linux.interface.BridgeInterfaceDriver
dhcp_driver = neutron.agent.linux.dhcp.Dnsmasq
enable_isolated_metadata = True
...
verbose = True
...
dnsmasq_config_file = /etc/neutron/dnsmasq-neutron.conf

# åˆ›å»ºæ–‡ä»¶/etc/neutron/dnsmasq-neutron.confå¹¶å†™å…¥å¦‚ä¸‹å†…å®¹
dhcp-option-force=26,1450
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;9.ä¿®æ”¹é…ç½®æ–‡ä»¶/etc/neutron/metadata_agent.ini&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[DEFAULT]
...
auth_uri = http://controller:5000
auth_url = http://controller:35357
auth_region = RegionOne
auth_plugin = password
project_domain_id = default
user_domain_id = default
project_name = service
username = neutron
password = root
...
nova_metadata_ip = controller
...
metadata_proxy_shared_secret = root
...
verbose = True
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;10.ä¿®æ”¹é…ç½®æ–‡ä»¶/etc/nova/nova.conf&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[neutron]
...
url = http://controller:9696
auth_url = http://controller:35357
auth_plugin = password
project_domain_id = default
user_domain_id = default
region_name = RegionOne
project_name = service
username = neutron
password = root

service_metadata_proxy = True
metadata_proxy_shared_secret = root
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;11.åŒæ­¥æ•°æ®åº“&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;su -s /bin/sh -c &quot;neutron-db-manage --config-file /etc/neutron/neutron.conf \
  --config-file /etc/neutron/plugins/ml2/ml2_conf.ini upgrade head&quot; neutron
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;12.é‡å¯æœåŠ¡&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# é‡å¯nova
service nova-api restart
# é‡å¯neutron
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h4 id=&quot;section-14&quot;&gt;å®‰è£…è®¡ç®—èŠ‚ç‚¹&lt;/h4&gt;

&lt;p&gt;1.å®‰è£…è½¯ä»¶åŒ…&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;apt-get install neutron-plugin-linuxbridge-agent conntrack
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;2.ä¿®æ”¹é…ç½®æ–‡ä»¶/etc/neutron/neutron.conf&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[DEFAULT]
...
rpc_backend = rabbit
...
auth_strategy = keystone
...
verbose = True

[oslo_messaging_rabbit]
...
rabbit_host = controller
rabbit_userid = openstack
rabbit_password = root

[keystone_authtoken]
...
auth_uri = http://controller:5000
auth_url = http://controller:35357
auth_plugin = password
project_domain_id = default
user_domain_id = default
project_name = service
username = neutron
password = root
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;3.ä¿®æ”¹é…ç½®æ–‡ä»¶/etc/neutron/plugins/ml2/linuxbridge_agent.ini&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[linux_bridge]
physical_interface_mappings = public:eth0

[vxlan]
enable_vxlan = True
local_ip = 192.168.2.6
l2_population = True

[agent]
...
prevent_arp_spoofing = True

[securitygroup]
...
enable_security_group = True
firewall_driver = neutron.agent.linux.iptables_firewall.IptablesFirewallDriver
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;4.ä¿®æ”¹é…ç½®æ–‡ä»¶/etc/nova/nova.conf&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[neutron]
...
url = http://controller:9696
auth_url = http://controller:35357
auth_plugin = password
project_domain_id = default
user_domain_id = default
region_name = RegionOne
project_name = service
username = neutron
password = root
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;5.é‡å¯æœåŠ¡&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# é‡å¯nova-compute
service nova-compute restart
# é‡å¯ç½‘ç»œæœåŠ¡
service neutron-plugin-linuxbridge-agent restart
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;6.éªŒè¯&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# éªŒè¯æ˜¯å¦æˆåŠŸåŠ è½½æ’ä»¶
root@controller:~# neutron ext-list
+-----------------------+-----------------------------------------------+
| alias                 | name                                          |
+-----------------------+-----------------------------------------------+
| dns-integration       | DNS Integration                               |
| ext-gw-mode           | Neutron L3 Configurable external gateway mode |
| binding               | Port Binding                                  |
| agent                 | agent                                         |
| subnet_allocation     | Subnet Allocation                             |
| l3_agent_scheduler    | L3 Agent Scheduler                            |
| external-net          | Neutron external network                      |
| flavors               | Neutron Service Flavors                       |
| net-mtu               | Network MTU                                   |
| quotas                | Quota management support                      |
| l3-ha                 | HA Router extension                           |
| provider              | Provider Network                              |
| multi-provider        | Multi Provider Network                        |
| extraroute            | Neutron Extra Route                           |
| router                | Neutron L3 Router                             |
| extra_dhcp_opt        | Neutron Extra DHCP opts                       |
| security-group        | security-group                                |
| dhcp_agent_scheduler  | DHCP Agent Scheduler                          |
| rbac-policies         | RBAC Policies                                 |
| port-security         | Port Security                                 |
| allowed-address-pairs | Allowed Address Pairs                         |
| dvr                   | Distributed Virtual Router                    |
+-----------------------+-----------------------------------------------+
# éªŒè¯neutron agentsæ˜¯å¦æ­£ç¡®
root@controller:~# neutron agent-list
+--------------------------------------+--------------------+------------+-------+----------------+---------------------------+
| id                                   | agent_type         | host       | alive | admin_state_up | binary                    |
+--------------------------------------+--------------------+------------+-------+----------------+---------------------------+
| 28e6e70f-063e-433a-943f-ded82ec083fb | Metadata agent     | controller | :-)   | True           | neutron-metadata-agent    |
| 2abdf6a3-f0cd-4a3e-87a3-def58f03aeba | Linux bridge agent | controller | :-)   | True           | neutron-linuxbridge-agent |
| 5e78f457-95f6-4e95-929d-268d35f49037 | DHCP agent         | controller | :-)   | True           | neutron-dhcp-agent        |
| 82c1d9fa-a906-45fc-9a56-56390c8a35fb | L3 agent           | controller | :-)   | True           | neutron-l3-agent          |
| dbbb522e-a424-4606-8a69-77250154e5d3 | Linux bridge agent | compute    | :-)   | True           | neutron-linuxbridge-agent |
+--------------------------------------+--------------------+------------+-------+----------------+---------------------------+
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;horizon&quot;&gt;å®‰è£…é¢æ¿æœåŠ¡horizon&lt;/h3&gt;

&lt;p&gt;1.å®‰è£…horizonè½¯ä»¶åŒ…&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;apt-get install openstack-dashboard
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;2.ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;OPENSTACK_HOST = &quot;controller&quot;
ALLOWED_HOSTS = [&#39;*&#39;, ]
CACHES = {
    &#39;default&#39;: {
        &#39;BACKEND&#39;: &#39;django.core.cache.backends.memcached.MemcachedCache&#39;,
        &#39;LOCATION&#39;: &#39;127.0.0.1:11211&#39;,
    }
}
OPENSTACK_KEYSTONE_DEFAULT_ROLE = &quot;user&quot;
OPENSTACK_KEYSTONE_MULTIDOMAIN_SUPPORT = True
OPENSTACK_API_VERSIONS = {
    &quot;identity&quot;: 3,
    &quot;volume&quot;: 2,
}
OPENSTACK_NEUTRON_NETWORK = {
    &#39;enable_router&#39;: False,
    &#39;enable_quotas&#39;: False,
    &#39;enable_distributed_router&#39;: False,
    &#39;enable_ha_router&#39;: False,
    &#39;enable_lb&#39;: False,
    &#39;enable_firewall&#39;: False,
    &#39;enable_vpn&#39;: False,
    &#39;enable_fip_topology_check&#39;: False,
}
TIME_ZONE = &quot;TIME_ZONE&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;3.éªŒè¯é¢æ¿&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ç™»å…¥é¢æ¿æµ‹è¯•é¢æ¿å¯ç”¨æ€§
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
        <pubDate>Sun, 27 Mar 2016 17:00:13 +0800</pubDate>
        <link>http://www.pisces.ml/articles/openstack/20160328</link>
        <guid isPermaLink="true">http://www.pisces.ml/articles/openstack/20160328</guid>
        
        
        <category>openstack</category>
        
      </item>
    
      <item>
        <title>DNSåŸŸåå«ä¹‰è§£æ</title>
        <description>&lt;p&gt;åŸŸåæ³¨å†Œå®Œæˆåé¦–å…ˆéœ€è¦åšåŸŸåè§£æï¼ŒåŸŸåè§£æå°±æ˜¯æŠŠåŸŸåæŒ‡å‘ç½‘ç«™æ‰€åœ¨æœåŠ¡å™¨çš„IPï¼Œè®©äººä»¬é€šè¿‡æ³¨å†Œçš„åŸŸåå¯ä»¥è®¿é—®åˆ°ç½‘ç«™ã€‚IPåœ°å€æ˜¯ç½‘ç»œä¸Šæ ‡è¯†æœåŠ¡å™¨çš„æ•°å­—åœ°å€ï¼Œä¸ºäº†æ–¹ä¾¿è®°å¿†ï¼Œä½¿ç”¨åŸŸåæ¥ä»£æ›¿IPåœ°å€ã€‚åŸŸåè§£æå°±æ˜¯åŸŸååˆ°IPåœ°å€çš„è½¬æ¢è¿‡ç¨‹ï¼ŒåŸŸåçš„è§£æå·¥ä½œç”±DNSæœåŠ¡å™¨å®Œæˆã€‚DNSæœåŠ¡å™¨ä¼šæŠŠåŸŸåè§£æåˆ°ä¸€ä¸ªIPåœ°å€ï¼Œç„¶ååœ¨æ­¤IPåœ°å€çš„ä¸»æœºä¸Šå°†ä¸€ä¸ªå­ç›®å½•ä¸åŸŸåç»‘å®šã€‚åŸŸåè§£ææ—¶ä¼šæ·»åŠ è§£æè®°å½•ï¼Œè¿™äº›è®°å½•æœ‰ï¼šAè®°å½•ã€AAAAè®°å½•ã€CNAMEè®°å½•ã€MXè®°å½•ã€NSè®°å½•ã€TXTè®°å½•ã€SRVè®°å½•ã€URLè½¬å‘ã€‚&lt;/p&gt;

&lt;h2 id=&quot;dns&quot;&gt;DNSåŸŸåè§£æè®°å½•&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Aè®°å½•&lt;/strong&gt;ï¼š å°†åŸŸåæŒ‡å‘ä¸€ä¸ªIPv4åœ°å€ï¼ˆä¾‹å¦‚ï¼š100.100.100.100ï¼‰ï¼Œéœ€è¦å¢åŠ Aè®°å½•&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;CNAMEè®°å½•&lt;/strong&gt;ï¼š å¦‚æœå°†åŸŸåæŒ‡å‘ä¸€ä¸ªåŸŸåï¼Œå®ç°ä¸è¢«æŒ‡å‘åŸŸåç›¸åŒçš„è®¿é—®æ•ˆæœï¼Œéœ€è¦å¢åŠ CNAMEè®°å½•ã€‚è¿™ä¸ªåŸŸåä¸€èˆ¬æ˜¯ä¸»æœºæœåŠ¡å•†æä¾›çš„ä¸€ä¸ªåŸŸå&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;MXè®°å½•&lt;/strong&gt;ï¼š å»ºç«‹ç”µå­é‚®ç®±æœåŠ¡ï¼Œå°†æŒ‡å‘é‚®ä»¶æœåŠ¡å™¨åœ°å€ï¼Œéœ€è¦è®¾ç½®MXè®°å½•ã€‚å»ºç«‹é‚®ç®±æ—¶ï¼Œä¸€èˆ¬ä¼šæ ¹æ®é‚®ç®±æœåŠ¡å•†æä¾›çš„MXè®°å½•å¡«å†™æ­¤è®°å½•&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;NSè®°å½•&lt;/strong&gt;ï¼š åŸŸåè§£ææœåŠ¡å™¨è®°å½•ï¼Œå¦‚æœè¦å°†å­åŸŸåæŒ‡å®šæŸä¸ªåŸŸåæœåŠ¡å™¨æ¥è§£æï¼Œéœ€è¦è®¾ç½®NSè®°å½•&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;TXTè®°å½•&lt;/strong&gt;ï¼š å¯ä»»æ„å¡«å†™ï¼Œå¯ä¸ºç©ºã€‚ä¸€èˆ¬åšä¸€äº›éªŒè¯è®°å½•æ—¶ä¼šä½¿ç”¨æ­¤é¡¹ï¼Œå¦‚ï¼šåšSPFï¼ˆååƒåœ¾é‚®ä»¶ï¼‰è®°å½•&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;AAAAè®°å½•&lt;/strong&gt;ï¼š å°†ä¸»æœºåï¼ˆæˆ–åŸŸåï¼‰æŒ‡å‘ä¸€ä¸ªIPv6åœ°å€ï¼ˆä¾‹å¦‚ï¼šff03:0:0:0:0:0:0:c1ï¼‰ï¼Œéœ€è¦æ·»åŠ AAAAè®°å½•&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;SRVè®°å½•&lt;/strong&gt;ï¼š æ·»åŠ æœåŠ¡è®°å½•æœåŠ¡å™¨æœåŠ¡è®°å½•æ—¶ä¼šæ·»åŠ æ­¤é¡¹ï¼ŒSRVè®°å½•äº†å“ªå°è®¡ç®—æœºæä¾›äº†å“ªä¸ªæœåŠ¡ã€‚æ ¼å¼ä¸ºï¼šæœåŠ¡çš„åå­—.åè®®çš„ç±»å‹ï¼ˆä¾‹å¦‚ï¼š_example-server._tcpï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;SOAè®°å½•&lt;/strong&gt;ï¼š SOAå«åšèµ·å§‹æˆæƒæœºæ„è®°å½•ï¼ŒNSç”¨äºæ ‡è¯†å¤šå°åŸŸåè§£ææœåŠ¡å™¨ï¼ŒSOAè®°å½•ç”¨äºåœ¨ä¼—å¤šNSè®°å½•ä¸­é‚£ä¸€å°æ˜¯ä¸»æœåŠ¡å™¨&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;PTRè®°å½•&lt;/strong&gt;ï¼š PTRè®°å½•æ˜¯Aè®°å½•çš„é€†å‘è®°å½•ï¼Œåˆç§°åšIPåæŸ¥è®°å½•æˆ–æŒ‡é’ˆè®°å½•ï¼Œè´Ÿè´£å°†IPåå‘è§£æä¸ºåŸŸå&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ˜¾æ€§URLè½¬å‘è®°å½•&lt;/strong&gt;ï¼š å°†åŸŸåæŒ‡å‘ä¸€ä¸ªhttp(s)åè®®åœ°å€ï¼Œè®¿é—®åŸŸåæ—¶ï¼Œè‡ªåŠ¨è·³è½¬è‡³ç›®æ ‡åœ°å€ã€‚ä¾‹å¦‚ï¼šå°†www.liuht.cnæ˜¾æ€§è½¬å‘åˆ°www.itbilu.comåï¼Œè®¿é—®www.liuht.cnæ—¶ï¼Œåœ°å€æ æ˜¾ç¤ºçš„åœ°å€ä¸ºï¼šwww.itbilu.comã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;éšæ€§URè½¬å‘è®°å½•&lt;/strong&gt;ï¼š å°†åŸŸåæŒ‡å‘ä¸€ä¸ªhttp(s)åè®®åœ°å€ï¼Œè®¿é—®åŸŸåæ—¶ï¼Œè‡ªåŠ¨è·³è½¬è‡³ç›®æ ‡åœ°å€ï¼Œéšæ€§è½¬å‘ä¼šéšè—çœŸå®çš„ç›®æ ‡åœ°å€ã€‚ä¾‹å¦‚ï¼šå°†www.liuht.cnæ˜¾æ€§è½¬å‘åˆ°www.itbilu.comåï¼Œè®¿é—®www.liuht.cnæ—¶ï¼Œåœ°å€æ æ˜¾ç¤ºçš„åœ°å€ä»ç„¶æ˜¯ï¼šwww.picses.gaã€‚&lt;/p&gt;

&lt;h2 id=&quot;dns-1&quot;&gt;DNSè§£æä¸­çš„é—®é¢˜&lt;/h2&gt;

&lt;h3 id=&quot;acname&quot;&gt;Aè®°å½•ä¸CNAMEè®°å½•&lt;/h3&gt;

&lt;p&gt;Aè®°å½•æ˜¯æŠŠä¸€ä¸ªåŸŸåè§£æåˆ°ä¸€ä¸ªIPåœ°å€ï¼Œè€ŒCNAMEè®°å½•æ˜¯æŠŠåŸŸåè§£æåˆ°å¦å¤–ä¸€ä¸ªåŸŸåï¼Œè€Œè¿™ä¸ªåŸŸåæœ€ç»ˆä¼šæŒ‡å‘ä¸€ä¸ªAè®°å½•ï¼Œåœ¨åŠŸèƒ½å®ç°åœ¨ä¸ŠAè®°å½•ä¸CNAMEè®°å½•æ²¡æœ‰åŒºåˆ«ã€‚&lt;/p&gt;

&lt;p&gt;CNAMEè®°å½•åœ¨åšIPåœ°å€å˜æ›´æ—¶è¦æ¯”Aè®°å½•æ–¹ä¾¿ã€‚CNAMEè®°å½•å…è®¸å°†å¤šä¸ªåå­—æ˜ å°„åˆ°åŒä¸€å°è®¡ç®—æœºï¼Œå½“æœ‰å¤šä¸ªåŸŸåéœ€è¦æŒ‡å‘åŒä¸€æœåŠ¡å™¨IPï¼Œæ­¤æ—¶å¯ä»¥å°†ä¸€ä¸ªåŸŸååšAè®°å½•æŒ‡å‘æœåŠ¡å™¨IPï¼Œç„¶åå°†å…¶ä»–çš„åŸŸååšåˆ«å(å³ï¼šCNAME)åˆ°Aè®°å½•çš„åŸŸåä¸Šã€‚å½“æœåŠ¡å™¨IPåœ°å€å˜æ›´æ—¶ï¼Œåªéœ€è¦æ›´æ”¹Aè®°å½•çš„é‚£ä¸ªåŸŸååˆ°æ–°IPä¸Šï¼Œå…¶å®ƒåšåˆ«åçš„åŸŸåä¼šè‡ªåŠ¨æ›´æ”¹åˆ°æ–°çš„IPåœ°å€ä¸Šï¼Œè€Œä¸å¿…å¯¹æ¯ä¸ªåŸŸååšæ›´æ”¹ã€‚&lt;/p&gt;

&lt;h3 id=&quot;aaaaa&quot;&gt;Aè®°å½•ä¸AAAAè®°å½•&lt;/h3&gt;

&lt;p&gt;äºŒè€…éƒ½æ˜¯æŒ‡å‘ä¸€ä¸ªIPåœ°å€ï¼Œä½†å¯¹åº”çš„IPç‰ˆæœ¬ä¸åŒã€‚Aè®°å½•æŒ‡å‘IPv4åœ°å€ï¼ŒAAAAè®°å½•æŒ‡å‘IPv6åœ°å€ã€‚AAAAè®°å½•æ˜¯Aè®°å½•çš„å‡çº§ç‰ˆæœ¬ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ipv4ipv6&quot;&gt;IPv4ä¸IPv6&lt;/h3&gt;

&lt;p&gt;IPv4ï¼Œæ˜¯äº’è”ç½‘åè®®ï¼ˆInternet Protocolï¼ŒIPï¼‰çš„ç¬¬å››ç‰ˆï¼Œä¹Ÿæ˜¯ç¬¬ä¸€ä¸ªè¢«å¹¿æ³›ä½¿ç”¨çš„ç‰ˆæœ¬ï¼Œæ˜¯æ„æˆç°ä»Šäº’è”ç½‘æŠ€æœ¯çš„åŸºç¡€åè®®ã€‚IPv4 çš„ä¸‹ä¸€ä¸ªç‰ˆæœ¬å°±æ˜¯IPv6ï¼Œåœ¨å°†æ¥å°†å–ä»£ç›®å‰è¢«å¹¿æ³›ä½¿ç”¨çš„IPv4ã€‚&lt;/p&gt;

&lt;p&gt;IPv4ä¸­è§„å®šIPåœ°å€é•¿åº¦ä¸º32ä½ï¼ˆæŒ‰TCP/IPå‚è€ƒæ¨¡å‹åˆ’åˆ†) ï¼Œå³æœ‰2^32-1ä¸ªåœ°å€ã€‚IPv6çš„æå‡ºæœ€æ—©æ˜¯ä¸ºäº†è§£å†³ï¼Œéšç€äº’è”ç½‘çš„è¿…é€Ÿå‘å±•IPv4åœ°å€ç©ºé—´å°†è¢«è€—å°½çš„é—®é¢˜ã€‚ä¸ºäº†æ‰©å¤§åœ°å€ç©ºé—´ï¼ŒIPv6å°†IPåœ°å€çš„é•¿åº¦ç”±32ä½å¢åŠ åˆ°äº†128ä½ã€‚åœ¨IPv6çš„è®¾è®¡è¿‡ç¨‹ä¸­é™¤äº†ä¸€åŠ³æ°¸é€¸åœ°è§£å†³äº†åœ°å€çŸ­ç¼ºé—®é¢˜ä»¥å¤–ï¼Œè¿˜è§£å†³äº†IPv4ä¸­çš„å…¶å®ƒé—®é¢˜ï¼Œå¦‚ï¼šç«¯åˆ°ç«¯IPè¿æ¥ã€æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰ã€å®‰å…¨æ€§ã€å¤šæ’­ã€ç§»åŠ¨æ€§ã€å³æ’å³ç”¨ç­‰ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ttl&quot;&gt;TTLå€¼&lt;/h3&gt;

&lt;p&gt;TTLï¼ç”Ÿå­˜æ—¶é—´ï¼ˆTime To Liveï¼‰ï¼Œè¡¨ç¤ºè§£æè®°å½•åœ¨DNSæœåŠ¡å™¨ä¸­çš„ç¼“å­˜æ—¶é—´ï¼ŒTTLçš„æ—¶é—´é•¿åº¦å•ä½æ˜¯ç§’ï¼Œä¸€èˆ¬ä¸º3600ç§’ã€‚æ¯”å¦‚ï¼šåœ¨è®¿é—®www.itbilu.comæ—¶ï¼Œå¦‚æœåœ¨DNSæœåŠ¡å™¨çš„ç¼“å­˜ä¸­æ²¡æœ‰è¯¥è®°å½•ï¼Œå°±ä¼šå‘æŸä¸ªNSæœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œè·å¾—è¯¥è®°å½•åï¼Œè¯¥è®°å½•ä¼šåœ¨DNSæœåŠ¡å™¨ä¸Šä¿å­˜TTLçš„æ—¶é—´é•¿åº¦ï¼Œåœ¨TTLæœ‰æ•ˆæœŸå†…è®¿é—®www.itbilu.comï¼ŒDNSæœåŠ¡å™¨ä¼šç›´æ¥ç¼“å­˜ä¸­è¿”å›åˆšæ‰çš„è®°å½•ã€‚&lt;/p&gt;
</description>
        <pubDate>Tue, 22 Mar 2016 17:00:13 +0800</pubDate>
        <link>http://www.pisces.ml/articles/2016322</link>
        <guid isPermaLink="true">http://www.pisces.ml/articles/2016322</guid>
        
        
        <category>çŸ¥è¯†æ¢³ç†</category>
        
      </item>
    
      <item>
        <title>Welcome to Jekyll and EasyBook</title>
        <description>&lt;p&gt;Youâ€™ll find this post in your &lt;code class=&quot;highlighter-rouge&quot;&gt;_posts&lt;/code&gt; directory. Go ahead and edit it and re-build the site to see your changes. You can rebuild the site in many different ways, but the most common way is to run &lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll serve&lt;/code&gt;, which launches a web server and auto-regenerates your site when a file is updated.&lt;/p&gt;

&lt;p&gt;To add new posts, simply add a file in the &lt;code class=&quot;highlighter-rouge&quot;&gt;_posts&lt;/code&gt; directory that follows the convention &lt;code class=&quot;highlighter-rouge&quot;&gt;YYYY-MM-DD-name-of-post.ext&lt;/code&gt; and includes the necessary front matter. Take a look at the source for this post to get an idea about how it works.&lt;/p&gt;

&lt;p&gt;GitHub Flavored Markdown is supported.&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print_hi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Hi, &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;print_hi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;Tom&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#=&amp;gt; prints &#39;Hi, Tom&#39; to STDOUT.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;easybook-advanced-functions&quot;&gt;EasyBook Advanced Functions&lt;/h2&gt;

&lt;p&gt;You are using &lt;a href=&quot;https://github.com/laobubu/jekyll-theme-EasyBook&quot;&gt;EasyBook&lt;/a&gt; the template from &lt;a href=&quot;http://laobubu.net&quot;&gt;laobubu.net&lt;/a&gt;. Therefore some features are supported now:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Pagination&lt;/strong&gt; is enabled.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Disqus&lt;/strong&gt; or &lt;strong&gt;å¤šè¯´&lt;/strong&gt; is ready.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;TOC&lt;/strong&gt; for posts is enabled.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Profile&lt;/strong&gt; including your links and avatar on the sidebar.&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;And moreâ€¦&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;Tips:&lt;/strong&gt; You can disable Disqus or å¤šè¯´ on posts/pages by adding &lt;code class=&quot;highlighter-rouge&quot;&gt;nocomments: true&lt;/code&gt; into &lt;a href=&quot;http://jekyllrb.com/docs/frontmatter/&quot;&gt;YAML Front Matter&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;EasyBook uses upaiyun CDN to make everyone lncluding Chinese visitors feel speedy. You can find it in &lt;code class=&quot;highlighter-rouge&quot;&gt;_includes/footer.html&lt;/code&gt; and change it to your favorite CDN like Google CDN.&lt;/p&gt;

&lt;h2 id=&quot;support-me-by&quot;&gt;Support me byâ€¦&lt;/h2&gt;

&lt;h3 id=&quot;add-a-link&quot;&gt;Add a link&lt;/h3&gt;

&lt;p&gt;EasyBook does not make the footer heavy; the link to theme could be on &lt;code class=&quot;highlighter-rouge&quot;&gt;about.md&lt;/code&gt;:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;This website is using &lt;a href=&quot;http://laobubu.net&quot;&gt;laobubu&lt;/a&gt;â€™s theme: &lt;a href=&quot;https://github.com/laobubu/jekyll-theme-EasyBook&quot;&gt;EasyBook&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;donate-paypal-or-&quot;&gt;Donate (PayPal or æ”¯ä»˜å®)&lt;/h3&gt;

&lt;p&gt;Thatâ€™s the best :smile:&lt;/p&gt;

&lt;p&gt;Please visit &lt;a href=&quot;http://laobubu.net/donate.html&quot;&gt;http://laobubu.net/donate.html&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;star-and-fork-on-github-free&quot;&gt;Star and Fork on GitHub (free)&lt;/h3&gt;

&lt;p&gt;Not going to donate? Thatâ€™s okay. You can also send out your precious star &lt;a href=&quot;https://github.com/laobubu/jekyll-theme-EasyBook&quot;&gt;on GitHub&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;and-here-we-go&quot;&gt;And Here We Go&lt;/h2&gt;

&lt;p&gt;Check out the &lt;a href=&quot;http://jekyllrb.com&quot;&gt;Jekyll docs&lt;/a&gt; for more info on how to get the most out of Jekyll. File all bugs/feature requests at &lt;a href=&quot;https://github.com/jekyll/jekyll&quot;&gt;Jekyllâ€™s GitHub repo&lt;/a&gt;. If you have questions, you can ask them on &lt;a href=&quot;https://github.com/jekyll/jekyll-help&quot;&gt;Jekyllâ€™s dedicated Help repository&lt;/a&gt;.&lt;/p&gt;

</description>
        <pubDate>Tue, 30 Dec 2014 17:00:13 +0800</pubDate>
        <link>http://www.pisces.ml/archivers/hello</link>
        <guid isPermaLink="true">http://www.pisces.ml/archivers/hello</guid>
        
        
        <category>jekyll</category>
        
      </item>
    
  </channel>
</rss>
